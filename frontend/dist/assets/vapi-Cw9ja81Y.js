import{g as Pa,a as Da}from"./index-K_KWOV6X.js";function Ia(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var Ke={};function hn(t,e){if(t==null)return{};var n,r,i=function(c,l){if(c==null)return{};var u,m,h={},p=Object.keys(c);for(m=0;m<p.length;m++)u=p[m],l.indexOf(u)>=0||(h[u]=c[u]);return h}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function me(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function q(t){return q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(t)}function $i(t){var e=function(n,r){if(q(n)!=="object"||n===null)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var a=i.call(n,r);if(q(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}(t,"string");return q(e)==="symbol"?e:String(e)}function vr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$i(r.key),r)}}function ge(t,e,n){return e&&vr(t.prototype,e),n&&vr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function we(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bt(t,e){return bt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},bt(t,e)}function an(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bt(t,e)}function on(t,e){if(e&&(q(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return we(t)}function pe(t){return pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pe(t)}function Le(t,e,n){return(e=$i(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _r(t,e,n,r,i,a,c){try{var l=t[a](c),u=l.value}catch(m){return void n(m)}l.done?e(u):Promise.resolve(u).then(r,i)}function D(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function c(u){_r(a,r,i,c,l,"next",u)}function l(u){_r(a,r,i,c,l,"throw",u)}c(void 0)})}}function yr(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function $e(t,e){return function(n){if(Array.isArray(n))return n}(t)||function(n,r){var i=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var a,c,l,u,m=[],h=!0,p=!1;try{if(l=(i=i.call(n)).next,r===0){if(Object(i)!==i)return;h=!1}else for(;!(h=(a=l.call(i)).done)&&(m.push(a.value),m.length!==r);h=!0);}catch(v){p=!0,c=v}finally{try{if(!h&&i.return!=null&&(u=i.return(),Object(u)!==u))return}finally{if(p)throw c}}return m}}(t,e)||function(n,r){if(n){if(typeof n=="string")return yr(n,r);var i=Object.prototype.toString.call(n).slice(8,-1);return i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set"?Array.from(n):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?yr(n,r):void 0}}(t,e)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var Ji,Me={},Na={get exports(){return Me},set exports(t){Me=t}},Ze=typeof Reflect=="object"?Reflect:null,br=Ze&&typeof Ze.apply=="function"?Ze.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};Ji=Ze&&typeof Ze.ownKeys=="function"?Ze.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var Sr=Number.isNaN||function(t){return t!=t};function B(){B.init.call(this)}Na.exports=B,Me.once=function(t,e){return new Promise(function(n,r){function i(c){t.removeListener(e,a),r(c)}function a(){typeof t.removeListener=="function"&&t.removeListener("error",i),n([].slice.call(arguments))}Mr(t,e,a,{once:!0}),e!=="error"&&function(c,l,u){typeof c.on=="function"&&Mr(c,"error",l,u)}(t,i,{once:!0})})},B.EventEmitter=B,B.prototype._events=void 0,B.prototype._eventsCount=0,B.prototype._maxListeners=void 0;var Er=10;function Vt(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function Wi(t){return t._maxListeners===void 0?B.defaultMaxListeners:t._maxListeners}function wr(t,e,n,r){var i,a,c,l;if(Vt(n),(a=t._events)===void 0?(a=t._events=Object.create(null),t._eventsCount=0):(a.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),a=t._events),c=a[e]),c===void 0)c=a[e]=n,++t._eventsCount;else if(typeof c=="function"?c=a[e]=r?[n,c]:[c,n]:r?c.unshift(n):c.push(n),(i=Wi(t))>0&&c.length>i&&!c.warned){c.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+c.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=c.length,l=u,console&&console.warn&&console.warn(l)}return t}function Ra(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function kr(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=Ra.bind(r);return i.listener=n,r.wrapFn=i,i}function Tr(t,e,n){var r=t._events;if(r===void 0)return[];var i=r[e];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?function(a){for(var c=new Array(a.length),l=0;l<c.length;++l)c[l]=a[l].listener||a[l];return c}(i):zi(i,i.length)}function Cr(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}function zi(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function Mr(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else{if(typeof t.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,function i(a){r.once&&t.removeEventListener(e,i),n(a)})}}Object.defineProperty(B,"defaultMaxListeners",{enumerable:!0,get:function(){return Er},set:function(t){if(typeof t!="number"||t<0||Sr(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Er=t}}),B.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},B.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||Sr(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},B.prototype.getMaxListeners=function(){return Wi(this)},B.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r=t==="error",i=this._events;if(i!==void 0)r=r&&i.error===void 0;else if(!r)return!1;if(r){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var c=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw c.context=a,c}var l=i[t];if(l===void 0)return!1;if(typeof l=="function")br(l,this,e);else{var u=l.length,m=zi(l,u);for(n=0;n<u;++n)br(m[n],this,e)}return!0},B.prototype.addListener=function(t,e){return wr(this,t,e,!1)},B.prototype.on=B.prototype.addListener,B.prototype.prependListener=function(t,e){return wr(this,t,e,!0)},B.prototype.once=function(t,e){return Vt(e),this.on(t,kr(this,t,e)),this},B.prototype.prependOnceListener=function(t,e){return Vt(e),this.prependListener(t,kr(this,t,e)),this},B.prototype.removeListener=function(t,e){var n,r,i,a,c;if(Vt(e),(r=this._events)===void 0)return this;if((n=r[t])===void 0)return this;if(n===e||n.listener===e)--this._eventsCount==0?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if(typeof n!="function"){for(i=-1,a=n.length-1;a>=0;a--)if(n[a]===e||n[a].listener===e){c=n[a].listener,i=a;break}if(i<0)return this;i===0?n.shift():function(l,u){for(;u+1<l.length;u++)l[u]=l[u+1];l.pop()}(n,i),n.length===1&&(r[t]=n[0]),r.removeListener!==void 0&&this.emit("removeListener",t,c||e)}return this},B.prototype.off=B.prototype.removeListener,B.prototype.removeAllListeners=function(t){var e,n,r;if((n=this._events)===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var i,a=Object.keys(n);for(r=0;r<a.length;++r)(i=a[r])!=="removeListener"&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(e=n[t])=="function")this.removeListener(t,e);else if(e!==void 0)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},B.prototype.listeners=function(t){return Tr(this,t,!0)},B.prototype.rawListeners=function(t){return Tr(this,t,!1)},B.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Cr.call(t,e)},B.prototype.listenerCount=Cr,B.prototype.eventNames=function(){return this._eventsCount>0?Ji(this._events):[]};var Ar=Object.prototype.hasOwnProperty;function Or(t,e,n){for(n of t.keys())if(se(n,e))return n}function se(t,e){var n,r,i;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&se(t[r],e[r]););return r===-1}if(n===Set){if(t.size!==e.size)return!1;for(r of t)if((i=r)&&typeof i=="object"&&!(i=Or(e,i))||!e.has(i))return!1;return!0}if(n===Map){if(t.size!==e.size)return!1;for(r of t)if((i=r[0])&&typeof i=="object"&&!(i=Or(e,i))||!se(r[1],e.get(i)))return!1;return!0}if(n===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(n===DataView){if((r=t.byteLength)===e.byteLength)for(;r--&&t.getInt8(r)===e.getInt8(r););return r===-1}if(ArrayBuffer.isView(t)){if((r=t.byteLength)===e.byteLength)for(;r--&&t[r]===e[r];);return r===-1}if(!n||typeof t=="object"){for(n in r=0,t)if(Ar.call(t,n)&&++r&&!Ar.call(e,n)||!(n in e)||!se(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!=t&&e!=e}const ja={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},Hi={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},H={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},ne={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},Oe={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class y{static getFirstMatch(e,n){const r=n.match(e);return r&&r.length>0&&r[1]||""}static getSecondMatch(e,n){const r=n.match(e);return r&&r.length>1&&r[2]||""}static matchAndReturnConst(e,n,r){if(e.test(n))return r}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){const n=e.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(n.push(0),n[0]===10)switch(n[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){const n=e.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(n.push(0),!(n[0]===1&&n[1]<5))return n[0]===1&&n[1]<6?"Cupcake":n[0]===1&&n[1]>=6?"Donut":n[0]===2&&n[1]<2?"Eclair":n[0]===2&&n[1]===2?"Froyo":n[0]===2&&n[1]>2?"Gingerbread":n[0]===3?"Honeycomb":n[0]===4&&n[1]<1?"Ice Cream Sandwich":n[0]===4&&n[1]<4?"Jelly Bean":n[0]===4&&n[1]>=4?"KitKat":n[0]===5?"Lollipop":n[0]===6?"Marshmallow":n[0]===7?"Nougat":n[0]===8?"Oreo":n[0]===9?"Pie":void 0}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,n,r=!1){const i=y.getVersionPrecision(e),a=y.getVersionPrecision(n);let c=Math.max(i,a),l=0;const u=y.map([e,n],m=>{const h=c-y.getVersionPrecision(m),p=m+new Array(h+1).join(".0");return y.map(p.split("."),v=>new Array(20-v.length).join("0")+v).reverse()});for(r&&(l=c-Math.min(i,a)),c-=1;c>=l;){if(u[0][c]>u[1][c])return 1;if(u[0][c]===u[1][c]){if(c===l)return 0;c-=1}else if(u[0][c]<u[1][c])return-1}}static map(e,n){const r=[];let i;if(Array.prototype.map)return Array.prototype.map.call(e,n);for(i=0;i<e.length;i+=1)r.push(n(e[i]));return r}static find(e,n){let r,i;if(Array.prototype.find)return Array.prototype.find.call(e,n);for(r=0,i=e.length;r<i;r+=1){const a=e[r];if(n(a,r))return a}}static assign(e,...n){const r=e;let i,a;if(Object.assign)return Object.assign(e,...n);for(i=0,a=n.length;i<a;i+=1){const c=n[i];typeof c=="object"&&c!==null&&Object.keys(c).forEach(l=>{r[l]=c[l]})}return e}static getBrowserAlias(e){return ja[e]}static getBrowserTypeByAlias(e){return Hi[e]||""}}const Y=/version\/(\d+(\.?_?\d+)+)/i,xa=[{test:[/googlebot/i],describe(t){const e={name:"Googlebot"},n=y.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,t)||y.getFirstMatch(Y,t);return n&&(e.version=n),e}},{test:[/opera/i],describe(t){const e={name:"Opera"},n=y.getFirstMatch(Y,t)||y.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/opr\/|opios/i],describe(t){const e={name:"Opera"},n=y.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,t)||y.getFirstMatch(Y,t);return n&&(e.version=n),e}},{test:[/SamsungBrowser/i],describe(t){const e={name:"Samsung Internet for Android"},n=y.getFirstMatch(Y,t)||y.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/Whale/i],describe(t){const e={name:"NAVER Whale Browser"},n=y.getFirstMatch(Y,t)||y.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/MZBrowser/i],describe(t){const e={name:"MZ Browser"},n=y.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,t)||y.getFirstMatch(Y,t);return n&&(e.version=n),e}},{test:[/focus/i],describe(t){const e={name:"Focus"},n=y.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,t)||y.getFirstMatch(Y,t);return n&&(e.version=n),e}},{test:[/swing/i],describe(t){const e={name:"Swing"},n=y.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,t)||y.getFirstMatch(Y,t);return n&&(e.version=n),e}},{test:[/coast/i],describe(t){const e={name:"Opera Coast"},n=y.getFirstMatch(Y,t)||y.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(t){const e={name:"Opera Touch"},n=y.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,t)||y.getFirstMatch(Y,t);return n&&(e.version=n),e}},{test:[/yabrowser/i],describe(t){const e={name:"Yandex Browser"},n=y.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,t)||y.getFirstMatch(Y,t);return n&&(e.version=n),e}},{test:[/ucbrowser/i],describe(t){const e={name:"UC Browser"},n=y.getFirstMatch(Y,t)||y.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/Maxthon|mxios/i],describe(t){const e={name:"Maxthon"},n=y.getFirstMatch(Y,t)||y.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/epiphany/i],describe(t){const e={name:"Epiphany"},n=y.getFirstMatch(Y,t)||y.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/puffin/i],describe(t){const e={name:"Puffin"},n=y.getFirstMatch(Y,t)||y.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/sleipnir/i],describe(t){const e={name:"Sleipnir"},n=y.getFirstMatch(Y,t)||y.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/k-meleon/i],describe(t){const e={name:"K-Meleon"},n=y.getFirstMatch(Y,t)||y.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/micromessenger/i],describe(t){const e={name:"WeChat"},n=y.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,t)||y.getFirstMatch(Y,t);return n&&(e.version=n),e}},{test:[/qqbrowser/i],describe(t){const e={name:/qqbrowserlite/i.test(t)?"QQ Browser Lite":"QQ Browser"},n=y.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,t)||y.getFirstMatch(Y,t);return n&&(e.version=n),e}},{test:[/msie|trident/i],describe(t){const e={name:"Internet Explorer"},n=y.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/\sedg\//i],describe(t){const e={name:"Microsoft Edge"},n=y.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/edg([ea]|ios)/i],describe(t){const e={name:"Microsoft Edge"},n=y.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/vivaldi/i],describe(t){const e={name:"Vivaldi"},n=y.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/seamonkey/i],describe(t){const e={name:"SeaMonkey"},n=y.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/sailfish/i],describe(t){const e={name:"Sailfish"},n=y.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,t);return n&&(e.version=n),e}},{test:[/silk/i],describe(t){const e={name:"Amazon Silk"},n=y.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/phantom/i],describe(t){const e={name:"PhantomJS"},n=y.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/slimerjs/i],describe(t){const e={name:"SlimerJS"},n=y.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e={name:"BlackBerry"},n=y.getFirstMatch(Y,t)||y.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/(web|hpw)[o0]s/i],describe(t){const e={name:"WebOS Browser"},n=y.getFirstMatch(Y,t)||y.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/bada/i],describe(t){const e={name:"Bada"},n=y.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/tizen/i],describe(t){const e={name:"Tizen"},n=y.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,t)||y.getFirstMatch(Y,t);return n&&(e.version=n),e}},{test:[/qupzilla/i],describe(t){const e={name:"QupZilla"},n=y.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,t)||y.getFirstMatch(Y,t);return n&&(e.version=n),e}},{test:[/firefox|iceweasel|fxios/i],describe(t){const e={name:"Firefox"},n=y.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/electron/i],describe(t){const e={name:"Electron"},n=y.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/MiuiBrowser/i],describe(t){const e={name:"Miui"},n=y.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/chromium/i],describe(t){const e={name:"Chromium"},n=y.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,t)||y.getFirstMatch(Y,t);return n&&(e.version=n),e}},{test:[/chrome|crios|crmo/i],describe(t){const e={name:"Chrome"},n=y.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/GSA/i],describe(t){const e={name:"Google Search"},n=y.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){const e=!t.test(/like android/i),n=t.test(/android/i);return e&&n},describe(t){const e={name:"Android Browser"},n=y.getFirstMatch(Y,t);return n&&(e.version=n),e}},{test:[/playstation 4/i],describe(t){const e={name:"PlayStation 4"},n=y.getFirstMatch(Y,t);return n&&(e.version=n),e}},{test:[/safari|applewebkit/i],describe(t){const e={name:"Safari"},n=y.getFirstMatch(Y,t);return n&&(e.version=n),e}},{test:[/.*/i],describe(t){const e=t.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:y.getFirstMatch(e,t),version:y.getSecondMatch(e,t)}}}];var Fa=[{test:[/Roku\/DVP/],describe(t){const e=y.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,t);return{name:ne.Roku,version:e}}},{test:[/windows phone/i],describe(t){const e=y.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,t);return{name:ne.WindowsPhone,version:e}}},{test:[/windows /i],describe(t){const e=y.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,t),n=y.getWindowsVersionName(e);return{name:ne.Windows,version:e,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(t){const e={name:ne.iOS},n=y.getSecondMatch(/(Version\/)(\d[\d.]+)/,t);return n&&(e.version=n),e}},{test:[/macintosh/i],describe(t){const e=y.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,t).replace(/[_\s]/g,"."),n=y.getMacOSVersionName(e),r={name:ne.MacOS,version:e};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe(t){const e=y.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,t).replace(/[_\s]/g,".");return{name:ne.iOS,version:e}}},{test(t){const e=!t.test(/like android/i),n=t.test(/android/i);return e&&n},describe(t){const e=y.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,t),n=y.getAndroidVersionName(e),r={name:ne.Android,version:e};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe(t){const e=y.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,t),n={name:ne.WebOS};return e&&e.length&&(n.version=e),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e=y.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,t)||y.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,t)||y.getFirstMatch(/\bbb(\d+)/i,t);return{name:ne.BlackBerry,version:e}}},{test:[/bada/i],describe(t){const e=y.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,t);return{name:ne.Bada,version:e}}},{test:[/tizen/i],describe(t){const e=y.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,t);return{name:ne.Tizen,version:e}}},{test:[/linux/i],describe:()=>({name:ne.Linux})},{test:[/CrOS/],describe:()=>({name:ne.ChromeOS})},{test:[/PlayStation 4/],describe(t){const e=y.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,t);return{name:ne.PlayStation4,version:e}}}],Ua=[{test:[/googlebot/i],describe:()=>({type:"bot",vendor:"Google"})},{test:[/huawei/i],describe(t){const e=y.getFirstMatch(/(can-l01)/i,t)&&"Nova",n={type:H.mobile,vendor:"Huawei"};return e&&(n.model=e),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:()=>({type:H.tablet,vendor:"Nexus"})},{test:[/ipad/i],describe:()=>({type:H.tablet,vendor:"Apple",model:"iPad"})},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:()=>({type:H.tablet,vendor:"Apple",model:"iPad"})},{test:[/kftt build/i],describe:()=>({type:H.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"})},{test:[/silk/i],describe:()=>({type:H.tablet,vendor:"Amazon"})},{test:[/tablet(?! pc)/i],describe:()=>({type:H.tablet})},{test(t){const e=t.test(/ipod|iphone/i),n=t.test(/like (ipod|iphone)/i);return e&&!n},describe(t){const e=y.getFirstMatch(/(ipod|iphone)/i,t);return{type:H.mobile,vendor:"Apple",model:e}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:()=>({type:H.mobile,vendor:"Nexus"})},{test:[/[^-]mobi/i],describe:()=>({type:H.mobile})},{test:t=>t.getBrowserName(!0)==="blackberry",describe:()=>({type:H.mobile,vendor:"BlackBerry"})},{test:t=>t.getBrowserName(!0)==="bada",describe:()=>({type:H.mobile})},{test:t=>t.getBrowserName()==="windows phone",describe:()=>({type:H.mobile,vendor:"Microsoft"})},{test(t){const e=Number(String(t.getOSVersion()).split(".")[0]);return t.getOSName(!0)==="android"&&e>=3},describe:()=>({type:H.tablet})},{test:t=>t.getOSName(!0)==="android",describe:()=>({type:H.mobile})},{test:t=>t.getOSName(!0)==="macos",describe:()=>({type:H.desktop,vendor:"Apple"})},{test:t=>t.getOSName(!0)==="windows",describe:()=>({type:H.desktop})},{test:t=>t.getOSName(!0)==="linux",describe:()=>({type:H.desktop})},{test:t=>t.getOSName(!0)==="playstation 4",describe:()=>({type:H.tv})},{test:t=>t.getOSName(!0)==="roku",describe:()=>({type:H.tv})}],Ba=[{test:t=>t.getBrowserName(!0)==="microsoft edge",describe(t){if(/\sedg\//i.test(t))return{name:Oe.Blink};const e=y.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,t);return{name:Oe.EdgeHTML,version:e}}},{test:[/trident/i],describe(t){const e={name:Oe.Trident},n=y.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:t=>t.test(/presto/i),describe(t){const e={name:Oe.Presto},n=y.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){const e=t.test(/gecko/i),n=t.test(/like gecko/i);return e&&!n},describe(t){const e={name:Oe.Gecko},n=y.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/(apple)?webkit\/537\.36/i],describe:()=>({name:Oe.Blink})},{test:[/(apple)?webkit/i],describe(t){const e={name:Oe.WebKit},n=y.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}}];class Lr{constructor(e,n=!1){if(e==null||e==="")throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},n!==!0&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=y.find(xa,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const e=y.find(Fa,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){const{name:n}=this.getOS();return e?String(n).toLowerCase()||"":n||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){const{type:n}=this.getPlatform();return e?String(n).toLowerCase()||"":n||""}parsePlatform(){this.parsedResult.platform={};const e=y.find(Ua,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const e=y.find(Ba,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return y.assign({},this.parsedResult)}satisfies(e){const n={};let r=0;const i={};let a=0;if(Object.keys(e).forEach(c=>{const l=e[c];typeof l=="string"?(i[c]=l,a+=1):typeof l=="object"&&(n[c]=l,r+=1)}),r>0){const c=Object.keys(n),l=y.find(c,m=>this.isOS(m));if(l){const m=this.satisfies(n[l]);if(m!==void 0)return m}const u=y.find(c,m=>this.isPlatform(m));if(u){const m=this.satisfies(n[u]);if(m!==void 0)return m}}if(a>0){const c=Object.keys(i),l=y.find(c,u=>this.isBrowser(u,!0));if(l!==void 0)return this.compareVersion(i[l])}}isBrowser(e,n=!1){const r=this.getBrowserName().toLowerCase();let i=e.toLowerCase();const a=y.getBrowserTypeByAlias(i);return n&&a&&(i=a.toLowerCase()),i===r}compareVersion(e){let n=[0],r=e,i=!1;const a=this.getBrowserVersion();if(typeof a=="string")return e[0]===">"||e[0]==="<"?(r=e.substr(1),e[1]==="="?(i=!0,r=e.substr(2)):n=[],e[0]===">"?n.push(1):n.push(-1)):e[0]==="="?r=e.substr(1):e[0]==="~"&&(i=!0,r=e.substr(1)),n.indexOf(y.compareVersions(a,r,i))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e,n=!1){return this.isBrowser(e,n)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some(n=>this.is(n))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class Va{static getParser(e,n=!1){if(typeof e!="string")throw new Error("UserAgent should be a string");return new Lr(e,n)}static parse(e){return new Lr(e).getResult()}static get BROWSER_MAP(){return Hi}static get ENGINE_MAP(){return Oe}static get OS_MAP(){return ne}static get PLATFORMS_MAP(){return H}}function cn(){return Date.now()+Math.random().toString()}function dt(){throw new Error("Method must be implemented in subclass")}function Ki(t,e){return e!=null&&e.proxyUrl?e.proxyUrl+(e.proxyUrl.slice(-1)==="/"?"":"/")+t.substring(8):t}function Kt(t){return t!=null&&t.callObjectBundleUrlOverride?t.callObjectBundleUrlOverride:Ki("https://c.daily.co/call-machine/versioned/".concat("0.66.0","/static/call-machine-object-bundle.js"),t)}function St(t){try{new URL(t)}catch{return!1}return!0}const Qi=Object.prototype.toString;function Xi(t){switch(Qi.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return We(t,Error)}}function lt(t,e){return Qi.call(t)===`[object ${e}]`}function Zn(t){return lt(t,"ErrorEvent")}function Pr(t){return lt(t,"DOMError")}function Je(t){return lt(t,"String")}function Zi(t){return t===null||typeof t!="object"&&typeof t!="function"}function at(t){return lt(t,"Object")}function Qt(t){return typeof Event<"u"&&We(t,Event)}function er(t){return!!(t&&t.then&&typeof t.then=="function")}function We(t,e){try{return t instanceof e}catch{return!1}}function et(t,e=0){return typeof t!="string"||e===0||t.length<=e?t:`${t.slice(0,e)}...`}function Dr(t,e){if(!Array.isArray(t))return"";const n=[];for(let r=0;r<t.length;r++){const i=t[r];try{n.push(String(i))}catch{n.push("[value cannot be serialized]")}}return n.join(e)}function Ya(t,e,n=!1){return!!Je(t)&&(lt(e,"RegExp")?e.test(t):!!Je(e)&&(n?t===e:t.includes(e)))}function Lt(t,e=[],n=!1){return e.some(r=>Ya(t,r,n))}function Ga(t,e,n=250,r,i,a,c){if(!(a.exception&&a.exception.values&&c&&We(c.originalException,Error)))return;const l=a.exception.values.length>0?a.exception.values[a.exception.values.length-1]:void 0;var u,m;l&&(a.exception.values=(u=Tn(t,e,i,c.originalException,r,a.exception.values,l,0),m=n,u.map(h=>(h.value&&(h.value=et(h.value,m)),h))))}function Tn(t,e,n,r,i,a,c,l){if(a.length>=n+1)return a;let u=[...a];if(We(r[i],Error)){Ir(c,l);const m=t(e,r[i]),h=u.length;Nr(m,i,h,l),u=Tn(t,e,n,r[i],i,[m,...u],m,h)}return Array.isArray(r.errors)&&r.errors.forEach((m,h)=>{if(We(m,Error)){Ir(c,l);const p=t(e,m),v=u.length;Nr(p,`errors[${h}]`,v,l),u=Tn(t,e,n,m,i,[p,...u],p,v)}}),u}function Ir(t,e){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,is_exception_group:!0,exception_id:e}}function Nr(t,e,n,r){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,type:"chained",source:e,exception_id:n,parent_id:r}}function Pt(t){return t&&t.Math==Math?t:void 0}const ue=typeof globalThis=="object"&&Pt(globalThis)||typeof window=="object"&&Pt(window)||typeof self=="object"&&Pt(self)||typeof global=="object"&&Pt(global)||function(){return this}()||{};function Mt(){return ue}function tr(t,e,n){const r=n||ue,i=r.__SENTRY__=r.__SENTRY__||{};return i[t]||(i[t]=e())}const qa=Mt(),$a=80;function Cn(t,e={}){try{let n=t;const r=5,i=[];let a=0,c=0;const l=" > ",u=l.length;let m;const h=Array.isArray(e)?e:e.keyAttrs,p=!Array.isArray(e)&&e.maxStringLength||$a;for(;n&&a++<r&&(m=Ja(n,h),!(m==="html"||a>1&&c+i.length*u+m.length>=p));)i.push(m),c+=m.length,n=n.parentNode;return i.reverse().join(l)}catch{return"<unknown>"}}function Ja(t,e){const n=t,r=[];let i,a,c,l,u;if(!n||!n.tagName)return"";r.push(n.tagName.toLowerCase());const m=e&&e.length?e.filter(p=>n.getAttribute(p)).map(p=>[p,n.getAttribute(p)]):null;if(m&&m.length)m.forEach(p=>{r.push(`[${p[0]}="${p[1]}"]`)});else if(n.id&&r.push(`#${n.id}`),i=n.className,i&&Je(i))for(a=i.split(/\s+/),u=0;u<a.length;u++)r.push(`.${a[u]}`);const h=["aria-label","type","name","title","alt"];for(u=0;u<h.length;u++)c=h[u],l=n.getAttribute(c),l&&r.push(`[${c}="${l}"]`);return r.join("")}const Xt=["debug","info","warn","error","log","assert","trace"];function es(t){if(!("console"in ue))return t();const e=ue.console,n={};Xt.forEach(r=>{const i=e[r]&&e[r].__sentry_original__;r in e&&i&&(n[r]=e[r],e[r]=i)});try{return t()}finally{Object.keys(n).forEach(r=>{e[r]=n[r]})}}function Rr(){let t=!1;const e={enable:()=>{t=!0},disable:()=>{t=!1}};return typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?Xt.forEach(n=>{e[n]=(...r)=>{t&&es(()=>{ue.console[n](`Sentry Logger [${n}]:`,...r)})}}):Xt.forEach(n=>{e[n]=()=>{}}),e}let R;R=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?tr("logger",Rr):Rr();const Wa=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Zt(t,e=!1){const{host:n,path:r,pass:i,port:a,projectId:c,protocol:l,publicKey:u}=t;return`${l}://${u}${e&&i?`:${i}`:""}@${n}${a?`:${a}`:""}/${r&&`${r}/`}${c}`}function jr(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function za(t){const e=typeof t=="string"?function(n){const r=Wa.exec(n);if(!r)return void console.error(`Invalid Sentry Dsn: ${n}`);const[i,a,c="",l,u="",m]=r.slice(1);let h="",p=m;const v=p.split("/");if(v.length>1&&(h=v.slice(0,-1).join("/"),p=v.pop()),p){const k=p.match(/^\d+/);k&&(p=k[0])}return jr({host:l,pass:c,path:h,projectId:p,port:u,protocol:i,publicKey:a})}(t):jr(t);if(e&&function(n){if(typeof __SENTRY_DEBUG__<"u"&&!__SENTRY_DEBUG__)return!0;const{port:r,projectId:i,protocol:a}=n;return!(["protocol","publicKey","host","projectId"].find(c=>!n[c]&&(R.error(`Invalid Sentry Dsn: ${c} missing`),!0))||(i.match(/^\d+$/)?function(c){return c==="http"||c==="https"}(a)?r&&isNaN(parseInt(r,10))&&(R.error(`Invalid Sentry Dsn: Invalid port ${r}`),1):(R.error(`Invalid Sentry Dsn: Invalid protocol ${a}`),1):(R.error(`Invalid Sentry Dsn: Invalid projectId ${i}`),1)))}(e))return e}class he extends Error{constructor(e,n="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=n}}function X(t,e,n){if(!(e in t))return;const r=t[e],i=n(r);if(typeof i=="function")try{ts(i,r)}catch{}t[e]=i}function nr(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}function ts(t,e){const n=e.prototype||{};t.prototype=e.prototype=n,nr(t,"__sentry_original__",e)}function rr(t){return t.__sentry_original__}function ns(t){if(Xi(t))return{message:t.message,name:t.name,stack:t.stack,...Fr(t)};if(Qt(t)){const e={type:t.type,target:xr(t.target),currentTarget:xr(t.currentTarget),...Fr(t)};return typeof CustomEvent<"u"&&We(t,CustomEvent)&&(e.detail=t.detail),e}return t}function xr(t){try{return e=t,typeof Element<"u"&&We(e,Element)?Cn(t):Object.prototype.toString.call(t)}catch{return"<unknown>"}var e}function Fr(t){if(typeof t=="object"&&t!==null){const e={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}return{}}function ln(t){return Mn(t,new Map)}function Mn(t,e){if(at(t)){const n=e.get(t);if(n!==void 0)return n;const r={};e.set(t,r);for(const i of Object.keys(t))t[i]!==void 0&&(r[i]=Mn(t[i],e));return r}if(Array.isArray(t)){const n=e.get(t);if(n!==void 0)return n;const r=[];return e.set(t,r),t.forEach(i=>{r.push(Mn(i,e))}),r}return t}const Ur="<anonymous>";function Re(t){try{return t&&typeof t=="function"&&t.name||Ur}catch{return Ur}}const pn=Mt();function An(t){return t&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function Ha(){if(!function(){if(!("fetch"in pn))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}())return!1;if(An(pn.fetch))return!0;let t=!1;const e=pn.document;if(e&&typeof e.createElement=="function")try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(t=An(n.contentWindow.fetch)),e.head.removeChild(n)}catch(n){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&R.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return t}const Dt=Mt(),$=Mt(),gt="__sentry_xhr_v2__",_t={},Br={};function Ka(t){if(!Br[t])switch(Br[t]=!0,t){case"console":(function(){"console"in $&&Xt.forEach(function(e){e in $.console&&X($.console,e,function(n){return function(...r){de("console",{args:r,level:e}),n&&n.apply($.console,r)}})})})();break;case"dom":(function(){if(!("document"in $))return;const e=de.bind(null,"dom"),n=Yr(e,!0);$.document.addEventListener("click",n,!1),$.document.addEventListener("keypress",n,!1),["EventTarget","Node"].forEach(r=>{const i=$[r]&&$[r].prototype;i&&i.hasOwnProperty&&i.hasOwnProperty("addEventListener")&&(X(i,"addEventListener",function(a){return function(c,l,u){if(c==="click"||c=="keypress")try{const m=this,h=m.__sentry_instrumentation_handlers__=m.__sentry_instrumentation_handlers__||{},p=h[c]=h[c]||{refCount:0};if(!p.handler){const v=Yr(e);p.handler=v,a.call(this,c,v,u)}p.refCount++}catch{}return a.call(this,c,l,u)}}),X(i,"removeEventListener",function(a){return function(c,l,u){if(c==="click"||c=="keypress")try{const m=this,h=m.__sentry_instrumentation_handlers__||{},p=h[c];p&&(p.refCount--,p.refCount<=0&&(a.call(this,c,p.handler,u),p.handler=void 0,delete h[c]),Object.keys(h).length===0&&delete m.__sentry_instrumentation_handlers__)}catch{}return a.call(this,c,l,u)}}))})})();break;case"xhr":(function(){if(!("XMLHttpRequest"in $))return;const e=XMLHttpRequest.prototype;X(e,"open",function(n){return function(...r){const i=r[1],a=this[gt]={method:Je(r[0])?r[0].toUpperCase():r[0],url:r[1],request_headers:{}};Je(i)&&a.method==="POST"&&i.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const c=()=>{const l=this[gt];if(l&&this.readyState===4){try{l.status_code=this.status}catch{}de("xhr",{args:r,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:this})}};return"onreadystatechange"in this&&typeof this.onreadystatechange=="function"?X(this,"onreadystatechange",function(l){return function(...u){return c(),l.apply(this,u)}}):this.addEventListener("readystatechange",c),X(this,"setRequestHeader",function(l){return function(...u){const[m,h]=u,p=this[gt];return p&&(p.request_headers[m.toLowerCase()]=h),l.apply(this,u)}}),n.apply(this,r)}}),X(e,"send",function(n){return function(...r){const i=this[gt];return i&&r[0]!==void 0&&(i.body=r[0]),de("xhr",{args:r,startTimestamp:Date.now(),xhr:this}),n.apply(this,r)}})})();break;case"fetch":(function(){Ha()&&X($,"fetch",function(e){return function(...n){const{method:r,url:i}=function(c){if(c.length===0)return{method:"GET",url:""};if(c.length===2){const[u,m]=c;return{url:Vr(u),method:On(m,"method")?String(m.method).toUpperCase():"GET"}}const l=c[0];return{url:Vr(l),method:On(l,"method")?String(l.method).toUpperCase():"GET"}}(n),a={args:n,fetchData:{method:r,url:i},startTimestamp:Date.now()};return de("fetch",{...a}),e.apply($,n).then(c=>(de("fetch",{...a,endTimestamp:Date.now(),response:c}),c),c=>{throw de("fetch",{...a,endTimestamp:Date.now(),error:c}),c})}})})();break;case"history":(function(){if(!function(){const r=Dt.chrome,i=r&&r.app&&r.app.runtime,a="history"in Dt&&!!Dt.history.pushState&&!!Dt.history.replaceState;return!i&&a}())return;const e=$.onpopstate;function n(r){return function(...i){const a=i.length>2?i[2]:void 0;if(a){const c=It,l=String(a);It=l,de("history",{from:c,to:l})}return r.apply(this,i)}}$.onpopstate=function(...r){const i=$.location.href,a=It;if(It=i,de("history",{from:a,to:i}),e)try{return e.apply(this,r)}catch{}},X($.history,"pushState",n),X($.history,"replaceState",n)})();break;case"error":Rt=$.onerror,$.onerror=function(e,n,r,i,a){return de("error",{column:i,error:a,line:r,msg:e,url:n}),!(!Rt||Rt.__SENTRY_LOADER__)&&Rt.apply(this,arguments)},$.onerror.__SENTRY_INSTRUMENTED__=!0;break;case"unhandledrejection":jt=$.onunhandledrejection,$.onunhandledrejection=function(e){return de("unhandledrejection",e),!(jt&&!jt.__SENTRY_LOADER__)||jt.apply(this,arguments)},$.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0;break;default:return void((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&R.warn("unknown instrumentation type:",t))}}function Ve(t,e){_t[t]=_t[t]||[],_t[t].push(e),Ka(t)}function de(t,e){if(t&&_t[t])for(const n of _t[t]||[])try{n(e)}catch(r){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&R.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${Re(n)}
Error:`,r)}}function On(t,e){return!!t&&typeof t=="object"&&!!t[e]}function Vr(t){return typeof t=="string"?t:t?On(t,"url")?t.url:t.toString?t.toString():"":""}let It;const Qa=1e3;let Nt,fn;function Yr(t,e=!1){return n=>{if(!n||fn===n||function(i){if(i.type!=="keypress")return!1;try{const a=i.target;if(!a||!a.tagName)return!0;if(a.tagName==="INPUT"||a.tagName==="TEXTAREA"||a.isContentEditable)return!1}catch{}return!0}(n))return;const r=n.type==="keypress"?"input":n.type;(Nt===void 0||function(i,a){if(!i||i.type!==a.type)return!0;try{if(i.target!==a.target)return!0}catch{}return!1}(fn,n))&&(t({event:n,name:r,global:e}),fn=n),clearTimeout(Nt),Nt=$.setTimeout(()=>{Nt=void 0},Qa)}}let Rt=null,jt=null;function Ie(){const t=ue,e=t.crypto||t.msCrypto;if(e&&e.randomUUID)return e.randomUUID().replace(/-/g,"");const n=e&&e.getRandomValues?()=>e.getRandomValues(new Uint8Array(1))[0]:()=>16*Math.random();return("10000000100040008000"+1e11).replace(/[018]/g,r=>(r^(15&n())>>r/4).toString(16))}function rs(t){return t.exception&&t.exception.values?t.exception.values[0]:void 0}function Pe(t){const{message:e,event_id:n}=t;if(e)return e;const r=rs(t);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function Ln(t,e,n){const r=t.exception=t.exception||{},i=r.values=r.values||[],a=i[0]=i[0]||{};a.value||(a.value=e||""),a.type||(a.type="Error")}function Et(t,e){const n=rs(t);if(!n)return;const r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...e},e&&"data"in e){const i={...r&&r.data,...e.data};n.mechanism.data=i}}function Gr(t){if(t&&t.__sentry_captured__)return!0;try{nr(t,"__sentry_captured__",!0)}catch{}return!1}function De(t,e=100,n=1/0){try{return Pn("",t,e,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function is(t,e=3,n=102400){const r=De(t,e);return i=r,function(a){return~-encodeURI(a).split(/%..|./).length}(JSON.stringify(i))>n?is(t,e-1,n):r;var i}function Pn(t,e,n=1/0,r=1/0,i=function(){const a=typeof WeakSet=="function",c=a?new WeakSet:[];return[function(l){if(a)return!!c.has(l)||(c.add(l),!1);for(let u=0;u<c.length;u++)if(c[u]===l)return!0;return c.push(l),!1},function(l){if(a)c.delete(l);else for(let u=0;u<c.length;u++)if(c[u]===l){c.splice(u,1);break}}]}()){const[a,c]=i;if(e==null||["number","boolean","string"].includes(typeof e)&&(typeof(l=e)!="number"||l==l))return e;var l;const u=function(S,w){try{if(S==="domain"&&w&&typeof w=="object"&&w._events)return"[Domain]";if(S==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&w===global)return"[Global]";if(typeof window<"u"&&w===window)return"[Window]";if(typeof document<"u"&&w===document)return"[Document]";if(function(I){return at(I)&&"nativeEvent"in I&&"preventDefault"in I&&"stopPropagation"in I}(w))return"[SyntheticEvent]";if(typeof w=="number"&&w!=w)return"[NaN]";if(typeof w=="function")return`[Function: ${Re(w)}]`;if(typeof w=="symbol")return`[${String(w)}]`;if(typeof w=="bigint")return`[BigInt: ${String(w)}]`;const T=function(I){const J=Object.getPrototypeOf(I);return J?J.constructor.name:"null prototype"}(w);return/^HTML(\w*)Element$/.test(T)?`[HTMLElement: ${T}]`:`[object ${T}]`}catch(T){return`**non-serializable** (${T})`}}(t,e);if(!u.startsWith("[object "))return u;if(e.__sentry_skip_normalization__)return e;const m=typeof e.__sentry_override_normalization_depth__=="number"?e.__sentry_override_normalization_depth__:n;if(m===0)return u.replace("object ","");if(a(e))return"[Circular ~]";const h=e;if(h&&typeof h.toJSON=="function")try{return Pn("",h.toJSON(),m-1,r,i)}catch{}const p=Array.isArray(e)?[]:{};let v=0;const k=ns(e);for(const S in k){if(!Object.prototype.hasOwnProperty.call(k,S))continue;if(v>=r){p[S]="[MaxProperties ~]";break}const w=k[S];p[S]=Pn(S,w,m-1,r,i),v++}return c(e),p}var Ce;function ze(t){return new ie(e=>{e(t)})}function en(t){return new ie((e,n)=>{n(t)})}(function(t){t[t.PENDING=0]="PENDING",t[t.RESOLVED=1]="RESOLVED",t[t.REJECTED=2]="REJECTED"})(Ce||(Ce={}));class ie{__init(){this._state=Ce.PENDING}__init2(){this._handlers=[]}constructor(e){ie.prototype.__init.call(this),ie.prototype.__init2.call(this),ie.prototype.__init3.call(this),ie.prototype.__init4.call(this),ie.prototype.__init5.call(this),ie.prototype.__init6.call(this);try{e(this._resolve,this._reject)}catch(n){this._reject(n)}}then(e,n){return new ie((r,i)=>{this._handlers.push([!1,a=>{if(e)try{r(e(a))}catch(c){i(c)}else r(a)},a=>{if(n)try{r(n(a))}catch(c){i(c)}else i(a)}]),this._executeHandlers()})}catch(e){return this.then(n=>n,e)}finally(e){return new ie((n,r)=>{let i,a;return this.then(c=>{a=!1,i=c,e&&e()},c=>{a=!0,i=c,e&&e()}).then(()=>{a?r(i):n(i)})})}__init3(){this._resolve=e=>{this._setResult(Ce.RESOLVED,e)}}__init4(){this._reject=e=>{this._setResult(Ce.REJECTED,e)}}__init5(){this._setResult=(e,n)=>{this._state===Ce.PENDING&&(er(n)?n.then(this._resolve,this._reject):(this._state=e,this._value=n,this._executeHandlers()))}}__init6(){this._executeHandlers=()=>{if(this._state===Ce.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach(n=>{n[0]||(this._state===Ce.RESOLVED&&n[1](this._value),this._state===Ce.REJECTED&&n[2](this._value),n[0]=!0)})}}}function Xa(t){const e=[];function n(r){return e.splice(e.indexOf(r),1)[0]}return{$:e,add:function(r){if(!(t===void 0||e.length<t))return en(new he("Not adding Promise because buffer limit was reached."));const i=r();return e.indexOf(i)===-1&&e.push(i),i.then(()=>n(i)).then(null,()=>n(i).then(null,()=>{})),i},drain:function(r){return new ie((i,a)=>{let c=e.length;if(!c)return i(!0);const l=setTimeout(()=>{r&&r>0&&i(!1)},r);e.forEach(u=>{ze(u).then(()=>{--c||(clearTimeout(l),i(!0))},a)})})}}}function mn(t){if(!t)return{};const e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const n=e[6]||"",r=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],search:n,hash:r,relative:e[5]+n+r}}const Za=["fatal","error","warning","log","info","debug"],ss=Mt(),Dn={nowSeconds:()=>Date.now()/1e3},gn=typeof __SENTRY_BROWSER_BUNDLE__<"u"&&__SENTRY_BROWSER_BUNDLE__||Object.prototype.toString.call(typeof process<"u"?process:0)!=="[object process]"?function(){const{performance:t}=ss;if(!(!t||!t.now))return{now:()=>t.now(),timeOrigin:Date.now()-t.now()}}():function(){try{return(t=module,e="perf_hooks",t.require(e)).performance}catch{return}var t,e}(),qr=gn===void 0?Dn:{nowSeconds:()=>(gn.timeOrigin+gn.now())/1e3},un=Dn.nowSeconds.bind(Dn),as=qr.nowSeconds.bind(qr);function wt(t,e=[]){return[t,e]}function eo(t,e){const[n,r]=t;return[n,[...r,e]]}function $r(t,e){const n=t[1];for(const r of n)if(e(r,r[0].type))return!0;return!1}function In(t,e){return(e||new TextEncoder).encode(t)}function to(t,e){const[n,r]=t;let i=JSON.stringify(n);function a(c){typeof i=="string"?i=typeof c=="string"?i+c:[In(i,e),c]:i.push(typeof c=="string"?In(c,e):c)}for(const c of r){const[l,u]=c;if(a(`
${JSON.stringify(l)}
`),typeof u=="string"||u instanceof Uint8Array)a(u);else{let m;try{m=JSON.stringify(u)}catch{m=JSON.stringify(De(u))}a(m)}}return typeof i=="string"?i:function(c){const l=c.reduce((h,p)=>h+p.length,0),u=new Uint8Array(l);let m=0;for(const h of c)u.set(h,m),m+=h.length;return u}(i)}function no(t,e){const n=typeof t.data=="string"?In(t.data,e):t.data;return[ln({type:"attachment",length:n.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType}),n]}(()=>{const{performance:t}=ss;if(!t||!t.now)return;const e=36e5,n=t.now(),r=Date.now(),i=t.timeOrigin?Math.abs(t.timeOrigin+n-r):e,a=i<e,c=t.timing&&t.timing.navigationStart,l=typeof c=="number"?Math.abs(c+n-r):e;(a||l<e)&&i<=l&&t.timeOrigin})();const ro={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor"};function Jr(t){return ro[t]}function os(t){if(!t||!t.sdk)return;const{name:e,version:n}=t.sdk;return{name:e,version:n}}const io=6e4;function so(t,{statusCode:e,headers:n},r=Date.now()){const i={...t},a=n&&n["x-sentry-rate-limits"],c=n&&n["retry-after"];if(a)for(const l of a.trim().split(",")){const[u,m]=l.split(":",2),h=parseInt(u,10),p=1e3*(isNaN(h)?60:h);if(m)for(const v of m.split(";"))i[v]=r+p;else i.all=r+p}else c?i.all=r+function(l,u=Date.now()){const m=parseInt(`${l}`,10);if(!isNaN(m))return 1e3*m;const h=Date.parse(`${l}`);return isNaN(h)?io:h-u}(c,r):e===429&&(i.all=r+6e4);return i}const ir="production";function ao(t){const e=as(),n={sid:Ie(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(r){return ln({sid:`${r.sid}`,init:r.init,started:new Date(1e3*r.started).toISOString(),timestamp:new Date(1e3*r.timestamp).toISOString(),status:r.status,errors:r.errors,did:typeof r.did=="number"||typeof r.did=="string"?`${r.did}`:void 0,duration:r.duration,attrs:{release:r.release,environment:r.environment,ip_address:r.ipAddress,user_agent:r.userAgent}})}(n)};return t&&ot(n,t),n}function ot(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),t.did||e.did||(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||as(),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:Ie()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{const n=t.timestamp-t.started;t.duration=n>=0?n:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}class qe{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=Wr()}static clone(e){const n=new qe;return e&&(n._breadcrumbs=[...e._breadcrumbs],n._tags={...e._tags},n._extra={...e._extra},n._contexts={...e._contexts},n._user=e._user,n._level=e._level,n._span=e._span,n._session=e._session,n._transactionName=e._transactionName,n._fingerprint=e._fingerprint,n._eventProcessors=[...e._eventProcessors],n._requestSession=e._requestSession,n._attachments=[...e._attachments],n._sdkProcessingMetadata={...e._sdkProcessingMetadata},n._propagationContext={...e._propagationContext}),n}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{},this._session&&ot(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,n){return this._tags={...this._tags,[e]:n},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,n){return this._extra={...this._extra,[e]:n},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,n){return n===null?delete this._contexts[e]:this._contexts[e]=n,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this.getSpan();return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;if(typeof e=="function"){const n=e(this);return n instanceof qe?n:this}return e instanceof qe?(this._tags={...this._tags,...e._tags},this._extra={...this._extra,...e._extra},this._contexts={...this._contexts,...e._contexts},e._user&&Object.keys(e._user).length&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint),e._requestSession&&(this._requestSession=e._requestSession),e._propagationContext&&(this._propagationContext=e._propagationContext)):at(e)&&(this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession),e.propagationContext&&(this._propagationContext=e.propagationContext)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=Wr(),this}addBreadcrumb(e,n){const r=typeof n=="number"?n:100;if(r<=0)return this;const i={timestamp:un(),...e};return this._breadcrumbs=[...this._breadcrumbs,i].slice(-r),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this._attachments}clearAttachments(){return this._attachments=[],this}applyToEvent(e,n={}){if(this._extra&&Object.keys(this._extra).length&&(e.extra={...this._extra,...e.extra}),this._tags&&Object.keys(this._tags).length&&(e.tags={...this._tags,...e.tags}),this._user&&Object.keys(this._user).length&&(e.user={...this._user,...e.user}),this._contexts&&Object.keys(this._contexts).length&&(e.contexts={...this._contexts,...e.contexts}),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts={trace:this._span.getTraceContext(),...e.contexts};const r=this._span.transaction;if(r){e.sdkProcessingMetadata={dynamicSamplingContext:r.getDynamicSamplingContext(),...e.sdkProcessingMetadata};const i=r.name;i&&(e.tags={transaction:i,...e.tags})}}return this._applyFingerprint(e),e.breadcrumbs=[...e.breadcrumbs||[],...this._breadcrumbs],e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:void 0,e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...this._sdkProcessingMetadata,propagationContext:this._propagationContext},this._notifyEventProcessors([...cs(),...this._eventProcessors],e,n)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}_notifyEventProcessors(e,n,r,i=0){return new ie((a,c)=>{const l=e[i];if(n===null||typeof l!="function")a(n);else{const u=l({...n},r);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&l.id&&u===null&&R.log(`Event processor "${l.id}" dropped event`),er(u)?u.then(m=>this._notifyEventProcessors(e,m,r,i+1).then(a)).then(null,c):this._notifyEventProcessors(e,u,r,i+1).then(a).then(null,c)}})}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}_applyFingerprint(e){var n;e.fingerprint=e.fingerprint?(n=e.fingerprint,Array.isArray(n)?n:[n]):[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}}function cs(){return tr("globalEventProcessors",()=>[])}function ls(t){cs().push(t)}function Wr(){return{traceId:Ie(),spanId:Ie().substring(16),sampled:!1}}const us=4,oo=100;class sr{constructor(e,n=new qe,r=us){this._version=r,this._stack=[{scope:n}],e&&this.bindClient(e)}isOlderThan(e){return this._version<e}bindClient(e){this.getStackTop().client=e,e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=qe.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return!(this.getStack().length<=1)&&!!this.getStack().pop()}withScope(e){const n=this.pushScope();try{e(n)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,n){const r=this._lastEventId=n&&n.event_id?n.event_id:Ie(),i=new Error("Sentry syntheticException");return this._withClient((a,c)=>{a.captureException(e,{originalException:e,syntheticException:i,...n,event_id:r},c)}),r}captureMessage(e,n,r){const i=this._lastEventId=r&&r.event_id?r.event_id:Ie(),a=new Error(e);return this._withClient((c,l)=>{c.captureMessage(e,n,{originalException:e,syntheticException:a,...r,event_id:i},l)}),i}captureEvent(e,n){const r=n&&n.event_id?n.event_id:Ie();return e.type||(this._lastEventId=r),this._withClient((i,a)=>{i.captureEvent(e,{...n,event_id:r},a)}),r}lastEventId(){return this._lastEventId}addBreadcrumb(e,n){const{scope:r,client:i}=this.getStackTop();if(!i)return;const{beforeBreadcrumb:a=null,maxBreadcrumbs:c=oo}=i.getOptions&&i.getOptions()||{};if(c<=0)return;const l={timestamp:un(),...e},u=a?es(()=>a(l,n)):l;u!==null&&(i.emit&&i.emit("beforeAddBreadcrumb",u,n),r.addBreadcrumb(u,c))}setUser(e){this.getScope().setUser(e)}setTags(e){this.getScope().setTags(e)}setExtras(e){this.getScope().setExtras(e)}setTag(e,n){this.getScope().setTag(e,n)}setExtra(e,n){this.getScope().setExtra(e,n)}setContext(e,n){this.getScope().setContext(e,n)}configureScope(e){const{scope:n,client:r}=this.getStackTop();r&&e(n)}run(e){const n=zr(this);try{e(this)}finally{zr(n)}}getIntegration(e){const n=this.getClient();if(!n)return null;try{return n.getIntegration(e)}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&R.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,n){const r=this._callExtensionMethod("startTransaction",e,n);return typeof __SENTRY_DEBUG__<"u"&&!__SENTRY_DEBUG__||r||console.warn(`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`),r}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const e=this.getStackTop().scope,n=e.getSession();n&&function(r,i){let a={};r.status==="ok"&&(a={status:"exited"}),ot(r,a)}(n),this._sendSessionUpdate(),e.setSession()}startSession(e){const{scope:n,client:r}=this.getStackTop(),{release:i,environment:a=ir}=r&&r.getOptions()||{},{userAgent:c}=ue.navigator||{},l=ao({release:i,environment:a,user:n.getUser(),...c&&{userAgent:c},...e}),u=n.getSession&&n.getSession();return u&&u.status==="ok"&&ot(u,{status:"exited"}),this.endSession(),n.setSession(l),l}shouldSendDefaultPii(){const e=this.getClient(),n=e&&e.getOptions();return!!(n&&n.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:n}=this.getStackTop(),r=e.getSession();r&&n&&n.captureSession&&n.captureSession(r)}_withClient(e){const{scope:n,client:r}=this.getStackTop();r&&e(r,n)}_callExtensionMethod(e,...n){const r=tn().__SENTRY__;if(r&&r.extensions&&typeof r.extensions[e]=="function")return r.extensions[e].apply(this,n);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&R.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function tn(){return ue.__SENTRY__=ue.__SENTRY__||{extensions:{},hub:void 0},ue}function zr(t){const e=tn(),n=Nn(e);return ds(e,t),n}function oe(){const t=tn();if(t.__SENTRY__&&t.__SENTRY__.acs){const e=t.__SENTRY__.acs.getCurrentHub();if(e)return e}return function(e=tn()){n=e,n&&n.__SENTRY__&&n.__SENTRY__.hub&&!Nn(e).isOlderThan(us)||ds(e,new sr);var n;return Nn(e)}(t)}function Nn(t){return tr("hub",()=>new sr,t)}function ds(t,e){return t?((t.__SENTRY__=t.__SENTRY__||{}).hub=e,!0):!1}const co="7";function lo(t,e){return n={sentry_key:t.publicKey,sentry_version:co,...e&&{sentry_client:`${e.name}/${e.version}`}},Object.keys(n).map(r=>`${encodeURIComponent(r)}=${encodeURIComponent(n[r])}`).join("&");var n}function uo(t,e,n,r){const i=os(n),a=t.type&&t.type!=="replay_event"?t.type:"event";(function(l,u){u&&(l.sdk=l.sdk||{},l.sdk.name=l.sdk.name||u.name,l.sdk.version=l.sdk.version||u.version,l.sdk.integrations=[...l.sdk.integrations||[],...u.integrations||[]],l.sdk.packages=[...l.sdk.packages||[],...u.packages||[]])})(t,n&&n.sdk);const c=function(l,u,m,h){const p=l.sdkProcessingMetadata&&l.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:l.event_id,sent_at:new Date().toISOString(),...u&&{sdk:u},...!!m&&{dsn:Zt(h)},...p&&{trace:ln({...p})}}}(t,i,r,e);return delete t.sdkProcessingMetadata,wt(c,[[{type:a},t]])}const Hr=[];function Kr(t,e){e[t.name]=t,Hr.indexOf(t.name)===-1&&(t.setupOnce(ls,oe),Hr.push(t.name),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&R.log(`Integration installed: ${t.name}`))}function ho(t,e,n,r){const{normalizeDepth:i=3,normalizeMaxBreadth:a=1e3}=t,c={...e,event_id:e.event_id||n.event_id||Ie(),timestamp:e.timestamp||un()},l=n.integrations||t.integrations.map(h=>h.name);(function(h,p){const{environment:v,release:k,dist:S,maxValueLength:w=250}=p;"environment"in h||(h.environment="environment"in p?v:ir),h.release===void 0&&k!==void 0&&(h.release=k),h.dist===void 0&&S!==void 0&&(h.dist=S),h.message&&(h.message=et(h.message,w));const T=h.exception&&h.exception.values&&h.exception.values[0];T&&T.value&&(T.value=et(T.value,w));const I=h.request;I&&I.url&&(I.url=et(I.url,w))})(c,t),function(h,p){p.length>0&&(h.sdk=h.sdk||{},h.sdk.integrations=[...h.sdk.integrations||[],...p])}(c,l),e.type===void 0&&function(h,p){const v=ue._sentryDebugIds;if(!v)return;let k;const S=Qr.get(p);S?k=S:(k=new Map,Qr.set(p,k));const w=Object.keys(v).reduce((T,I)=>{let J;const z=k.get(I);z?J=z:(J=p(I),k.set(I,J));for(let E=J.length-1;E>=0;E--){const b=J[E];if(b.filename){T[b.filename]=v[I];break}}return T},{});try{h.exception.values.forEach(T=>{T.stacktrace.frames.forEach(I=>{I.filename&&(I.debug_id=w[I.filename])})})}catch{}}(c,t.stackParser);let u=r;n.captureContext&&(u=qe.clone(u).update(n.captureContext));let m=ze(c);if(u){if(u.getAttachments){const h=[...n.attachments||[],...u.getAttachments()];h.length&&(n.attachments=h)}m=u.applyToEvent(c,n)}return m.then(h=>(h&&function(p){const v={};try{p.exception.values.forEach(S=>{S.stacktrace.frames.forEach(w=>{w.debug_id&&(w.abs_path?v[w.abs_path]=w.debug_id:w.filename&&(v[w.filename]=w.debug_id),delete w.debug_id)})})}catch{}if(Object.keys(v).length===0)return;p.debug_meta=p.debug_meta||{},p.debug_meta.images=p.debug_meta.images||[];const k=p.debug_meta.images;Object.keys(v).forEach(S=>{k.push({type:"sourcemap",code_file:S,debug_id:v[S]})})}(h),typeof i=="number"&&i>0?function(p,v,k){if(!p)return null;const S={...p,...p.breadcrumbs&&{breadcrumbs:p.breadcrumbs.map(w=>({...w,...w.data&&{data:De(w.data,v,k)}}))},...p.user&&{user:De(p.user,v,k)},...p.contexts&&{contexts:De(p.contexts,v,k)},...p.extra&&{extra:De(p.extra,v,k)}};return p.contexts&&p.contexts.trace&&S.contexts&&(S.contexts.trace=p.contexts.trace,p.contexts.trace.data&&(S.contexts.trace.data=De(p.contexts.trace.data,v,k))),p.spans&&(S.spans=p.spans.map(w=>(w.data&&(w.data=De(w.data,v,k)),w))),S}(h,i,a):h))}const Qr=new WeakMap,Xr="Not capturing exception because it's already been captured.";class Ye{__init(){this._integrations={}}__init2(){this._integrationsInitialized=!1}__init3(){this._numProcessing=0}__init4(){this._outcomes={}}__init5(){this._hooks={}}constructor(e){if(Ye.prototype.__init.call(this),Ye.prototype.__init2.call(this),Ye.prototype.__init3.call(this),Ye.prototype.__init4.call(this),Ye.prototype.__init5.call(this),this._options=e,e.dsn?this._dsn=za(e.dsn):(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&R.warn("No DSN provided, client will not do anything."),this._dsn){const n=function(r,i={}){const a=typeof i=="string"?i:i.tunnel,c=typeof i!="string"&&i._metadata?i._metadata.sdk:void 0;return a||`${function(l){return`${function(u){const m=u.protocol?`${u.protocol}:`:"",h=u.port?`:${u.port}`:"";return`${m}//${u.host}${h}${u.path?`/${u.path}`:""}/api/`}(l)}${l.projectId}/envelope/`}(r)}?${lo(r,c)}`}(this._dsn,e);this._transport=e.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:n})}}captureException(e,n,r){if(Gr(e))return void((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&R.log(Xr));let i=n&&n.event_id;return this._process(this.eventFromException(e,n).then(a=>this._captureEvent(a,n,r)).then(a=>{i=a})),i}captureMessage(e,n,r,i){let a=r&&r.event_id;const c=Zi(e)?this.eventFromMessage(String(e),n,r):this.eventFromException(e,r);return this._process(c.then(l=>this._captureEvent(l,r,i)).then(l=>{a=l})),a}captureEvent(e,n,r){if(n&&n.originalException&&Gr(n.originalException))return void((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&R.log(Xr));let i=n&&n.event_id;return this._process(this._captureEvent(e,n,r).then(a=>{i=a})),i}captureSession(e){this._isEnabled()?typeof e.release!="string"?(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&R.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),ot(e,{init:!1})):(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&R.warn("SDK not enabled, will not capture session.")}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const n=this._transport;return n?this._isClientDoneProcessing(e).then(r=>n.flush(e).then(i=>r&&i)):ze(!0)}close(e){return this.flush(e).then(n=>(this.getOptions().enabled=!1,n))}setupIntegrations(){this._isEnabled()&&!this._integrationsInitialized&&(this._integrations=function(e){const n={};return e.forEach(r=>{r&&Kr(r,n)}),n}(this._options.integrations),this._integrationsInitialized=!0)}getIntegrationById(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&R.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}addIntegration(e){Kr(e,this._integrations)}sendEvent(e,n={}){if(this._dsn){let r=uo(e,this._dsn,this._options._metadata,this._options.tunnel);for(const a of n.attachments||[])r=eo(r,no(a,this._options.transportOptions&&this._options.transportOptions.textEncoder));const i=this._sendEnvelope(r);i&&i.then(a=>this.emit("afterSendEvent",e,a),null)}}sendSession(e){if(this._dsn){const n=function(r,i,a,c){const l=os(a);return wt({sent_at:new Date().toISOString(),...l&&{sdk:l},...!!c&&{dsn:Zt(i)}},["aggregates"in r?[{type:"sessions"},r]:[{type:"session"},r.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(n)}}recordDroppedEvent(e,n,r){if(this._options.sendClientReports){const i=`${e}:${n}`;(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&R.log(`Adding outcome: "${i}"`),this._outcomes[i]=this._outcomes[i]+1||1}}on(e,n){this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(n)}emit(e,...n){this._hooks[e]&&this._hooks[e].forEach(r=>r(...n))}_updateSessionFromEvent(e,n){let r=!1,i=!1;const a=n.exception&&n.exception.values;if(a){i=!0;for(const l of a){const u=l.mechanism;if(u&&u.handled===!1){r=!0;break}}}const c=e.status==="ok";(c&&e.errors===0||c&&r)&&(ot(e,{...r&&{status:"crashed"},errors:e.errors||Number(i||r)}),this.captureSession(e))}_isClientDoneProcessing(e){return new ie(n=>{let r=0;const i=setInterval(()=>{this._numProcessing==0?(clearInterval(i),n(!0)):(r+=1,e&&r>=e&&(clearInterval(i),n(!1)))},1)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._dsn!==void 0}_prepareEvent(e,n,r){const i=this.getOptions(),a=Object.keys(this._integrations);return!n.integrations&&a.length>0&&(n.integrations=a),ho(i,e,n,r).then(c=>{if(c===null)return c;const{propagationContext:l}=c.sdkProcessingMetadata||{};if(!(c.contexts&&c.contexts.trace)&&l){const{traceId:u,spanId:m,parentSpanId:h,dsc:p}=l;c.contexts={trace:{trace_id:u,span_id:m,parent_span_id:h},...c.contexts};const v=p||function(k,S,w){const T=S.getOptions(),{publicKey:I}=S.getDsn()||{},{segment:J}=w&&w.getUser()||{},z=ln({environment:T.environment||ir,release:T.release,user_segment:J,public_key:I,trace_id:k});return S.emit&&S.emit("createDsc",z),z}(u,this,r);c.sdkProcessingMetadata={dynamicSamplingContext:v,...c.sdkProcessingMetadata}}return c})}_captureEvent(e,n={},r){return this._processEvent(e,n,r).then(i=>i.event_id,i=>{if(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__){const a=i;a.logLevel==="log"?R.log(a.message):R.warn(a)}})}_processEvent(e,n,r){const i=this.getOptions(),{sampleRate:a}=i;if(!this._isEnabled())return en(new he("SDK not enabled, will not capture event.","log"));const c=ei(e),l=Zr(e),u=e.type||"error",m=`before send for type \`${u}\``;if(l&&typeof a=="number"&&Math.random()>a)return this.recordDroppedEvent("sample_rate","error",e),en(new he(`Discarding event because it's not included in the random sample (sampling rate = ${a})`,"log"));const h=u==="replay_event"?"replay":u;return this._prepareEvent(e,n,r).then(p=>{if(p===null)throw this.recordDroppedEvent("event_processor",h,e),new he("An event processor returned `null`, will not send event.","log");if(n.data&&n.data.__sentry__===!0)return p;const v=function(k,S,w){const{beforeSend:T,beforeSendTransaction:I}=k;return Zr(S)&&T?T(S,w):ei(S)&&I?I(S,w):S}(i,p,n);return function(k,S){const w=`${S} must return \`null\` or a valid event.`;if(er(k))return k.then(T=>{if(!at(T)&&T!==null)throw new he(w);return T},T=>{throw new he(`${S} rejected with ${T}`)});if(!at(k)&&k!==null)throw new he(w);return k}(v,m)}).then(p=>{if(p===null)throw this.recordDroppedEvent("before_send",h,e),new he(`${m} returned \`null\`, will not send event.`,"log");const v=r&&r.getSession();!c&&v&&this._updateSessionFromEvent(v,p);const k=p.transaction_info;if(c&&k&&p.transaction!==e.transaction){const S="custom";p.transaction_info={...k,source:S}}return this.sendEvent(p,n),p}).then(null,p=>{throw p instanceof he?p:(this.captureException(p,{data:{__sentry__:!0},originalException:p}),new he(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${p}`))})}_process(e){this._numProcessing++,e.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_sendEnvelope(e){if(this._transport&&this._dsn)return this.emit("beforeEnvelope",e),this._transport.send(e).then(null,n=>{(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&R.error("Error while sending event:",n)});(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&R.error("Transport disabled")}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.keys(e).map(n=>{const[r,i]=n.split(":");return{reason:r,category:i,quantity:e[n]}})}}function Zr(t){return t.type===void 0}function ei(t){return t.type==="transaction"}const po=30;function fo(t,e,n=Xa(t.bufferSize||po)){let r={};function i(a){const c=[];if($r(a,(m,h)=>{const p=Jr(h);if(function(v,k,S=Date.now()){return function(w,T){return w[T]||w.all||0}(v,k)>S}(r,p)){const v=ti(m,h);t.recordDroppedEvent("ratelimit_backoff",p,v)}else c.push(m)}),c.length===0)return ze();const l=wt(a[0],c),u=m=>{$r(l,(h,p)=>{const v=ti(h,p);t.recordDroppedEvent(m,Jr(p),v)})};return n.add(()=>e({body:to(l,t.textEncoder)}).then(m=>(m.statusCode!==void 0&&(m.statusCode<200||m.statusCode>=300)&&(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&R.warn(`Sentry responded with status code ${m.statusCode} to sent event.`),r=so(r,m),m),m=>{throw u("network_error"),m})).then(m=>m,m=>{if(m instanceof he)return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&R.error("Skipped sending event because buffer is full."),u("queue_overflow"),ze();throw m})}return i.__sentry__baseTransport__=!0,{send:i,flush:a=>n.drain(a)}}function ti(t,e){if(e==="event"||e==="transaction")return Array.isArray(t)?t[1]:void 0}const ni="7.60.1";let ri;class kt{constructor(){kt.prototype.__init.call(this)}static __initStatic(){this.id="FunctionToString"}__init(){this.name=kt.id}setupOnce(){ri=Function.prototype.toString;try{Function.prototype.toString=function(...e){const n=rr(this)||this;return ri.apply(n,e)}}catch{}}}kt.__initStatic();const mo=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],go=[/^.*healthcheck.*$/,/^.*healthy.*$/,/^.*live.*$/,/^.*ready.*$/,/^.*heartbeat.*$/,/^.*\/health$/,/^.*\/healthz$/];class tt{static __initStatic(){this.id="InboundFilters"}__init(){this.name=tt.id}constructor(e={}){this._options=e,tt.prototype.__init.call(this)}setupOnce(e,n){const r=i=>{const a=n();if(a){const c=a.getIntegration(tt);if(c){const l=a.getClient(),u=l?l.getOptions():{},m=function(h={},p={}){return{allowUrls:[...h.allowUrls||[],...p.allowUrls||[]],denyUrls:[...h.denyUrls||[],...p.denyUrls||[]],ignoreErrors:[...h.ignoreErrors||[],...p.ignoreErrors||[],...h.disableErrorDefaults?[]:mo],ignoreTransactions:[...h.ignoreTransactions||[],...p.ignoreTransactions||[],...h.disableTransactionDefaults?[]:go],ignoreInternal:h.ignoreInternal===void 0||h.ignoreInternal}}(c._options,u);return function(h,p){return p.ignoreInternal&&function(v){try{return v.exception.values[0].type==="SentryError"}catch{}return!1}(h)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&R.warn(`Event dropped due to being internal Sentry Error.
Event: ${Pe(h)}`),!0):function(v,k){return v.type||!k||!k.length?!1:function(S){if(S.message)return[S.message];if(S.exception){const{values:w}=S.exception;try{const{type:T="",value:I=""}=w&&w[w.length-1]||{};return[`${I}`,`${T}: ${I}`]}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&R.error(`Cannot extract message for event ${Pe(S)}`),[]}}return[]}(v).some(S=>Lt(S,k))}(h,p.ignoreErrors)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&R.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Pe(h)}`),!0):function(v,k){if(v.type!=="transaction"||!k||!k.length)return!1;const S=v.transaction;return!!S&&Lt(S,k)}(h,p.ignoreTransactions)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&R.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${Pe(h)}`),!0):function(v,k){if(!k||!k.length)return!1;const S=xt(v);return!!S&&Lt(S,k)}(h,p.denyUrls)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&R.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Pe(h)}.
Url: ${xt(h)}`),!0):function(v,k){if(!k||!k.length)return!0;const S=xt(v);return!S||Lt(S,k)}(h,p.allowUrls)?!1:((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&R.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Pe(h)}.
Url: ${xt(h)}`),!0)}(i,m)?null:i}}return i};r.id=this.name,e(r)}}function xt(t){try{let e;try{e=t.exception.values[0].stacktrace.frames}catch{}return e?function(n=[]){for(let r=n.length-1;r>=0;r--){const i=n[r];if(i&&i.filename!=="<anonymous>"&&i.filename!=="[native code]")return i.filename||null}return null}(e):null}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&R.error(`Cannot extract url for event ${Pe(t)}`),null}}tt.__initStatic();var vo=Object.freeze({__proto__:null,FunctionToString:kt,InboundFilters:tt});const G=ue;let Rn=0;function hs(){return Rn>0}function ct(t,e={},n){if(typeof t!="function")return t;try{const i=t.__sentry_wrapped__;if(i)return i;if(rr(t))return t}catch{return t}const r=function(){const i=Array.prototype.slice.call(arguments);try{n&&typeof n=="function"&&n.apply(this,arguments);const c=i.map(l=>ct(l,e));return t.apply(this,c)}catch(c){throw Rn++,setTimeout(()=>{Rn--}),a=l=>{var u,m;l.addEventProcessor(h=>(e.mechanism&&(Ln(h,void 0),Et(h,e.mechanism)),h.extra={...h.extra,arguments:i},h)),u=c,oe().captureException(u,{captureContext:m})},oe().withScope(a),c}var a};try{for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}catch{}ts(r,t),nr(t,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get:()=>t.name})}catch{}return r}function ps(t,e){const n=ar(t,e),r={type:e&&e.name,value:yo(e)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function vn(t,e){return{exception:{values:[ps(t,e)]}}}function ar(t,e){const n=e.stacktrace||e.stack||"",r=function(i){if(i){if(typeof i.framesToPop=="number")return i.framesToPop;if(_o.test(i.message))return 1}return 0}(e);try{return t(n,r)}catch{}return[]}const _o=/Minified React error #\d+;/i;function yo(t){const e=t&&t.message;return e?e.error&&typeof e.error.message=="string"?e.error.message:e:"No error message"}function or(t,e,n,r,i){let a;if(Zn(e)&&e.error)return vn(t,e.error);if(Pr(e)||lt(e,"DOMException")){const c=e;if("stack"in e)a=vn(t,e);else{const l=c.name||(Pr(c)?"DOMError":"DOMException"),u=c.message?`${l}: ${c.message}`:l;a=jn(t,u,n,r),Ln(a,u)}return"code"in c&&(a.tags={...a.tags,"DOMException.code":`${c.code}`}),a}return Xi(e)?vn(t,e):at(e)||Qt(e)?(a=function(c,l,u,m){const h=oe().getClient(),p=h&&h.getOptions().normalizeDepth,v={exception:{values:[{type:Qt(l)?l.constructor.name:m?"UnhandledRejection":"Error",value:bo(l,{isUnhandledRejection:m})}]},extra:{__serialized__:is(l,p)}};if(u){const k=ar(c,u);k.length&&(v.exception.values[0].stacktrace={frames:k})}return v}(t,e,n,i),Et(a,{synthetic:!0}),a):(a=jn(t,e,n,r),Ln(a,`${e}`),Et(a,{synthetic:!0}),a)}function jn(t,e,n,r){const i={message:e};if(r&&n){const a=ar(t,n);a.length&&(i.exception={values:[{value:e,stacktrace:{frames:a}}]})}return i}function bo(t,{isUnhandledRejection:e}){const n=function(i,a=40){const c=Object.keys(ns(i));if(c.sort(),!c.length)return"[object has no keys]";if(c[0].length>=a)return et(c[0],a);for(let l=c.length;l>0;l--){const u=c.slice(0,l).join(", ");if(!(u.length>a))return l===c.length?u:et(u,a)}return""}(t),r=e?"promise rejection":"exception";return Zn(t)?`Event \`ErrorEvent\` captured as ${r} with message \`${t.message}\``:Qt(t)?`Event \`${function(i){try{const a=Object.getPrototypeOf(i);return a?a.constructor.name:void 0}catch{}}(t)}\` (type=${t.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}const ii=1024,fs="Breadcrumbs";class Tt{static __initStatic(){this.id=fs}__init(){this.name=Tt.id}constructor(e){Tt.prototype.__init.call(this),this.options={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e}}setupOnce(){this.options.console&&Ve("console",So),this.options.dom&&Ve("dom",function(e){function n(r){let i,a=typeof e=="object"?e.serializeAttribute:void 0,c=typeof e=="object"&&typeof e.maxStringLength=="number"?e.maxStringLength:void 0;c&&c>ii&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&R.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${c} was configured. Sentry will use 1024 instead.`),c=ii),typeof a=="string"&&(a=[a]);try{const l=r.event;i=function(u){return!!u&&!!u.target}(l)?Cn(l.target,{keyAttrs:a,maxStringLength:c}):Cn(l,{keyAttrs:a,maxStringLength:c})}catch{i="<unknown>"}i.length!==0&&oe().addBreadcrumb({category:`ui.${r.name}`,message:i},{event:r.event,name:r.name,global:r.global})}return n}(this.options.dom)),this.options.xhr&&Ve("xhr",Eo),this.options.fetch&&Ve("fetch",wo),this.options.history&&Ve("history",ko)}addSentryBreadcrumb(e){this.options.sentry&&oe().addBreadcrumb({category:"sentry."+(e.type==="transaction"?"transaction":"event"),event_id:e.event_id,level:e.level,message:Pe(e)},{event:e})}}function So(t){for(let r=0;r<t.args.length;r++)if(t.args[r]==="ref=Ref<"){t.args[r+1]="viewRef";break}const e={category:"console",data:{arguments:t.args,logger:"console"},level:(n=t.level,n==="warn"?"warning":Za.includes(n)?n:"log"),message:Dr(t.args," ")};var n;if(t.level==="assert"){if(t.args[0]!==!1)return;e.message=`Assertion failed: ${Dr(t.args.slice(1)," ")||"console.assert"}`,e.data.arguments=t.args.slice(1)}oe().addBreadcrumb(e,{input:t.args,level:t.level})}function Eo(t){const{startTimestamp:e,endTimestamp:n}=t,r=t.xhr[gt];if(!e||!n||!r)return;const{method:i,url:a,status_code:c,body:l}=r,u={method:i,url:a,status_code:c},m={xhr:t.xhr,input:l,startTimestamp:e,endTimestamp:n};oe().addBreadcrumb({category:"xhr",data:u,type:"http"},m)}function wo(t){const{startTimestamp:e,endTimestamp:n}=t;if(n&&(!t.fetchData.url.match(/sentry_key/)||t.fetchData.method!=="POST"))if(t.error){const r=t.fetchData,i={data:t.error,input:t.args,startTimestamp:e,endTimestamp:n};oe().addBreadcrumb({category:"fetch",data:r,level:"error",type:"http"},i)}else{const r={...t.fetchData,status_code:t.response&&t.response.status},i={input:t.args,response:t.response,startTimestamp:e,endTimestamp:n};oe().addBreadcrumb({category:"fetch",data:r,type:"http"},i)}}function ko(t){let e=t.from,n=t.to;const r=mn(G.location.href);let i=mn(e);const a=mn(n);i.path||(i=r),r.protocol===a.protocol&&r.host===a.host&&(n=a.relative),r.protocol===i.protocol&&r.host===i.host&&(e=i.relative),oe().addBreadcrumb({category:"navigation",data:{from:e,to:n}})}Tt.__initStatic();class To extends Ye{constructor(e){const n=G.SENTRY_SDK_SOURCE||"npm";e._metadata=e._metadata||{},e._metadata.sdk=e._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:`${n}:@sentry/browser`,version:ni}],version:ni},super(e),e.sendClientReports&&G.document&&G.document.addEventListener("visibilitychange",()=>{G.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(e,n){return function(r,i,a,c){const l=or(r,i,a&&a.syntheticException||void 0,c);return Et(l),l.level="error",a&&a.event_id&&(l.event_id=a.event_id),ze(l)}(this._options.stackParser,e,n,this._options.attachStacktrace)}eventFromMessage(e,n="info",r){return function(i,a,c="info",l,u){const m=jn(i,a,l&&l.syntheticException||void 0,u);return m.level=c,l&&l.event_id&&(m.event_id=l.event_id),ze(m)}(this._options.stackParser,e,n,r,this._options.attachStacktrace)}sendEvent(e,n){const r=this.getIntegrationById(fs);r&&r.addSentryBreadcrumb&&r.addSentryBreadcrumb(e),super.sendEvent(e,n)}captureUserFeedback(e){if(!this._isEnabled())return void((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&R.warn("SDK not enabled, will not capture user feedback."));const n=function(r,{metadata:i,tunnel:a,dsn:c}){const l={event_id:r.event_id,sent_at:new Date().toISOString(),...i&&i.sdk&&{sdk:{name:i.sdk.name,version:i.sdk.version}},...!!a&&!!c&&{dsn:Zt(c)}};return wt(l,[function(m){return[{type:"user_report"},m]}(r)])}(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(n)}_prepareEvent(e,n,r){return e.platform=e.platform||"javascript",super._prepareEvent(e,n,r)}_flushOutcomes(){const e=this._clearOutcomes();if(e.length===0)return void((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&R.log("No outcomes to send"));if(!this._dsn)return void((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&R.log("No dsn provided, will not send outcomes"));(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&R.log("Sending outcomes:",e);const n=(r=e,wt((i=this._options.tunnel&&Zt(this._dsn))?{dsn:i}:{},[[{type:"client_report"},{timestamp:a||un(),discarded_events:r}]]));var r,i,a;this._sendEnvelope(n)}}let ht;function Co(t,e=function(){if(ht)return ht;if(An(G.fetch))return ht=G.fetch.bind(G);const n=G.document;let r=G.fetch;if(n&&typeof n.createElement=="function")try{const i=n.createElement("iframe");i.hidden=!0,n.head.appendChild(i);const a=i.contentWindow;a&&a.fetch&&(r=a.fetch),n.head.removeChild(i)}catch(i){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&R.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",i)}return ht=r.bind(G)}()){let n=0,r=0;return fo(t,function(i){const a=i.body.length;n+=a,r++;const c={body:i.body,method:"POST",referrerPolicy:"origin",headers:t.headers,keepalive:n<=6e4&&r<15,...t.fetchOptions};try{return e(t.url,c).then(l=>(n-=a,r--,{statusCode:l.status,headers:{"x-sentry-rate-limits":l.headers.get("X-Sentry-Rate-Limits"),"retry-after":l.headers.get("Retry-After")}}))}catch(l){return ht=void 0,n-=a,r--,en(l)}})}class Ne{static __initStatic(){this.id="GlobalHandlers"}__init(){this.name=Ne.id}__init2(){this._installFunc={onerror:Mo,onunhandledrejection:Ao}}constructor(e){Ne.prototype.__init.call(this),Ne.prototype.__init2.call(this),this._options={onerror:!0,onunhandledrejection:!0,...e}}setupOnce(){Error.stackTraceLimit=50;const e=this._options;for(const r in e){const i=this._installFunc[r];i&&e[r]&&(n=r,(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&R.log(`Global Handler attached: ${n}`),i(),this._installFunc[r]=void 0)}var n}}function Mo(){Ve("error",t=>{const[e,n,r]=gs();if(!e.getIntegration(Ne))return;const{msg:i,url:a,line:c,column:l,error:u}=t;if(hs()||u&&u.__sentry_own_request__)return;const m=u===void 0&&Je(i)?function(h,p,v,k){const S=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let w=Zn(h)?h.message:h,T="Error";const I=w.match(S);return I&&(T=I[1],w=I[2]),si({exception:{values:[{type:T,value:w}]}},p,v,k)}(i,a,c,l):si(or(n,u||i,void 0,r,!1),a,c,l);m.level="error",ms(e,u,m,"onerror")})}function Ao(){Ve("unhandledrejection",t=>{const[e,n,r]=gs();if(!e.getIntegration(Ne))return;let i=t;try{"reason"in t?i=t.reason:"detail"in t&&"reason"in t.detail&&(i=t.detail.reason)}catch{}if(hs()||i&&i.__sentry_own_request__)return!0;const a=Zi(i)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(i)}`}]}}:or(n,i,void 0,r,!0);a.level="error",ms(e,i,a,"onunhandledrejection")})}function si(t,e,n,r){const i=t.exception=t.exception||{},a=i.values=i.values||[],c=a[0]=a[0]||{},l=c.stacktrace=c.stacktrace||{},u=l.frames=l.frames||[],m=isNaN(parseInt(r,10))?void 0:r,h=isNaN(parseInt(n,10))?void 0:n,p=Je(e)&&e.length>0?e:function(){try{return qa.document.location.href}catch{return""}}();return u.length===0&&u.push({colno:m,filename:p,function:"?",in_app:!0,lineno:h}),t}function ms(t,e,n,r){Et(n,{handled:!1,type:r}),t.captureEvent(n,{originalException:e})}function gs(){const t=oe(),e=t.getClient(),n=e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1};return[t,n.stackParser,n.attachStacktrace]}Ne.__initStatic();const Oo=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"];class Ct{static __initStatic(){this.id="TryCatch"}__init(){this.name=Ct.id}constructor(e){Ct.prototype.__init.call(this),this._options={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e}}setupOnce(){this._options.setTimeout&&X(G,"setTimeout",ai),this._options.setInterval&&X(G,"setInterval",ai),this._options.requestAnimationFrame&&X(G,"requestAnimationFrame",Lo),this._options.XMLHttpRequest&&"XMLHttpRequest"in G&&X(XMLHttpRequest.prototype,"send",Po);const e=this._options.eventTarget;e&&(Array.isArray(e)?e:Oo).forEach(Do)}}function ai(t){return function(...e){const n=e[0];return e[0]=ct(n,{mechanism:{data:{function:Re(t)},handled:!0,type:"instrument"}}),t.apply(this,e)}}function Lo(t){return function(e){return t.apply(this,[ct(e,{mechanism:{data:{function:"requestAnimationFrame",handler:Re(t)},handled:!0,type:"instrument"}})])}}function Po(t){return function(...e){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(r=>{r in n&&typeof n[r]=="function"&&X(n,r,function(i){const a={mechanism:{data:{function:r,handler:Re(i)},handled:!0,type:"instrument"}},c=rr(i);return c&&(a.mechanism.data.handler=Re(c)),ct(i,a)})}),t.apply(this,e)}}function Do(t){const e=G,n=e[t]&&e[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(X(n,"addEventListener",function(r){return function(i,a,c){try{typeof a.handleEvent=="function"&&(a.handleEvent=ct(a.handleEvent,{mechanism:{data:{function:"handleEvent",handler:Re(a),target:t},handled:!0,type:"instrument"}}))}catch{}return r.apply(this,[i,ct(a,{mechanism:{data:{function:"addEventListener",handler:Re(a),target:t},handled:!0,type:"instrument"}}),c])}}),X(n,"removeEventListener",function(r){return function(i,a,c){const l=a;try{const u=l&&l.__sentry_wrapped__;u&&r.call(this,i,u,c)}catch{}return r.call(this,i,l,c)}}))}Ct.__initStatic();class nt{static __initStatic(){this.id="LinkedErrors"}__init(){this.name=nt.id}constructor(e={}){nt.prototype.__init.call(this),this._key=e.key||"cause",this._limit=e.limit||5}setupOnce(e,n){e((r,i)=>{const a=n(),c=a.getClient(),l=a.getIntegration(nt);if(!c||!l)return r;const u=c.getOptions();return Ga(ps,u.stackParser,u.maxValueLength,l._key,l._limit,r,i),r})}}nt.__initStatic();class rt{constructor(){rt.prototype.__init.call(this)}static __initStatic(){this.id="HttpContext"}__init(){this.name=rt.id}setupOnce(){ls(e=>{if(oe().getIntegration(rt)){if(!G.navigator&&!G.location&&!G.document)return e;const n=e.request&&e.request.url||G.location&&G.location.href,{referrer:r}=G.document||{},{userAgent:i}=G.navigator||{},a={...e.request&&e.request.headers,...r&&{Referer:r},...i&&{"User-Agent":i}},c={...e.request,...n&&{url:n},headers:a};return{...e,request:c}}return e})}}rt.__initStatic();class it{constructor(){it.prototype.__init.call(this)}static __initStatic(){this.id="Dedupe"}__init(){this.name=it.id}setupOnce(e,n){const r=i=>{if(i.type)return i;const a=n().getIntegration(it);if(a){try{if(function(c,l){return l?!!(function(u,m){const h=u.message,p=m.message;return!(!h&&!p||h&&!p||!h&&p||h!==p||!ci(u,m)||!oi(u,m))}(c,l)||function(u,m){const h=li(m),p=li(u);return!(!h||!p||h.type!==p.type||h.value!==p.value||!ci(u,m)||!oi(u,m))}(c,l)):!1}(i,a._previousEvent))return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&R.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{return a._previousEvent=i}return a._previousEvent=i}return i};r.id=this.name,e(r)}}function oi(t,e){let n=ui(t),r=ui(e);if(!n&&!r)return!0;if(n&&!r||!n&&r||r.length!==n.length)return!1;for(let i=0;i<r.length;i++){const a=r[i],c=n[i];if(a.filename!==c.filename||a.lineno!==c.lineno||a.colno!==c.colno||a.function!==c.function)return!1}return!0}function ci(t,e){let n=t.fingerprint,r=e.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return n.join("")===r.join("")}catch{return!1}}function li(t){return t.exception&&t.exception.values&&t.exception.values[0]}function ui(t){const e=t.exception;if(e)try{return e.values[0].stacktrace.frames}catch{return}}it.__initStatic();var Io=Object.freeze({__proto__:null,Breadcrumbs:Tt,Dedupe:it,GlobalHandlers:Ne,HttpContext:rt,LinkedErrors:nt,TryCatch:Ct});let vs={};G.Sentry&&G.Sentry.Integrations&&(vs=G.Sentry.Integrations);const di={...vs,...vo,...Io};var xn="new",hi="loading",pi="loaded",nn="joining-meeting",Ge="joined-meeting",ke="left-meeting",Te="error",No="blocked",Ro="off",jo="sendable",xo="loading",Fo="interrupted",Uo="playable",Yt="unknown",_s="full",Bo="lobby",Vo="none",ys="base",bs="*",Yo="ejected",Go="nbf-room",qo="nbf-token",$o="exp-room",Jo="exp-token",Wo="no-room",zo="meeting-full",Ho="end-of-life",Ko="not-allowed",Qo="connection-error",Xo="cam-in-use",Zo="mic-in-use",ec="cam-mic-in-use",tc="permissions",nc="undefined-mediadevices",rc="not-found",ic="constraints",sc="unknown",Ss="iframe-ready-for-launch-config",Es="iframe-launch-config",Fn="theme-updated",Un="loading",Bn="load-attempt-failed",Gt="loaded",ws="started-camera",ks="camera-error",Vn="joining-meeting",Ts="joined-meeting",Cs="left-meeting",fi="available-devices-updated",Ms="participant-joined",As="participant-updated",Os="participant-left",Ls="participant-counts-updated",Ps="access-state-updated",Ds="meeting-session-summary-updated",Is="meeting-session-state-updated",ac="meeting-session-data-error",Ns="waiting-participant-added",Rs="waiting-participant-updated",js="waiting-participant-removed",Yn="track-started",Gn="track-stopped",xs="transcription-started",Fs="transcription-stopped",Us="transcription-error",qt="recording-started",$t="recording-stopped",Bs="recording-stats",Vs="recording-error",Ys="recording-upload-completed",Gs="recording-data",qs="app-message",$s="transcription-message",Js="remote-media-player-started",Ws="remote-media-player-updated",zs="remote-media-player-stopped",Hs="local-screen-share-started",Ks="local-screen-share-stopped",Qs="local-screen-share-canceled",Xs="active-speaker-change",Zs="active-speaker-mode-change",ea="network-quality-change",ta="network-connection",na="cpu-load-change",ra="face-counts-updated",Ue="fullscreen",Be="exited-fullscreen",ia="live-streaming-started",sa="live-streaming-updated",aa="live-streaming-stopped",oa="live-streaming-error",ca="lang-updated",la="receive-settings-updated",ua="input-settings-updated",Jt="nonfatal-error",Wt="error",mi=102400,_n="iframe-call-message",gi="local-screen-start",vi="daily-method-update-live-streaming-endpoints",pt="transmit-log",vt="daily-custom-track",zt={NONE:"none",BGBLUR:"background-blur",BGIMAGE:"background-image",FACE_DETECTION:"face-detection"},da={NONE:"none",NOISE_CANCELLATION:"noise-cancellation"},qn={PLAY:"play",PAUSE:"pause"},_i=10,yn=["jpg","png","jpeg"],oc="add-endpoints",cc="remove-endpoints";function fe(){return!V()&&typeof window<"u"&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:""}function V(){return typeof navigator<"u"&&navigator.product&&navigator.product==="ReactNative"}function ha(){return navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia}function lc(){return!!(navigator&&navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)&&(function(t,e){if(!t||!e)return!0;switch(t){case"Chrome":return e.major>=75;case"Safari":return RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection")&&!(e.major===13&&e.minor===0&&e.point===0);case"Firefox":return e.major>=67}return!0}(He(),Jn())||V())}function yi(){if(V()||!document)return!1;var t=document.createElement("iframe");return!!t.requestFullscreen||!!t.webkitRequestFullscreen}var uc=function(){try{var t=document.createElement("canvas"),e=t.getContext("webgl2")!=null;return t.remove(),e}catch{return!1}}();function pa(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return!V()&&!!uc&&(t?function(){return $n()?!1:["Chrome","Firefox"].includes(He())}():function(){if($n())return!1;var e=He();if(e==="Safari"){var n=lr();if(n.major<15||n.major===15&&n.minor<4)return!1}return e==="Chrome"?cr().major>=77:e==="Firefox"?ur().major>=97:["Chrome","Firefox","Safari"].includes(e)}())}var dc=["Chrome","Firefox"];function fa(){return!V()&&!$n()&&typeof AudioWorkletNode<"u"&&dc.includes(He())}function bi(){return ha()&&!function(){var t,e=He();if(!fe())return!0;switch(e){case"Chrome":return(t=cr()).major&&t.major>0&&t.major<75;case"Firefox":return(t=ur()).major<91;case"Safari":return(t=lr()).major<13||t.major===13&&t.minor<1;default:return!0}}()}function $n(){var t,e,n=fe(),r=n.match(/Mac/)&&(!V()&&typeof window<"u"&&(t=window)!==null&&t!==void 0&&(e=t.navigator)!==null&&e!==void 0&&e.maxTouchPoints?window.navigator.maxTouchPoints:0)>=5;return!!(n.match(/Mobi/)||n.match(/Android/)||r)||!!fe().match(/DailyAnd\//)||void 0}function He(){if(typeof window<"u"){var t=fe();return ma()?"Safari":t.indexOf("Edge")>-1?"Edge":t.match(/Chrome\//)?"Chrome":t.indexOf("Safari")>-1?"Safari":t.indexOf("Firefox")>-1?"Firefox":t.indexOf("MSIE")>-1||t.indexOf(".NET")>-1?"IE":"Unknown Browser"}}function Jn(){switch(He()){case"Chrome":return cr();case"Safari":return lr();case"Firefox":return ur();case"Edge":return function(){var t=0,e=0;if(typeof window<"u"){var n=fe().match(/Edge\/(\d+).(\d+)/);if(n)try{t=parseInt(n[1]),e=parseInt(n[2])}catch{}}return{major:t,minor:e}}()}}function cr(){var t=0,e=0,n=0,r=0,i=!1;if(typeof window<"u"){var a=fe(),c=a.match(/Chrome\/(\d+).(\d+).(\d+).(\d+)/);if(c)try{t=parseInt(c[1]),e=parseInt(c[2]),n=parseInt(c[3]),r=parseInt(c[4]),i=a.indexOf("OPR/")>-1}catch{}}return{major:t,minor:e,build:n,patch:r,opera:i}}function ma(){return!!fe().match(/iPad|iPhone|iPod/i)&&ha()}function lr(){var t=0,e=0,n=0;if(typeof window<"u"){var r=fe().match(/Version\/(\d+).(\d+)(.(\d+))?/);if(r)try{t=parseInt(r[1]),e=parseInt(r[2]),n=parseInt(r[4])}catch{}else ma()&&(t=14,e=0,n=3)}return{major:t,minor:e,point:n}}function ur(){var t=0,e=0;if(typeof window<"u"){var n=fe().match(/Firefox\/(\d+).(\d+)/);if(n)try{t=parseInt(n[1]),e=parseInt(n[2])}catch{}}return{major:t,minor:e}}var ga=function(){function t(){me(this,t)}return ge(t,[{key:"addListenerForMessagesFromCallMachine",value:function(e,n,r){dt()}},{key:"addListenerForMessagesFromDailyJs",value:function(e,n,r){dt()}},{key:"sendMessageToCallMachine",value:function(e,n,r,i){dt()}},{key:"sendMessageToDailyJs",value:function(e,n){dt()}},{key:"removeListener",value:function(e){dt()}}]),t}();function Si(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function bn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Si(Object(n),!0).forEach(function(r){Le(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Si(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hc(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=pe(t);if(e){var i=pe(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return on(this,n)}}var pc=function(t){an(n,ga);var e=hc(n);function n(){var r;return me(this,n),(r=e.call(this))._wrappedListeners={},r._messageCallbacks={},r}return ge(n,[{key:"addListenerForMessagesFromCallMachine",value:function(r,i,a){var c=this,l=function(u){if(u.data&&u.data.what==="iframe-call-message"&&(!u.data.callFrameId||u.data.callFrameId===i)&&(!u.data.from||u.data.from!=="module")){var m=bn({},u.data);if(delete m.from,m.callbackStamp&&c._messageCallbacks[m.callbackStamp]){var h=m.callbackStamp;c._messageCallbacks[h].call(a,m),delete c._messageCallbacks[h]}delete m.what,delete m.callbackStamp,r.call(a,m)}};this._wrappedListeners[r]=l,window.addEventListener("message",l)}},{key:"addListenerForMessagesFromDailyJs",value:function(r,i,a){var c=function(l){if(!(!l.data||l.data.what!==_n||!l.data.action||l.data.from&&l.data.from!=="module"||l.data.callFrameId&&i&&l.data.callFrameId!==i)){var u=l.data;r.call(a,u)}};this._wrappedListeners[r]=c,window.addEventListener("message",c)}},{key:"sendMessageToCallMachine",value:function(r,i,a,c){if(!c)throw new Error("undefined callFrameId. Are you trying to use a DailyCall instance previously destroyed?");var l=bn({},r);if(l.what=_n,l.from="module",l.callFrameId=c,i){var u=cn();this._messageCallbacks[u]=i,l.callbackStamp=u}var m=a?a.contentWindow:window,h=this._callMachineTargetOrigin(a);h&&m.postMessage(l,h)}},{key:"sendMessageToDailyJs",value:function(r,i){r.what=_n,r.callFrameId=i,r.from="embedded",window.postMessage(r,this._targetOriginFromWindowLocation())}},{key:"removeListener",value:function(r){var i=this._wrappedListeners[r];i&&(window.removeEventListener("message",i),delete this._wrappedListeners[r])}},{key:"forwardPackagedMessageToCallMachine",value:function(r,i,a){var c=bn({},r);c.callFrameId=a;var l=i?i.contentWindow:window,u=this._callMachineTargetOrigin(i);u&&l.postMessage(c,u)}},{key:"addListenerForPackagedMessagesFromCallMachine",value:function(r,i){var a=function(c){if(c.data&&c.data.what==="iframe-call-message"&&(!c.data.callFrameId||c.data.callFrameId===i)&&(!c.data.from||c.data.from!=="module")){var l=c.data;r(l)}};return this._wrappedListeners[r]=a,window.addEventListener("message",a),r}},{key:"removeListenerForPackagedMessagesFromCallMachine",value:function(r){var i=this._wrappedListeners[r];i&&(window.removeEventListener("message",i),delete this._wrappedListeners[r])}},{key:"_callMachineTargetOrigin",value:function(r){return r?r.src?new URL(r.src).origin:void 0:this._targetOriginFromWindowLocation()}},{key:"_targetOriginFromWindowLocation",value:function(){return window.location.protocol==="file:"?"*":window.location.origin}}]),n}();function fc(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=pe(t);if(e){var i=pe(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return on(this,n)}}var mc=function(t){an(n,ga);var e=fc(n);function n(){var r;return me(this,n),r=e.call(this),global.callMachineToDailyJsEmitter=global.callMachineToDailyJsEmitter||new Me.EventEmitter,global.dailyJsToCallMachineEmitter=global.dailyJsToCallMachineEmitter||new Me.EventEmitter,r._wrappedListeners={},r._messageCallbacks={},r}return ge(n,[{key:"addListenerForMessagesFromCallMachine",value:function(r,i,a){this._addListener(r,global.callMachineToDailyJsEmitter,a,"received call machine message")}},{key:"addListenerForMessagesFromDailyJs",value:function(r,i,a){this._addListener(r,global.dailyJsToCallMachineEmitter,a,"received daily-js message")}},{key:"sendMessageToCallMachine",value:function(r,i){this._sendMessage(r,global.dailyJsToCallMachineEmitter,"sending message to call machine",i)}},{key:"sendMessageToDailyJs",value:function(r){this._sendMessage(r,global.callMachineToDailyJsEmitter,"sending message to daily-js")}},{key:"removeListener",value:function(r){var i=this._wrappedListeners[r];i&&(global.callMachineToDailyJsEmitter.removeListener("message",i),global.dailyJsToCallMachineEmitter.removeListener("message",i),delete this._wrappedListeners[r])}},{key:"_addListener",value:function(r,i,a,c){var l=this,u=function(m){if(m.callbackStamp&&l._messageCallbacks[m.callbackStamp]){var h=m.callbackStamp;l._messageCallbacks[h].call(a,m),delete l._messageCallbacks[h]}r.call(a,m)};this._wrappedListeners[r]=u,i.addListener("message",u)}},{key:"_sendMessage",value:function(r,i,a,c){if(c){var l=cn();this._messageCallbacks[l]=c,r.callbackStamp=l}i.emit("message",r)}}]),n}(),Wn="replace",zn="shallow-merge",Ei=[Wn,zn],gc=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.data,r=e.mergeStrategy,i=r===void 0?Wn:r;me(this,t),t._validateMergeStrategy(i),t._validateData(n,i),this.mergeStrategy=i,this.data=n}return ge(t,[{key:"isNoOp",value:function(){return t.isNoOpUpdate(this.data,this.mergeStrategy)}}],[{key:"isNoOpUpdate",value:function(e,n){return Object.keys(e).length===0&&n===zn}},{key:"_validateMergeStrategy",value:function(e){if(!Ei.includes(e))throw Error("Unrecognized mergeStrategy provided. Options are: [".concat(Ei,"]"))}},{key:"_validateData",value:function(e,n){if(!function(l){if(l==null||q(l)!=="object")return!1;var u=Object.getPrototypeOf(l);return u==null||u===Object.prototype}(e))throw Error("Meeting session data must be a plain (map-like) object");var r;try{if(r=JSON.stringify(e),n===Wn){var i=JSON.parse(r);se(i,e)||console.warn("The meeting session data provided will be modified when serialized.",i,e)}else if(n===zn){for(var a in e)if(Object.hasOwnProperty.call(e,a)&&e[a]!==void 0){var c=JSON.parse(JSON.stringify(e[a]));se(e[a],c)||console.warn("At least one key in the meeting session data provided will be modified when serialized.",c,e[a])}}}catch(l){throw Error("Meeting session data must be serializable to JSON: ".concat(l))}if(r.length>mi)throw Error("Meeting session data is too large (".concat(r.length," characters). Maximum size suppported is ").concat(mi,"."))}}]),t}();function Hn(t,e,n){return Hn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct.bind():function(r,i,a){var c=[null];c.push.apply(c,i);var l=new(Function.bind.apply(r,c));return a&&bt(l,a.prototype),l},Hn.apply(null,arguments)}function Kn(t){var e=typeof Map=="function"?new Map:void 0;return Kn=function(n){if(n===null||(r=n,Function.toString.call(r).indexOf("[native code]")===-1))return n;var r;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(n))return e.get(n);e.set(n,i)}function i(){return Hn(n,arguments,pe(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),bt(i,n)},Kn(t)}function vc(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=pe(t);if(e){var i=pe(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return on(this,n)}}function wi(t){var e,n=(e=window._daily)===null||e===void 0?void 0:e.pendings;if(n){var r=n.indexOf(t);r!==-1&&n.splice(r,1)}}var _c=function(){function t(e){me(this,t),this._currentLoad=null,this._callFrameId=e}return ge(t,[{key:"load",value:function(){var e,n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;if(this.loaded)return window._daily.instances[this._callFrameId].callMachine.reset(),void i(!0);e=this._callFrameId,window._daily.pendings.push(e),this._currentLoad&&this._currentLoad.cancel(),this._currentLoad=new yc(r,function(){i(!1)},function(c,l){l||wi(n._callFrameId),a(c,l)}),this._currentLoad.start()}},{key:"cancel",value:function(){this._currentLoad&&this._currentLoad.cancel(),wi(this._callFrameId)}},{key:"loaded",get:function(){return this._currentLoad&&this._currentLoad.succeeded}}]),t}(),yc=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;me(this,t),this._attemptsRemaining=3,this._currentAttempt=null,this._dailyConfig=e,this._successCallback=n,this._failureCallback=r}return ge(t,[{key:"start",value:function(){var e=this;this._currentAttempt||(this._currentAttempt=new ki(this._dailyConfig,this._successCallback,function n(r){e._currentAttempt.cancelled||(e._attemptsRemaining--,e._failureCallback(r,e._attemptsRemaining>0),e._attemptsRemaining<=0||setTimeout(function(){e._currentAttempt.cancelled||(e._currentAttempt=new ki(e._dailyConfig,e._successCallback,n),e._currentAttempt.start())},3e3))}),this._currentAttempt.start())}},{key:"cancel",value:function(){this._currentAttempt&&this._currentAttempt.cancel()}},{key:"cancelled",get:function(){return this._currentAttempt&&this._currentAttempt.cancelled}},{key:"succeeded",get:function(){return this._currentAttempt&&this._currentAttempt.succeeded}}]),t}(),Sn=function(t){an(n,Kn(Error));var e=vc(n);function n(){return me(this,n),e.apply(this,arguments)}return ge(n)}(),rn=2e4,ki=function(){function t(n,r,i){me(this,t),this._loadAttemptImpl=V()||!n.avoidEval?new bc(n,r,i):new Sc(n,r,i)}var e;return ge(t,[{key:"start",value:(e=D(function*(){return this._loadAttemptImpl.start()}),function(){return e.apply(this,arguments)})},{key:"cancel",value:function(){this._loadAttemptImpl.cancel()}},{key:"cancelled",get:function(){return this._loadAttemptImpl.cancelled}},{key:"succeeded",get:function(){return this._loadAttemptImpl.succeeded}}]),t}(),bc=function(){function t(a,c,l){me(this,t),this.cancelled=!1,this.succeeded=!1,this._networkTimedOut=!1,this._networkTimeout=null,this._iosCache=typeof iOSCallObjectBundleCache<"u"&&iOSCallObjectBundleCache,this._refetchHeaders=null,this._dailyConfig=a,this._successCallback=c,this._failureCallback=l}var e,n,r,i;return ge(t,[{key:"start",value:(i=D(function*(){var a=Kt(this._dailyConfig);!(yield this._tryLoadFromIOSCache(a))&&this._loadFromNetwork(a)}),function(){return i.apply(this,arguments)})},{key:"cancel",value:function(){clearTimeout(this._networkTimeout),this.cancelled=!0}},{key:"_tryLoadFromIOSCache",value:(r=D(function*(a){if(!this._iosCache)return!1;try{var c=yield this._iosCache.get(a);return!!this.cancelled||!!c&&(c.code?(Function('"use strict";'+c.code)(),this.succeeded=!0,this._successCallback(),!0):(this._refetchHeaders=c.refetchHeaders,!1))}catch{return!1}}),function(a){return r.apply(this,arguments)})},{key:"_loadFromNetwork",value:(n=D(function*(a){var c=this;this._networkTimeout=setTimeout(function(){c._networkTimedOut=!0,c._failureCallback({msg:"Timed out (>".concat(rn," ms) when loading call object bundle ").concat(a),type:"timeout"})},rn);try{var l=this._refetchHeaders?{headers:this._refetchHeaders}:{},u=yield fetch(a,l);if(clearTimeout(this._networkTimeout),this.cancelled||this._networkTimedOut)throw new Sn;var m=yield this._getBundleCodeFromResponse(a,u);if(this.cancelled)throw new Sn;Function('"use strict";'+m)(),this._iosCache&&this._iosCache.set(a,m,u.headers),this.succeeded=!0,this._successCallback()}catch(h){if(clearTimeout(this._networkTimeout),h instanceof Sn||this.cancelled||this._networkTimedOut)return;this._failureCallback({msg:"Failed to load call object bundle ".concat(a,": ").concat(h),type:h.message})}}),function(a){return n.apply(this,arguments)})},{key:"_getBundleCodeFromResponse",value:(e=D(function*(a,c){if(c.ok)return yield c.text();if(this._iosCache&&c.status===304)return(yield this._iosCache.renew(a,c.headers)).code;throw new Error("Received ".concat(c.status," response"))}),function(a,c){return e.apply(this,arguments)})}]),t}(),Sc=function(){function t(e,n,r){me(this,t),this.cancelled=!1,this.succeeded=!1,this._dailyConfig=e,this._successCallback=n,this._failureCallback=r,this._attemptId=cn(),this._networkTimeout=null,this._scriptElement=null}return ge(t,[{key:"start",value:function(){window._dailyCallMachineLoadWaitlist||(window._dailyCallMachineLoadWaitlist=new Set);var e=Kt(this._dailyConfig);(typeof document>"u"?"undefined":q(document))==="object"?this._startLoading(e):this._failureCallback({msg:"Call object bundle must be loaded in a DOM/web context",type:"missing context"})}},{key:"cancel",value:function(){this._stopLoading(),this.cancelled=!0}},{key:"_startLoading",value:function(e){var n=this;this._signUpForCallMachineLoadWaitlist(),this._networkTimeout=setTimeout(function(){n._stopLoading(),n._failureCallback({msg:"Timed out (>".concat(rn," ms) when loading call object bundle ").concat(e),type:"timeout"})},rn);var r=document.getElementsByTagName("head")[0],i=document.createElement("script");this._scriptElement=i,i.onload=function(){n._stopLoading(),n.succeeded=!0,n._successCallback()},i.onerror=function(a){n._stopLoading(),n._failureCallback({msg:"Failed to load call object bundle ".concat(a.target.src),type:a.message})},i.src=e,r.appendChild(i)}},{key:"_stopLoading",value:function(){this._withdrawFromCallMachineLoadWaitlist(),clearTimeout(this._networkTimeout),this._scriptElement&&(this._scriptElement.onload=null,this._scriptElement.onerror=null)}},{key:"_signUpForCallMachineLoadWaitlist",value:function(){window._dailyCallMachineLoadWaitlist.add(this._attemptId)}},{key:"_withdrawFromCallMachineLoadWaitlist",value:function(){window._dailyCallMachineLoadWaitlist.delete(this._attemptId)}}]),t}(),Ft=function(t,e,n){return wc(t.local,e,n)===!0},Ec=function(t,e,n){return t.local.streams&&t.local.streams[e]&&t.local.streams[e].stream&&t.local.streams[e].stream["get".concat(n==="video"?"Video":"Audio","Tracks")]()[0]},Xe=function(t,e,n,r){var i=kc(t,e,n,r);return i&&i.pendingTrack},wc=function(t,e,n){if(!t)return!1;var r=function(a){switch(a){case"avatar":return!0;case"staged":return a;default:return!!a}},i=t.public.subscribedTracks;return i&&i[e]?["cam-audio","cam-video","screen-video","screen-audio","rmpAudio","rmpVideo"].indexOf(n)===-1&&i[e].custom?[!0,"staged"].includes(i[e].custom)?r(i[e].custom):r(i[e].custom[n]):r(i[e][n]):!i||r(i.ALL)},kc=function(t,e,n,r){var i=Object.values(t.streams||{}).filter(function(a){return a.participantId===e&&a.type===n&&a.pendingTrack&&a.pendingTrack.kind===r}).sort(function(a,c){return new Date(c.starttime)-new Date(a.starttime)});return i&&i[0]},Tc=function(t,e){var n=t.local.public.customTracks;if(n&&n[e])return n[e].track};function Ti(t,e){for(var n=e.getState(),r=0,i=["cam","screen"];r<i.length;r++)for(var a=i[r],c=0,l=["video","audio"];c<l.length;c++){var u=l[c],m=a==="cam"?u:"screen".concat(u.charAt(0).toUpperCase()+u.slice(1)),h=t.tracks[m];if(h){var p=t.local?Ec(n,a,u):Xe(n,t.session_id,a,u);h.state==="playable"&&(h.track=p),h.persistentTrack=p}}}function Ci(t,e){try{var n=e.getState();for(var r in t.tracks)if(!Cc(r)){var i=t.tracks[r].kind;if(i){var a=t.tracks[r];if(a){var c=t.local?Tc(n,r):Xe(n,t.session_id,r,i);a.state==="playable"&&(t.tracks[r].track=c),a.persistentTrack=c}}else console.error("unknown type for custom track")}}catch(l){console.error(l)}}function Cc(t){return["video","audio","screenVideo","screenAudio"].includes(t)}function Mi(t,e,n){var r=n.getState();if(t.local){if(t.audio)try{t.audioTrack=r.local.streams.cam.stream.getAudioTracks()[0],t.audioTrack||(t.audio=!1)}catch{}if(t.video)try{t.videoTrack=r.local.streams.cam.stream.getVideoTracks()[0],t.videoTrack||(t.video=!1)}catch{}if(t.screen)try{t.screenVideoTrack=r.local.streams.screen.stream.getVideoTracks()[0],t.screenAudioTrack=r.local.streams.screen.stream.getAudioTracks()[0],t.screenVideoTrack||t.screenAudioTrack||(t.screen=!1)}catch{}}else{var i=!0;try{var a=r.participants[t.session_id];a&&a.public&&a.public.rtcType&&a.public.rtcType.impl==="peer-to-peer"&&a.private&&!["connected","completed"].includes(a.private.peeringState)&&(i=!1)}catch(h){console.error(h)}if(!i)return t.audio=!1,t.audioTrack=!1,t.video=!1,t.videoTrack=!1,t.screen=!1,void(t.screenTrack=!1);try{if(r.streams,t.audio&&Ft(r,t.session_id,"cam-audio")){var c=Xe(r,t.session_id,"cam","audio");c&&(e&&e.audioTrack&&e.audioTrack.id===c.id?t.audioTrack=c:c.muted||(t.audioTrack=c)),t.audioTrack||(t.audio=!1)}if(t.video&&Ft(r,t.session_id,"cam-video")){var l=Xe(r,t.session_id,"cam","video");l&&(e&&e.videoTrack&&e.videoTrack.id===l.id?t.videoTrack=l:l.muted||(t.videoTrack=l)),t.videoTrack||(t.video=!1)}if(t.screen&&Ft(r,t.session_id,"screen-audio")){var u=Xe(r,t.session_id,"screen","audio");u&&(e&&e.screenAudioTrack&&e.screenAudioTrack.id===u.id?t.screenAudioTrack=u:u.muted||(t.screenAudioTrack=u))}if(t.screen&&Ft(r,t.session_id,"screen-video")){var m=Xe(r,t.session_id,"screen","video");m&&(e&&e.screenVideoTrack&&e.screenVideoTrack.id===m.id?t.screenVideoTrack=m:m.muted||(t.screenVideoTrack=m))}t.screenVideoTrack||t.screenAudioTrack||(t.screen=!1)}catch(h){console.error("unexpected error matching up tracks",h)}}}function Mc(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(u,m){if(u){if(typeof u=="string")return Ai(u,m);var h=Object.prototype.toString.call(u).slice(8,-1);if(h==="Object"&&u.constructor&&(h=u.constructor.name),h==="Map"||h==="Set")return Array.from(u);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return Ai(u,m)}}(t))||e){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,c=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var u=n.next();return c=u.done,u},e:function(u){l=!0,a=u},f:function(){try{c||n.return==null||n.return()}finally{if(l)throw a}}}}function Ai(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var be=new Map,st=null;function Ac(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(u,m){if(u){if(typeof u=="string")return Oi(u,m);var h=Object.prototype.toString.call(u).slice(8,-1);if(h==="Object"&&u.constructor&&(h=u.constructor.name),h==="Map"||h==="Set")return Array.from(u);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return Oi(u,m)}}(t))||e){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,c=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var u=n.next();return c=u.done,u},e:function(u){l=!0,a=u},f:function(){try{c||n.return==null||n.return()}finally{if(l)throw a}}}}function Oi(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Se=new Map,yt=null,Oc=3e3;function Lc(t){va()?function(e){be.has(e)||(be.set(e,{}),navigator.mediaDevices.enumerateDevices().then(function(n){be.has(e)&&(be.get(e).lastDevicesString=JSON.stringify(n),st||(st=function(){var r=D(function*(){var i,a=yield navigator.mediaDevices.enumerateDevices(),c=Mc(be.keys());try{for(c.s();!(i=c.n()).done;){var l=i.value,u=JSON.stringify(a);u!==be.get(l).lastDevicesString&&(be.get(l).lastDevicesString=u,l(a))}}catch(m){c.e(m)}finally{c.f()}});return function(){return r.apply(this,arguments)}}(),navigator.mediaDevices.addEventListener("devicechange",st)))}).catch(function(){}))}(t):function(e){Se.has(e)||(Se.set(e,{}),navigator.mediaDevices.enumerateDevices().then(function(n){Se.has(e)&&(Se.get(e).lastDevicesString=JSON.stringify(n),yt||(yt=setInterval(D(function*(){var r,i=yield navigator.mediaDevices.enumerateDevices(),a=Ac(Se.keys());try{for(a.s();!(r=a.n()).done;){var c=r.value,l=JSON.stringify(i);l!==Se.get(c).lastDevicesString&&(Se.get(c).lastDevicesString=l,c(i))}}catch(u){a.e(u)}finally{a.f()}}),Oc)))}))}(t)}function Pc(t){va()?function(e){be.has(e)&&(be.delete(e),be.size===0&&st&&(navigator.mediaDevices.removeEventListener("devicechange",st),st=null))}(t):function(e){Se.has(e)&&(Se.delete(e),Se.size===0&&yt&&(clearInterval(yt),yt=null))}(t)}function va(){return V()||navigator.mediaDevices.ondevicechange!==void 0}var Dc=new Set;function Ic(t,e){return t&&t.readyState==="live"&&!function(n,r){return n.muted&&!Dc.has(n.id)}(t)}var _e,Nc=["videoTrack"],Rc=["result"],jc=["preserveIframe"];function Li(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function N(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Li(Object(n),!0).forEach(function(r){Le(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Li(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xc(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=pe(t);if(e){var i=pe(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return on(this,n)}}function Pi(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(u,m){if(u){if(typeof u=="string")return Di(u,m);var h=Object.prototype.toString.call(u).slice(8,-1);if(h==="Object"&&u.constructor&&(h=u.constructor.name),h==="Map"||h==="Set")return Array.from(u);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return Di(u,m)}}(t))||e){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,c=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var u=n.next();return c=u.done,u},e:function(u){l=!0,a=u},f:function(){try{c||n.return==null||n.return()}finally{if(l)throw a}}}}function Di(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Ii="video",Fc="voice",Ni=V()?{data:{}}:{data:{},topology:"none"},Ri={present:0,hidden:0},_a={maxBitrate:{min:1e5,max:25e5},maxFramerate:{min:1,max:30},scaleResolutionDownBy:{min:1,max:8}},En=Object.keys(_a),ji=["state","volume","simulcastEncodings"],xi={androidInCallNotification:{title:"string",subtitle:"string",iconName:"string",disableForCustomOverride:"boolean"},disableAutoDeviceManagement:{audio:"boolean",video:"boolean"}},sn={id:{iconPath:"string",iconPathDarkMode:"string",label:"string",tooltip:"string"}},Qn={id:{allow:"string",controlledBy:"'*' | 'owners' | string[]",csp:"string",iconURL:"string",label:"string",loading:"'eager' | 'lazy'",location:"'main' | 'sidebar'",name:"string",referrerPolicy:"string",sandbox:"string",src:"string",srcdoc:"string",shared:"string[] | 'owners' | boolean"}},xe={customIntegrations:{validate:Ca,help:ka()},customTrayButtons:{validate:Ta,help:"customTrayButtons should be a dictionary of the type ".concat(JSON.stringify(sn))},url:{validate:function(t){return typeof t=="string"},help:"url should be a string"},baseUrl:{validate:function(t){return typeof t=="string"},help:"baseUrl should be a string"},token:{validate:function(t){return typeof t=="string"},help:"token should be a string",queryString:"t"},dailyConfig:{validate:function(t,e){try{return e.validateDailyConfig(t),!0}catch(n){console.error("Failed to validate dailyConfig",n)}return!1},help:"Unsupported dailyConfig. Check error logs for detailed info."},reactNativeConfig:{validate:function(t){return Ma(t,xi)},help:"reactNativeConfig should look like ".concat(JSON.stringify(xi),", all fields optional")},lang:{validate:function(t){return["de","en-us","en","es","fi","fr","it","jp","ka","nl","no","pl","pt","pt-BR","ru","sv","tr","user"].includes(t)},help:"language not supported. Options are: de, en-us, en, es, fi, fr, it, jp, ka, nl, no, pl, pt, pt-BR, ru, sv, tr, user"},userName:!0,userData:{validate:function(t){try{return ya(t),!0}catch(e){return console.error(e),!1}},help:"invalid userData type provided"},startVideoOff:!0,startAudioOff:!0,activeSpeakerMode:!0,showLeaveButton:!0,showLocalVideo:!0,showParticipantsBar:!0,showFullscreenButton:!0,showUserNameChangeUI:!0,iframeStyle:!0,customLayout:!0,cssFile:!0,cssText:!0,bodyClass:!0,videoSource:{validate:function(t,e){return t instanceof MediaStreamTrack&&(e._sharedTracks.videoDeviceId=t),e._preloadCache.videoDeviceId=t,!0}},audioSource:{validate:function(t,e){return t instanceof MediaStreamTrack&&(e._sharedTracks.audioDeviceId=t),e._preloadCache.audioDeviceId=t,!0}},subscribeToTracksAutomatically:{validate:function(t,e){return e._preloadCache.subscribeToTracksAutomatically=t,!0}},theme:{validate:function(t){var e=["accent","accentText","background","backgroundAccent","baseText","border","mainAreaBg","mainAreaBgAccent","mainAreaText","supportiveText"],n=function(r){for(var i=0,a=Object.keys(r);i<a.length;i++){var c=a[i];if(!e.includes(c))return console.error('unsupported color "'.concat(c,'". Valid colors: ').concat(e.join(", "))),!1;if(!r[c].match(/^#[0-9a-f]{6}|#[0-9a-f]{3}$/i))return console.error("".concat(c,' theme color should be provided in valid hex color format. Received: "').concat(r[c],'"')),!1}return!0};return q(t)==="object"&&("light"in t&&"dark"in t||"colors"in t)?"light"in t&&"dark"in t?"colors"in t.light?"colors"in t.dark?n(t.light.colors)&&n(t.dark.colors):(console.error('Dark theme is missing "colors" property.',t),!1):(console.error('Light theme is missing "colors" property.',t),!1):n(t.colors):(console.error('Theme must contain either both "light" and "dark" properties, or "colors".',t),!1)},help:"unsupported theme configuration. Check error logs for detailed info."},layoutConfig:{validate:function(t){if("grid"in t){var e=t.grid;if("maxTilesPerPage"in e){if(!Number.isInteger(e.maxTilesPerPage))return console.error("grid.maxTilesPerPage should be an integer. You passed ".concat(e.maxTilesPerPage,".")),!1;if(e.maxTilesPerPage>49)return console.error("grid.maxTilesPerPage can't be larger than 49 without sacrificing browser performance. Please contact us at https://www.daily.co/contact to talk about your use case."),!1}if("minTilesPerPage"in e){if(!Number.isInteger(e.minTilesPerPage))return console.error("grid.minTilesPerPage should be an integer. You passed ".concat(e.minTilesPerPage,".")),!1;if(e.minTilesPerPage<1)return console.error("grid.minTilesPerPage can't be lower than 1."),!1;if("maxTilesPerPage"in e&&e.minTilesPerPage>e.maxTilesPerPage)return console.error("grid.minTilesPerPage can't be higher than grid.maxTilesPerPage."),!1}}return!0},help:"unsupported layoutConfig. Check error logs for detailed info."},receiveSettings:{validate:function(t){return ba(t,{allowAllParticipantsKey:!1})},help:wa({allowAllParticipantsKey:!1})},sendSettings:{validate:function(t,e){return!!function(n,r){try{return r.validateUpdateSendSettings(n),!0}catch(i){return console.error("Failed to validate send settings",i),!1}}(t,e)&&(e._preloadCache.sendSettings=t,!0)},help:"Invalid sendSettings provided. Check error logs for detailed info."},inputSettings:{validate:function(t,e){var n;return!!Sa(t)&&(e._preloadCache.inputSettings||(e._preloadCache.inputSettings={}),Ea(t,(n=e.properties)===null||n===void 0?void 0:n.dailyConfig),t.audio&&(e._preloadCache.inputSettings.audio=t.audio),t.video&&(e._preloadCache.inputSettings.video=t.video),!0)},help:Xn()},layout:{validate:function(t){return t==="custom-v1"||t==="browser"||t==="none"},help:'layout may only be set to "custom-v1"',queryString:"layout"},emb:{queryString:"emb"},embHref:{queryString:"embHref"},dailyJsVersion:{queryString:"dailyJsVersion"},proxy:{queryString:"proxy"},strictMode:!0},Ut={styles:{validate:function(t){for(var e in t)if(e!=="cam"&&e!=="screen")return!1;if(t.cam){for(var n in t.cam)if(n!=="div"&&n!=="video")return!1}if(t.screen){for(var r in t.screen)if(r!=="div"&&r!=="video")return!1}return!0},help:"styles format should be a subset of: { cam: {div: {}, video: {}}, screen: {div: {}, video: {}} }"},setSubscribedTracks:{validate:function(t,e){if(e._preloadCache.subscribeToTracksAutomatically)return!1;var n=[!0,!1,"staged"];if(n.includes(t)||!V()&&t==="avatar")return!0;var r=["audio","video","screenAudio","screenVideo","rmpAudio","rmpVideo"];return function i(a){var c=arguments.length>1&&arguments[1]!==void 0&&arguments[1];for(var l in a)if(l==="custom"){if(!n.includes(a[l])&&!i(a[l],!0))return!1}else{var u=!c&&!r.includes(l),m=!n.includes(a[l]);if(u||m)return!1}return!0}(t)},help:"setSubscribedTracks cannot be used when setSubscribeToTracksAutomatically is enabled, and should be of the form: "+"true".concat(V()?"":" | 'avatar'"," | false | 'staged' | { [audio: true|false|'staged'], [video: true|false|'staged'], [screenAudio: true|false|'staged'], [screenVideo: true|false|'staged'] }")},setAudio:!0,setVideo:!0,setScreenShare:{validate:function(t){return t===!1},help:"setScreenShare must be false, as it's only meant for stopping remote participants' screen shares"},eject:!0,updatePermissions:{validate:function(t){for(var e=0,n=Object.entries(t);e<n.length;e++){var r=$e(n[e],2),i=r[0],a=r[1];switch(i){case"hasPresence":if(typeof a!="boolean")return!1;break;case"canSend":if(a instanceof Set||a instanceof Array){var c,l=["video","audio","screenVideo","screenAudio","customVideo","customAudio"],u=Pi(a);try{for(u.s();!(c=u.n()).done;){var m=c.value;if(!l.includes(m))return!1}}catch(S){u.e(S)}finally{u.f()}}else if(typeof a!="boolean")return!1;a instanceof Array&&(t.canSend=new Set(a));break;case"canAdmin":if(a instanceof Set||a instanceof Array){var h,p=["participants","streaming","transcription"],v=Pi(a);try{for(v.s();!(h=v.n()).done;){var k=h.value;if(!p.includes(k))return!1}}catch(S){v.e(S)}finally{v.f()}}else if(typeof a!="boolean")return!1;a instanceof Array&&(t.canAdmin=new Set(a));break;default:return!1}}return!0},help:"updatePermissions can take hasPresence, canSend, and canAdmin permissions. hasPresence must be a boolean. canSend can be a boolean or an Array or Set of media types (video, audio, screenVideo, screenAudio, customVideo, customAudio). canAdmin can be a boolean or an Array or Set of admin types (participants, streaming, transcription)."}};Promise.any||(Promise.any=function(){var t=D(function*(e){return new Promise(function(n,r){var i=[];e.forEach(function(a){return Promise.resolve(a).then(function(c){n(c)}).catch(function(c){i.push(c),i.length===e.length&&r(i)})})})});return function(e){return t.apply(this,arguments)}}());var Uc=function(t){an(ce,Me);var e,n,r,i,a,c,l,u,m,h,p,v,k,S,w,T,I,J,z,E,b,C,O,L,U,j,re,Ae,ut,At,dr,hr,pr,fr,mr,gr,Oa=xc(ce);function ce(s){var o,d,f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(me(this,ce),Le(we(o=Oa.call(this)),"startListeningForDeviceChanges",function(){Lc(o.handleDeviceChange)}),Le(we(o),"stopListeningForDeviceChanges",function(){Pc(o.handleDeviceChange)}),Le(we(o),"handleDeviceChange",function(_){_=_.map(function(M){return JSON.parse(JSON.stringify(M))}),o.emit(fi,{action:fi,availableDevices:_})}),Le(we(o),"handleNativeAppStateChange",function(){var _=D(function*(M){if(M==="destroyed")return console.warn("App has been destroyed before leaving the meeting. Cleaning up all the resources!"),void(yield o.destroy());var A=M==="active";o.disableReactNativeAutoDeviceManagement("video")||(A?o.camUnmutedBeforeLosingNativeActiveState&&o.setLocalVideo(!0):(o.camUnmutedBeforeLosingNativeActiveState=o.localVideo(),o.camUnmutedBeforeLosingNativeActiveState&&o.setLocalVideo(!1)))});return function(M){return _.apply(this,arguments)}}()),Le(we(o),"handleNativeAudioFocusChange",function(_){o.disableReactNativeAutoDeviceManagement("audio")||(o._hasNativeAudioFocus=_,o.toggleParticipantAudioBasedOnNativeAudioFocus(),o._hasNativeAudioFocus?o.micUnmutedBeforeLosingNativeAudioFocus&&o.setLocalAudio(!0):(o.micUnmutedBeforeLosingNativeAudioFocus=o.localAudio(),o.setLocalAudio(!1)))}),Le(we(o),"handleNativeSystemScreenCaptureStop",function(){o.stopScreenShare()}),o.strictMode=f.strictMode===void 0||f.strictMode,_e){if(o._logDuplicateInstanceAttempt(),o.strictMode)throw new Error("Duplicate DailyIframe instances are not allowed")}else d=we(o),_e=d;if(window._daily||(window._daily={pendings:[],instances:{}}),o._callFrameId=cn(),window._daily.instances[o._callFrameId]={},o._sharedTracks={},window._daily.instances[o._callFrameId].tracks=o._sharedTracks,f.dailyJsVersion=ce.version(),o._iframe=s,o._callObjectMode=f.layout==="none"&&!o._iframe,o._preloadCache={subscribeToTracksAutomatically:!0,audioDeviceId:null,videoDeviceId:null,outputDeviceId:null,inputSettings:null,sendSettings:null,videoTrackForNetworkConnectivityTest:null,videoTrackForConnectionQualityTest:null},f.showLocalVideo!==void 0?o._callObjectMode?console.error("showLocalVideo is not available in call object mode"):o._showLocalVideo=!!f.showLocalVideo:o._showLocalVideo=!0,f.showParticipantsBar!==void 0?o._callObjectMode?console.error("showParticipantsBar is not available in call object mode"):o._showParticipantsBar=!!f.showParticipantsBar:o._showParticipantsBar=!0,f.customIntegrations!==void 0?o._callObjectMode?console.error("customIntegrations is not available in call object mode"):o._customIntegrations=f.customIntegrations:o._customIntegrations={},f.customTrayButtons!==void 0?o._callObjectMode?console.error("customTrayButtons is not available in call object mode"):o._customTrayButtons=f.customTrayButtons:o._customTrayButtons={},f.activeSpeakerMode!==void 0?o._callObjectMode?console.error("activeSpeakerMode is not available in call object mode"):o._activeSpeakerMode=!!f.activeSpeakerMode:o._activeSpeakerMode=!1,f.receiveSettings?o._callObjectMode?o._receiveSettings=f.receiveSettings:console.error("receiveSettings is only available in call object mode"):o._receiveSettings={},o.validateProperties(f),o.properties=N({},f),o._preloadCache.inputSettings||(o._preloadCache.inputSettings={}),f.inputSettings&&f.inputSettings.audio&&(o._preloadCache.inputSettings.audio=f.inputSettings.audio),f.inputSettings&&f.inputSettings.video&&(o._preloadCache.inputSettings.video=f.inputSettings.video),o._callObjectLoader=o._callObjectMode?new _c(o._callFrameId):null,o._callState=xn,o._isPreparingToJoin=!1,o._accessState={access:Yt},o._meetingSessionSummary={},o._finalSummaryOfPrevSession={},o._meetingSessionState=kn(Ni,o._callObjectMode),o._nativeInCallAudioMode=Ii,o._participants={},o._isScreenSharing=!1,o._participantCounts=Ri,o._rmpPlayerState={},o._waitingParticipants={},o._network={threshold:"good",quality:100},o._activeSpeaker={},o._localAudioLevel=0,o._remoteParticipantsAudioLevel={},o._messageChannel=V()?new mc:new pc,o._iframe&&(o._iframe.requestFullscreen?o._iframe.addEventListener("fullscreenchange",function(){document.fullscreenElement===o._iframe?(o.emit(Ue,{action:Ue}),o.sendMessageToCallMachine({action:Ue})):(o.emit(Be,{action:Be}),o.sendMessageToCallMachine({action:Be}))}):o._iframe.webkitRequestFullscreen&&o._iframe.addEventListener("webkitfullscreenchange",function(){document.webkitFullscreenElement===o._iframe?(o.emit(Ue,{action:Ue}),o.sendMessageToCallMachine({action:Ue})):(o.emit(Be,{action:Be}),o.sendMessageToCallMachine({action:Be}))})),V()){var g=o.nativeUtils();g.addAudioFocusChangeListener&&g.removeAudioFocusChangeListener&&g.addAppStateChangeListener&&g.removeAppStateChangeListener&&g.addSystemScreenCaptureStopListener&&g.removeSystemScreenCaptureStopListener||console.warn("expected (add|remove)(AudioFocusChange|AppActiveStateChange|SystemScreenCaptureStop)Listener to be available in React Native"),o._hasNativeAudioFocus=!0,g.addAudioFocusChangeListener(o.handleNativeAudioFocusChange),g.addAppStateChangeListener(o.handleNativeAppStateChange),g.addSystemScreenCaptureStopListener(o.handleNativeSystemScreenCaptureStop)}return o._callObjectMode&&o.startListeningForDeviceChanges(),o._messageChannel.addListenerForMessagesFromCallMachine(o.handleMessageFromCallMachine,o._callFrameId,we(o)),o}return ge(ce,[{key:"destroy",value:(gr=D(function*(){var s,o;try{yield this.leave()}catch{}var d=this._iframe;if(d){var f=d.parentElement;f&&f.removeChild(d)}if(this._messageChannel.removeListener(this.handleMessageFromCallMachine),V()){var g=this.nativeUtils();g.removeAudioFocusChangeListener(this.handleNativeAudioFocusChange),g.removeAppStateChangeListener(this.handleNativeAppStateChange),g.removeSystemScreenCaptureStopListener(this.handleNativeSystemScreenCaptureStop)}this._callObjectMode&&this.stopListeningForDeviceChanges(),this.resetMeetingDependentVars(),this._destroyed=!0;try{this.emit("call-instance-destroyed",{action:"call-instance-destroyed"})}catch{console.log("could not emit call-instance-destroyed")}_e=void 0,!((s=window)===null||s===void 0||(o=s._daily)===null||o===void 0)&&o.instances&&delete window._daily.instances[this._callFrameId],this.strictMode&&(this._callFrameId=void 0)}),function(){return gr.apply(this,arguments)})},{key:"isDestroyed",value:function(){return!!this._destroyed}},{key:"loadCss",value:function(s){var o=s.bodyClass,d=s.cssFile,f=s.cssText;return F(),this.sendMessageToCallMachine({action:"load-css",cssFile:this.absoluteUrl(d),bodyClass:o,cssText:f}),this}},{key:"iframe",value:function(){return F(),this._iframe}},{key:"meetingState",value:function(){return this._callState}},{key:"accessState",value:function(){return ye(this._callObjectMode,"accessState()"),this._accessState}},{key:"participants",value:function(){return this._participants}},{key:"participantCounts",value:function(){return this._participantCounts}},{key:"waitingParticipants",value:function(){return ye(this._callObjectMode,"waitingParticipants()"),this._waitingParticipants}},{key:"validateParticipantProperties",value:function(s,o){for(var d in o){if(!Ut[d])throw new Error("unrecognized updateParticipant property ".concat(d));if(Ut[d].validate&&!Ut[d].validate(o[d],this,this._participants[s]))throw new Error(Ut[d].help)}}},{key:"updateParticipant",value:function(s,o){return this._participants.local&&this._participants.local.session_id===s&&(s="local"),s&&o&&(this.validateParticipantProperties(s,o),this.sendMessageToCallMachine({action:"update-participant",id:s,properties:o})),this}},{key:"updateParticipants",value:function(s){var o=this._participants.local&&this._participants.local.session_id;for(var d in s)d===o&&(d="local"),d&&s[d]&&this.validateParticipantProperties(d,s[d]);return this.sendMessageToCallMachine({action:"update-participants",participants:s}),this}},{key:"updateWaitingParticipant",value:(mr=D(function*(){var s=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(ye(this._callObjectMode,"updateWaitingParticipant()"),W(this._callState,"updateWaitingParticipant()"),typeof o!="string"||q(d)!=="object")throw new Error("updateWaitingParticipant() must take an id string and a updates object");return new Promise(function(f,g){s.sendMessageToCallMachine({action:"daily-method-update-waiting-participant",id:o,updates:d},function(_){_.error&&g(_.error),_.id||g(new Error("unknown error in updateWaitingParticipant()")),f({id:_.id})})})}),function(){return mr.apply(this,arguments)})},{key:"updateWaitingParticipants",value:(fr=D(function*(){var s=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(ye(this._callObjectMode,"updateWaitingParticipants()"),W(this._callState,"updateWaitingParticipants()"),q(o)!=="object")throw new Error("updateWaitingParticipants() must take a mapping between ids and update objects");return new Promise(function(d,f){s.sendMessageToCallMachine({action:"daily-method-update-waiting-participants",updatesById:o},function(g){g.error&&f(g.error),g.ids||f(new Error("unknown error in updateWaitingParticipants()")),d({ids:g.ids})})})}),function(){return fr.apply(this,arguments)})},{key:"requestAccess",value:(pr=D(function*(){var s=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=o.access,f=d===void 0?{level:_s}:d,g=o.name,_=g===void 0?"":g;return ye(this._callObjectMode,"requestAccess()"),W(this._callState,"requestAccess()"),new Promise(function(M,A){s.sendMessageToCallMachine({action:"daily-method-request-access",access:f,name:_},function(x){x.error&&A(x.error),x.access||A(new Error("unknown error in requestAccess()")),M({access:x.access,granted:x.granted})})})}),function(){return pr.apply(this,arguments)})},{key:"localAudio",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.audio.state):null}},{key:"localVideo",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.video.state):null}},{key:"setLocalAudio",value:function(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return"forceDiscardTrack"in o&&(V()?(console.warn("forceDiscardTrack option not supported in React Native; ignoring"),o={}):s&&(console.warn("forceDiscardTrack option only supported when calling setLocalAudio(false); ignoring"),o={})),this.sendMessageToCallMachine({action:"local-audio",state:s,options:o}),this}},{key:"localScreenAudio",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.screenAudio.state):null}},{key:"localScreenVideo",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.screenVideo.state):null}},{key:"updateScreenShare",value:function(s){if(this._isScreenSharing)return this.sendMessageToCallMachine({action:"local-screen-update",options:s}),this;console.warn("There is no screen share in progress. Try calling startScreenShare first.")}},{key:"setLocalVideo",value:function(s){return this.sendMessageToCallMachine({action:"local-video",state:s}),this}},{key:"getReceiveSettings",value:(hr=D(function*(s){var o=this,d=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).showInheritedValues,f=d!==void 0&&d;if(ye(this._callObjectMode,"getReceiveSettings()"),!this._callMachineInitialized)return this._receiveSettings;switch(q(s)){case"string":return new Promise(function(g){o.sendMessageToCallMachine({action:"get-single-participant-receive-settings",id:s,showInheritedValues:f},function(_){g(_.receiveSettings)})});case"undefined":return this._receiveSettings;default:throw new Error('first argument to getReceiveSettings() must be a participant id (or "base"), or there should be no arguments')}}),function(s){return hr.apply(this,arguments)})},{key:"updateReceiveSettings",value:(dr=D(function*(s){var o=this;if(ye(this._callObjectMode,"updateReceiveSettings()"),!ba(s,{allowAllParticipantsKey:!0}))throw new Error(wa({allowAllParticipantsKey:!0}));return W(this._callState,"updateReceiveSettings()","To specify receive settings earlier, use the receiveSettings config property."),new Promise(function(d){o.sendMessageToCallMachine({action:"update-receive-settings",receiveSettings:s},function(f){d({receiveSettings:f.receiveSettings})})})}),function(s){return dr.apply(this,arguments)})},{key:"_prepInputSettingsToPresentToUser",value:function(s){var o,d,f,g,_,M,A,x;if(s){var Q={},Z=((o=s.audio)===null||o===void 0||(d=o.processor)===null||d===void 0?void 0:d.type)==="none"&&((f=s.audio)===null||f===void 0||(g=f.processor)===null||g===void 0?void 0:g._isDefaultWhenNone);if(s.audio&&!Z){var ee=N({},s.audio.processor);delete ee._isDefaultWhenNone,Q.audio=N(N({},s.audio),{},{processor:ee})}var le=((_=s.video)===null||_===void 0||(M=_.processor)===null||M===void 0?void 0:M.type)==="none"&&((A=s.video)===null||A===void 0||(x=A.processor)===null||x===void 0?void 0:x._isDefaultWhenNone);if(s.video&&!le){var K=N({},s.video.processor);delete K._isDefaultWhenNone,Q.video=N(N({},s.video),{},{processor:K})}return Q}}},{key:"getInputSettings",value:function(){var s=this;return F(),new Promise(function(o){o(s._getInputSettings())})}},{key:"_getInputSettings",value:function(){var s,o,d,f,g,_,M,A,x={processor:{type:"none",_isDefaultWhenNone:!0}};this._inputSettings?(s=((d=this._inputSettings)===null||d===void 0?void 0:d.video)||x,o=((f=this._inputSettings)===null||f===void 0?void 0:f.audio)||x):(s=((g=this._preloadCache)===null||g===void 0||(_=g.inputSettings)===null||_===void 0?void 0:_.video)||x,o=((M=this._preloadCache)===null||M===void 0||(A=M.inputSettings)===null||A===void 0?void 0:A.audio)||x);var Q={audio:o,video:s};return this._prepInputSettingsToPresentToUser(Q)}},{key:"updateInputSettings",value:(At=D(function*(s){var o=this;return F(),Sa(s)?(s&&(this._preloadCache.inputSettings||(this._preloadCache.inputSettings={}),Ea(s,this.properties.dailyConfig),s.audio&&(this._preloadCache.inputSettings.audio=s.audio),s.video&&(this._preloadCache.inputSettings.video=s.video)),s.video||s.audio?this._callObjectMode&&!this._callMachineInitialized?this._getInputSettings():new Promise(function(d,f){o.sendMessageToCallMachine({action:"update-input-settings",inputSettings:s},function(g){g.error?f(g.error):d({inputSettings:o._prepInputSettingsToPresentToUser(g.inputSettings)})})}):this._getInputSettings()):(console.error(Xn()),Promise.reject(Xn()))}),function(s){return At.apply(this,arguments)})},{key:"setBandwidth",value:function(s){var o=s.kbs,d=s.trackConstraints;if(F(),this._callMachineInitialized)return this.sendMessageToCallMachine({action:"set-bandwidth",kbs:o,trackConstraints:d}),this}},{key:"getDailyLang",value:function(){var s=this;if(F(),this._callMachineInitialized)return new Promise(function(o){s.sendMessageToCallMachine({action:"get-daily-lang"},function(d){delete d.action,delete d.callbackStamp,o(d)})})}},{key:"setDailyLang",value:function(s){return F(),this.sendMessageToCallMachine({action:"set-daily-lang",lang:s}),this}},{key:"setProxyUrl",value:function(s){return this.sendMessageToCallMachine({action:"set-proxy-url",proxyUrl:s}),this}},{key:"setIceConfig",value:function(s){return this.sendMessageToCallMachine({action:"set-ice-config",iceConfig:s}),this}},{key:"meetingSessionSummary",value:function(){return[ke,Te].includes(this._callState)?this._finalSummaryOfPrevSession:this._meetingSessionSummary}},{key:"getMeetingSession",value:(ut=D(function*(){var s=this;return console.warn("getMeetingSession() is deprecated: use meetingSessionSummary(), which will return immediately"),W(this._callState,"getMeetingSession()"),new Promise(function(o){s.sendMessageToCallMachine({action:"get-meeting-session"},function(d){delete d.action,delete d.callbackStamp,delete d.callFrameId,o(d)})})}),function(){return ut.apply(this,arguments)})},{key:"meetingSessionState",value:function(){return W(this._callState,"meetingSessionState"),this._meetingSessionState}},{key:"setMeetingSessionData",value:function(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"replace";ye(this._callObjectMode,"setMeetingSessionData()"),W(this._callState,"setMeetingSessionData");try{(function(d,f){new gc({data:d,mergeStrategy:f})})(s,o)}catch(d){throw console.error(d),d}try{this.sendMessageToCallMachine({action:"set-session-data",data:s,mergeStrategy:o})}catch(d){throw new Error("Error setting meeting session data: ".concat(d))}}},{key:"setUserName",value:function(s,o){var d=this;return this.properties.userName=s,new Promise(function(f){d.sendMessageToCallMachine({action:"set-user-name",name:s??"",thisMeetingOnly:V()||!!o&&!!o.thisMeetingOnly},function(g){delete g.action,delete g.callbackStamp,f(g)})})}},{key:"setUserData",value:(Ae=D(function*(s){var o=this;try{ya(s)}catch(d){throw console.error(d),d}if(this.properties.userData=s,this._callMachineInitialized)return new Promise(function(d){try{o.sendMessageToCallMachine({action:"set-user-data",userData:s},function(f){delete f.action,delete f.callbackStamp,delete f.callFrameId,d(f)})}catch(f){throw new Error("Error setting user data: ".concat(f))}})}),function(s){return Ae.apply(this,arguments)})},{key:"validateAudioLevelInterval",value:function(s){if(s&&(s<100||typeof s!="number"))throw new Error("The interval must be a number greater than or equal to 100 milliseconds.")}},{key:"startLocalAudioLevelObserver",value:function(s){var o=this;if(typeof AudioWorkletNode>"u"&&!V())throw new Error("startLocalAudioLevelObserver() is not supported on this browser");if(this.validateAudioLevelInterval(s),this._callMachineInitialized)return new Promise(function(d,f){o.sendMessageToCallMachine({action:"start-local-audio-level-observer",interval:s},function(g){g.error?f({error:g.error}):d()})});this._preloadCache.localAudioLevelObserver={enabled:!0,interval:s}}},{key:"stopLocalAudioLevelObserver",value:function(){this._preloadCache.localAudioLevelObserver=null,this._localAudioLevel=0,this.sendMessageToCallMachine({action:"stop-local-audio-level-observer"})}},{key:"startRemoteParticipantsAudioLevelObserver",value:function(s){var o=this;if(this.validateAudioLevelInterval(s),this._callMachineInitialized)return new Promise(function(d,f){o.sendMessageToCallMachine({action:"start-remote-participants-audio-level-observer",interval:s},function(g){g.error?f({error:g.error}):d()})});this._preloadCache.remoteParticipantsAudioLevelObserver={enabled:!0,interval:s}}},{key:"stopRemoteParticipantsAudioLevelObserver",value:function(){this._preloadCache.remoteParticipantsAudioLevelObserver=null,this._remoteParticipantsAudioLevel={},this.sendMessageToCallMachine({action:"stop-remote-participants-audio-level-observer"})}},{key:"startCamera",value:(re=D(function*(){var s=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(ye(this._callObjectMode,"startCamera()"),Fi(this._callState,this._isPreparingToJoin,"startCamera()","Did you mean to use setLocalAudio() and/or setLocalVideo() instead?"),Fe(this._testCallInProgress,"startCamera()"),this.needsLoad())try{yield this.load(o)}catch(d){return Promise.reject(d)}else{if(this._didPreAuth){if(o.url&&o.url!==this.properties.url)return console.error("url in startCamera() is different than the one used in preAuth()"),Promise.reject();if(o.token&&o.token!==this.properties.token)return console.error("token in startCamera() is different than the one used in preAuth()"),Promise.reject()}this.validateProperties(o),this.properties=N(N({},this.properties),o)}return new Promise(function(d){s.sendMessageToCallMachine({action:"start-camera",properties:Qe(s.properties,s._callFrameId),preloadCache:Qe(s._preloadCache,s._callFrameId)},function(f){delete f.action,delete f.callbackStamp,d(f)})})}),function(){return re.apply(this,arguments)})},{key:"validateCustomTrack",value:function(s,o,d){if(d&&d.length>50)throw new Error("Custom track `trackName` must not be more than 50 characters");if(o&&o!=="music"&&o!=="speech"&&!(o instanceof Object))throw new Error("Custom track `mode` must be either `music` | `speech` | `DailyMicAudioModeSettings` or `undefined`");if(d&&["cam-audio","cam-video","screen-video","screen-audio","rmpAudio","rmpVideo","customVideoDefaults"].includes(d))throw new Error("Custom track `trackName` must not match a track name already used by daily: cam-audio, cam-video, customVideoDefaults, screen-video, screen-audio, rmpAudio, rmpVideo");if(!(s instanceof MediaStreamTrack))throw new Error("Custom tracks provided must be instances of MediaStreamTrack")}},{key:"startCustomTrack",value:function(){var s=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{track,mode,trackName};return F(),W(this._callState,"startCustomTrack()"),this.validateCustomTrack(o.track,o.mode,o.trackName),new Promise(function(d,f){s._sharedTracks.customTrack=o.track,o.track=vt,s.sendMessageToCallMachine({action:"start-custom-track",properties:o},function(g){g.error?f({error:g.error}):d(g.mediaTag)})})}},{key:"stopCustomTrack",value:function(s){var o=this;return F(),W(this._callState,"stopCustomTrack()"),new Promise(function(d){o.sendMessageToCallMachine({action:"stop-custom-track",mediaTag:s},function(f){d(f.mediaTag)})})}},{key:"setCamera",value:function(s){var o=this;return ft(),wn(this._callMachineInitialized,"setCamera()"),new Promise(function(d){o.sendMessageToCallMachine({action:"set-camera",cameraDeviceId:s},function(f){d({device:f.device})})})}},{key:"setAudioDevice",value:(j=D(function*(s){return ft(),this.nativeUtils().setAudioDevice(s),{deviceId:yield this.nativeUtils().getAudioDevice()}}),function(s){return j.apply(this,arguments)})},{key:"cycleCamera",value:function(){var s=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise(function(d){s.sendMessageToCallMachine({action:"cycle-camera",properties:o},function(f){d({device:f.device})})})}},{key:"cycleMic",value:function(){var s=this;return F(),new Promise(function(o){s.sendMessageToCallMachine({action:"cycle-mic"},function(d){o({device:d.device})})})}},{key:"getCameraFacingMode",value:function(){var s=this;return ft(),new Promise(function(o){s.sendMessageToCallMachine({action:"get-camera-facing-mode"},function(d){o(d.facingMode)})})}},{key:"setInputDevicesAsync",value:(U=D(function*(s){var o=this,d=s.audioDeviceId,f=s.videoDeviceId,g=s.audioSource,_=s.videoSource;return F(),g!==void 0&&(d=g),_!==void 0&&(f=_),d&&(this._preloadCache.audioDeviceId=d,this._sharedTracks.audioDeviceId=d),f&&(this._preloadCache.videoDeviceId=f,this._sharedTracks.videoDeviceId=f),this._callObjectMode&&this.needsLoad()?{camera:{deviceId:this._preloadCache.videoDeviceId},mic:{deviceId:this._preloadCache.audioDeviceId},speaker:{deviceId:this._preloadCache.outputDeviceId}}:(d instanceof MediaStreamTrack&&(d=vt),f instanceof MediaStreamTrack&&(f=vt),new Promise(function(M){o.sendMessageToCallMachine({action:"set-input-devices",audioDeviceId:d,videoDeviceId:f},function(A){delete A.action,delete A.callbackStamp,A.returnPreloadCache?M({camera:{deviceId:o._preloadCache.videoDeviceId},mic:{deviceId:o._preloadCache.audioDeviceId},speaker:{deviceId:o._preloadCache.outputDeviceId}}):M(A)})}))}),function(s){return U.apply(this,arguments)})},{key:"setOutputDeviceAsync",value:(L=D(function*(s){var o=this,d=s.outputDeviceId;return F(),d&&(this._preloadCache.outputDeviceId=d),this._callObjectMode&&this.needsLoad()?{camera:{deviceId:this._preloadCache.videoDeviceId},mic:{deviceId:this._preloadCache.audioDeviceId},speaker:{deviceId:this._preloadCache.outputDeviceId}}:new Promise(function(f){o.sendMessageToCallMachine({action:"set-output-device",outputDeviceId:d},function(g){delete g.action,delete g.callbackStamp,g.returnPreloadCache?f({camera:{deviceId:o._preloadCache.videoDeviceId},mic:{deviceId:o._preloadCache.audioDeviceId},speaker:{deviceId:o._preloadCache.outputDeviceId}}):f(g)})})}),function(s){return L.apply(this,arguments)})},{key:"getInputDevices",value:(O=D(function*(){var s=this;return this._callObjectMode&&this.needsLoad()?{camera:{deviceId:this._preloadCache.videoDeviceId},mic:{deviceId:this._preloadCache.audioDeviceId},speaker:{deviceId:this._preloadCache.outputDeviceId}}:new Promise(function(o){s.sendMessageToCallMachine({action:"get-input-devices"},function(d){delete d.action,delete d.callbackStamp,d.returnPreloadCache?o({camera:{deviceId:s._preloadCache.videoDeviceId},mic:{deviceId:s._preloadCache.audioDeviceId},speaker:{deviceId:s._preloadCache.outputDeviceId}}):o(d)})})}),function(){return O.apply(this,arguments)})},{key:"nativeInCallAudioMode",value:function(){return ft(),this._nativeInCallAudioMode}},{key:"setNativeInCallAudioMode",value:function(s){if(ft(),[Ii,Fc].includes(s)){if(s!==this._nativeInCallAudioMode)return this._nativeInCallAudioMode=s,!this.disableReactNativeAutoDeviceManagement("audio")&&Ht(this._callState,this._isPreparingToJoin)&&this.nativeUtils().setAudioMode(this._nativeInCallAudioMode),this}else console.error("invalid in-call audio mode specified: ",s)}},{key:"preAuth",value:(C=D(function*(){var s=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(ye(this._callObjectMode,"preAuth()"),Fi(this._callState,this._isPreparingToJoin,"preAuth()"),Fe(this._testCallInProgress,"preAuth()"),this.needsLoad()&&(yield this.load(o)),!o.url)throw new Error("preAuth() requires at least a url to be provided");return this.validateProperties(o),this.properties=N(N({},this.properties),o),new Promise(function(d,f){s.sendMessageToCallMachine({action:"daily-method-preauth",properties:Qe(s.properties,s._callFrameId),preloadCache:Qe(s._preloadCache,s._callFrameId)},function(g){return g.error?f(g.error):g.access?(s._didPreAuth=!0,void d({access:g.access})):f(new Error("unknown error in preAuth()"))})})}),function(){return C.apply(this,arguments)})},{key:"load",value:(b=D(function*(s){var o=this;if(this.needsLoad()){if(this._destroyed&&(this._logUseAfterDestroy(),this.strictMode))throw new Error("Use after destroy");if(s&&(this.validateProperties(s),this.properties=N(N({},this.properties),s)),!this._callObjectMode&&!this.properties.url)throw new Error("can't load iframe meeting because url property isn't set");this._updateCallState(hi);try{this.emit(Un,{action:Un})}catch(d){console.log("could not emit 'loading'",d)}return this._callObjectMode?new Promise(function(d,f){o._callObjectLoader.cancel();var g=Date.now();o._callObjectLoader.load(o.properties.dailyConfig,function(_){o._bundleLoadTime=_?"no-op":Date.now()-g,o._updateCallState(pi),_&&o.emit(Gt,{action:Gt}),d()},function(_,M){if(o.emit(Bn,{action:Bn,error:_}),!M){o._updateCallState(Te),o.resetMeetingDependentVars();var A={action:Wt,errorMsg:_.msg,error:{type:"connection-error",msg:"Failed to load call object bundle.",details:{on:"load",sourceError:_,bundleUrl:Kt(o.properties.dailyConfig)}}};o._maybeSendToSentry(A),o.emit(Wt,A),f(_.msg)}})}):(this._iframe.src=Ki(this.assembleMeetingUrl(),this.properties.dailyConfig),new Promise(function(d,f){o._loadedCallback=function(g){o._callState!==Te?(o._updateCallState(pi),(o.properties.cssFile||o.properties.cssText)&&o.loadCss(o.properties),d()):f(g)}}))}}),function(s){return b.apply(this,arguments)})},{key:"join",value:(E=D(function*(){var s=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Fe(this._testCallInProgress,"join()");var d=!1;if(this.needsLoad()){this.updateIsPreparingToJoin(!0);try{yield this.load(o)}catch(f){return this.updateIsPreparingToJoin(!1),Promise.reject(f)}}else{if(d=!(!this.properties.cssFile&&!this.properties.cssText),this._didPreAuth){if(o.url&&o.url!==this.properties.url)return console.error("url in join() is different than the one used in preAuth()"),this.updateIsPreparingToJoin(!1),Promise.reject();if(o.token&&o.token!==this.properties.token)return console.error("token in join() is different than the one used in preAuth()"),this.updateIsPreparingToJoin(!1),Promise.reject()}if(o.url&&!this._callObjectMode&&o.url&&o.url!==this.properties.url)return console.error("url in join() is different than the one used in load() (".concat(this.properties.url," -> ").concat(o.url,")")),this.updateIsPreparingToJoin(!1),Promise.reject();this.validateProperties(o),this.properties=N(N({},this.properties),o)}if(o.showLocalVideo!==void 0&&(this._callObjectMode?console.error("showLocalVideo is not available in callObject mode"):this._showLocalVideo=!!o.showLocalVideo),o.showParticipantsBar!==void 0&&(this._callObjectMode?console.error("showParticipantsBar is not available in callObject mode"):this._showParticipantsBar=!!o.showParticipantsBar),this._callState===Ge||this._callState===nn)return console.warn("already joined meeting, call leave() before joining again"),void this.updateIsPreparingToJoin(!1);this._updateCallState(nn,!1);try{this.emit(Vn,{action:Vn})}catch(f){console.log("could not emit 'joining-meeting'",f)}return this._preloadCache.inputSettings||(this._preloadCache.inputSettings={}),o.inputSettings&&o.inputSettings.audio&&(this._preloadCache.inputSettings.audio=o.inputSettings.audio),o.inputSettings&&o.inputSettings.video&&(this._preloadCache.inputSettings.video=o.inputSettings.video),this.sendMessageToCallMachine({action:"join-meeting",properties:Qe(this.properties,this._callFrameId),preloadCache:Qe(this._preloadCache,this._callFrameId)}),new Promise(function(f,g){s._joinedCallback=function(_,M){if(s._callState!==Te){if(s._updateCallState(Ge),_)for(var A in _){if(s._callObjectMode){var x=s._callMachine().store;Ti(_[A],x),Ci(_[A],x),Mi(_[A],s._participants[A],x)}s._participants[A]=N({},_[A]),s.toggleParticipantAudioBasedOnNativeAudioFocus()}d&&s.loadCss(s.properties),f(_)}else g(M)}})}),function(){return E.apply(this,arguments)})},{key:"leave",value:(z=D(function*(){var s=this;return Fe(this._testCallInProgress,"leave()"),new Promise(function(o){if(s._callState===ke||s._callState===Te)o();else if(s._callObjectLoader&&!s._callObjectLoader.loaded){s._callObjectLoader.cancel(),s._updateCallState(ke),s.resetMeetingDependentVars();try{s.emit(ke,{action:ke})}catch(d){console.log("could not emit 'left-meeting'",d)}o()}else s._resolveLeave=o,s.sendMessageToCallMachine({action:"leave-meeting"})})}),function(){return z.apply(this,arguments)})},{key:"startScreenShare",value:(J=D(function*(){var s=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(wn(this._callMachineInitialized,"startScreenShare()"),o.screenVideoSendSettings&&this._validateVideoSendSettings("screenVideo",o.screenVideoSendSettings),o.mediaStream&&(this._sharedTracks.screenMediaStream=o.mediaStream,o.mediaStream=vt),typeof DailyNativeUtils<"u"&&DailyNativeUtils.isIOS!==void 0&&DailyNativeUtils.isIOS){var d=this.nativeUtils();if(yield d.isScreenBeingCaptured())return void this.emit(Jt,{action:Jt,type:"screen-share-error",errorMsg:"Could not start the screen sharing. The screen is already been captured!"});d.setSystemScreenCaptureStartCallback(function(){d.setSystemScreenCaptureStartCallback(null),s.sendMessageToCallMachine({action:gi,captureOptions:o})}),d.presentSystemScreenCapturePrompt()}else this.sendMessageToCallMachine({action:gi,captureOptions:o})}),function(){return J.apply(this,arguments)})},{key:"stopScreenShare",value:function(){wn(this._callMachineInitialized,"stopScreenShare()"),this.sendMessageToCallMachine({action:"local-screen-stop"})}},{key:"startRecording",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(N({action:"local-recording-start"},s))}},{key:"updateRecording",value:function(s){var o=s.layout,d=o===void 0?{preset:"default"}:o,f=s.instanceId;this.sendMessageToCallMachine({action:"daily-method-update-recording",layout:d,instanceId:f})}},{key:"stopRecording",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(N({action:"local-recording-stop"},s))}},{key:"startLiveStreaming",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(N({action:"daily-method-start-live-streaming"},s))}},{key:"updateLiveStreaming",value:function(s){var o=s.layout,d=o===void 0?{preset:"default"}:o,f=s.instanceId;this.sendMessageToCallMachine({action:"daily-method-update-live-streaming",layout:d,instanceId:f})}},{key:"addLiveStreamingEndpoints",value:function(s){var o=s.endpoints,d=s.instanceId;this.sendMessageToCallMachine({action:vi,endpointsOp:oc,endpoints:o,instanceId:d})}},{key:"removeLiveStreamingEndpoints",value:function(s){var o=s.endpoints,d=s.instanceId;this.sendMessageToCallMachine({action:vi,endpointsOp:cc,endpoints:o,instanceId:d})}},{key:"stopLiveStreaming",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(N({action:"daily-method-stop-live-streaming"},s))}},{key:"validateDailyConfig",value:function(s){s.camSimulcastEncodings&&(console.warn("camSimulcastEncodings is deprecated. Use sendSettings, found in DailyCallOptions, to provide camera simulcast settings."),this.validateSimulcastEncodings(s.camSimulcastEncodings)),s.screenSimulcastEncodings&&console.warn("screenSimulcastEncodings is deprecated. Use sendSettings, found in DailyCallOptions, to provide screen simulcast settings."),fe().match(/Linux; Android/)&&s.noAutoDefaultDeviceChange&&console.warn("noAutoDefaultDeviceChange is not supported on Android, and will be ignored.")}},{key:"validateSimulcastEncodings",value:function(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,d=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(s){if(!(s instanceof Array))throw new Error("encodings must be an Array");if(!Bi(s.length,1,3))throw new Error("encodings must be an Array with between 1 to ".concat(3," layers"));for(var f=0;f<s.length;f++){var g=s[f];for(var _ in this._validateEncodingLayerHasValidProperties(g),g)if(En.includes(_)){if(typeof g[_]!="number")throw new Error("".concat(_," must be a number"));if(o){var M=o[_],A=M.min,x=M.max;if(!Bi(g[_],A,x))throw new Error("".concat(_," value not in range. valid range: ").concat(A," to ").concat(x))}}else if(!["active","scalabilityMode"].includes(_))throw new Error("Invalid key ".concat(_,", valid keys are:")+Object.values(En));if(d&&!g.hasOwnProperty("maxBitrate"))throw new Error("maxBitrate is not specified")}}}},{key:"startRemoteMediaPlayer",value:(I=D(function*(s){var o=this,d=s.url,f=s.settings,g=f===void 0?{state:qn.PLAY}:f;try{(function(_){if(typeof _!="string")throw new Error('url parameter must be "string" type')})(d),Ui(g),function(_){for(var M in _)if(!ji.includes(M))throw new Error("Invalid key ".concat(M,", valid keys are: ").concat(ji));_.simulcastEncodings&&this.validateSimulcastEncodings(_.simulcastEncodings,_a,!0)}(g)}catch(_){throw console.error("invalid argument Error: ".concat(_)),console.error(`startRemoteMediaPlayer arguments must be of the form:
  { url: "playback url",
  settings?:
  {state: "play"|"pause", simulcastEncodings?: [{}] } }`),_}return new Promise(function(_,M){o.sendMessageToCallMachine({action:"daily-method-start-remote-media-player",url:d,settings:g},function(A){A.error?M({error:A.error,errorMsg:A.errorMsg}):_({session_id:A.session_id,remoteMediaPlayerState:{state:A.state,settings:A.settings}})})})}),function(s){return I.apply(this,arguments)})},{key:"stopRemoteMediaPlayer",value:(T=D(function*(s){var o=this;if(typeof s!="string")throw new Error(" remotePlayerID must be of type string");return new Promise(function(d,f){o.sendMessageToCallMachine({action:"daily-method-stop-remote-media-player",session_id:s},function(g){g.error?f({error:g.error,errorMsg:g.errorMsg}):d()})})}),function(s){return T.apply(this,arguments)})},{key:"updateRemoteMediaPlayer",value:(w=D(function*(s){var o=this,d=s.session_id,f=s.settings;try{Ui(f)}catch(g){throw console.error("invalid argument Error: ".concat(g)),console.error(`updateRemoteMediaPlayer arguments must be of the form:
  session_id: "participant session",
  { settings?: {state: "play"|"pause"} }`),g}return new Promise(function(g,_){o.sendMessageToCallMachine({action:"daily-method-update-remote-media-player",session_id:d,settings:f},function(M){M.error?_({error:M.error,errorMsg:M.errorMsg}):g({session_id:M.session_id,remoteMediaPlayerState:{state:M.state,settings:M.settings}})})})}),function(s){return w.apply(this,arguments)})},{key:"startTranscription",value:function(s){this.sendMessageToCallMachine(N({action:"daily-method-start-transcription"},s))}},{key:"stopTranscription",value:function(){this.sendMessageToCallMachine({action:"daily-method-stop-transcription"})}},{key:"startDialOut",value:(S=D(function*(s){var o=this;W(this._callState,"startDialOut()");var d=function(f){if(f){if(!Array.isArray(f))throw new Error("Error starting dial out: audio codec must be an array");if(f.length<=0)throw new Error("Error starting dial out: audio codec array specified but empty");f.forEach(function(g){if(typeof g!="string")throw new Error("Error starting dial out: audio codec must be a string");if(g!=="OPUS"&&g!=="PCMU"&&g!=="PCMA"&&g!=="G722")throw new Error("Error starting dial out: audio codec must be one of OPUS, PCMU, PCMA, G722")})}};if(!s.sipUri&&!s.phoneNumber)throw new Error("Error starting dial out: either a sip uri or phone number must be provided");if(s.sipUri&&s.phoneNumber)throw new Error("Error starting dial out: only one of sip uri or phone number must be provided");if(s.sipUri){if(typeof s.sipUri!="string")throw new Error("Error starting dial out: sipUri must be a string");if(!s.sipUri.startsWith("sip:"))throw new Error("Error starting dial out: Invalid SIP URI, must start with 'sip:'");if(s.video&&typeof s.video!="boolean")throw new Error("Error starting dial out: video must be a boolean value");(function(f){if(f&&(d(f.audio),f.video)){if(!Array.isArray(f.video))throw new Error("Error starting dial out: video codec must be an array");if(f.video.length<=0)throw new Error("Error starting dial out: video codec array specified but empty");f.video.forEach(function(g){if(typeof g!="string")throw new Error("Error starting dial out: video codec must be a string");if(g!=="H264"&&g!=="VP8")throw new Error("Error starting dial out: video codec must be H264 or VP8")})}})(s.codecs)}if(s.phoneNumber){if(typeof s.phoneNumber!="string")throw new Error("Error starting dial out: phoneNumber must be a string");if(!/^\+\d{1,}$/.test(s.phoneNumber))throw new Error("Error starting dial out: Invalid phone number, must be valid phone number as per E.164");s.codecs&&d(s.codecs.audio)}if(s.callerId){if(typeof s.callerId!="string")throw new Error("Error starting dial out: callerId must be a string");if(s.sipUri)throw new Error("Error starting dial out: callerId not allowed with sipUri")}if(s.displayName){if(typeof s.displayName!="string")throw new Error("Error starting dial out: displayName must be a string");if(s.displayName.length>=200)throw new Error("Error starting dial out: displayName length must be less than 200")}return new Promise(function(f,g){o.sendMessageToCallMachine(N({action:"dialout-start"},s),function(_){_.error?g(_.error):f(_)})})}),function(s){return S.apply(this,arguments)})},{key:"stopDialOut",value:function(s){var o=this;return W(this._callState,"stopDialOut()"),new Promise(function(d,f){o.sendMessageToCallMachine(N({action:"dialout-stop"},s),function(g){g.error?f(g.error):d(g)})})}},{key:"sendDTMF",value:(k=D(function*(s){var o=this;return W(this._callState,"sendDTMF()"),function(d){var f=d.sessionId,g=d.tones;if(!f||!g)throw new Error("sessionId and tones are mandatory parameter");if(typeof f!="string"||typeof g!="string")throw new Error("sessionId and tones should be of string type");if(g.length>20)throw new Error("tones string must be upto 20 characters");var _=/[^0-9A-D*#]/g,M=g.match(_);if(M&&M[0])throw new Error("".concat(M[0]," is not valid DTMF tone"))}(s),new Promise(function(d,f){o.sendMessageToCallMachine(N({action:"send-dtmf"},s),function(g){g.error?f(g.error):d(g)})})}),function(s){return k.apply(this,arguments)})},{key:"getNetworkStats",value:function(){var s=this;return this._callState!==Ge?{stats:{latest:{}}}:new Promise(function(o){s.sendMessageToCallMachine({action:"get-calc-stats"},function(d){o(N({stats:d.stats},s._network))})})}},{key:"testWebsocketConnectivity",value:(v=D(function*(){var s=this;if(Fe(this._testCallInProgress,"testWebsocketConnectivity()"),this.needsLoad())try{yield this.load()}catch(o){return Promise.reject(o)}return new Promise(function(o,d){s.sendMessageToCallMachine({action:"test-websocket-connectivity"},function(f){f.error?d(f.error):o(f.results)})})}),function(){return v.apply(this,arguments)})},{key:"abortTestWebsocketConnectivity",value:function(){this.sendMessageToCallMachine({action:"abort-test-websocket-connectivity"})}},{key:"_validateVideoTrackForNetworkTests",value:function(s){return s?s instanceof MediaStreamTrack?!!Ic(s)||(console.error("Video track is not playable. This test needs a live video track."),!1):(console.error("Video track needs to be of type `MediaStreamTrack`."),!1):(console.error("Missing video track. You must provide a video track in order to run this test."),!1)}},{key:"testCallQuality",value:(p=D(function*(s){var o=this;if(function(A){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method",Q=arguments.length>2?arguments[2]:void 0;if(A){var Z="".concat(x," can not be called after preAuth(), startCamera(), or join() and call state has been initialized.");throw Q&&(Z+=" ".concat(Q)),console.error(Z),new Error(Z)}}(this._callMachineInitialized,"testCallQuality()"),s.videoTrack&&!this._validateVideoTrackForNetworkTests(s.videoTrack))throw new Error("Video track error");var d=this._testCallAlreadyInProgress,f=function(A){d||(o._testCallInProgress=A)};f(!0);var g=s.videoTrack,_=hn(s,Nc);if(this._sharedTracks.videoTrackForConnectionQualityTest=g,this.needsLoad())try{var M=this._callState;yield this.load(),this._callState=M}catch(A){return f(!1),Promise.reject(A)}return new Promise(function(A){o.sendMessageToCallMachine(N(N({action:"test-call-quality"},_),{},{dailyJsVersion:o.properties.dailyJsVersion}),function(x){var Q=x.results,Z=Q.result,ee=hn(Q,Rc);if(Z==="failed"){var le,K=N({},ee);(le=ee.error)!==null&&le!==void 0&&le.details?(ee.error.details=JSON.parse(ee.error.details),K.error=N(N({},K.error),{},{details:N({},K.error.details)}),K.error.details.duringTest="testCallQuality"):(K.error=K.error?N({},K.error):{},K.error.details={duringTest:"testCallQuality"}),o._maybeSendToSentry(K)}f(!1),A(N({result:Z},ee))})})}),function(s){return p.apply(this,arguments)})},{key:"stopTestCallQuality",value:function(){this.sendMessageToCallMachine({action:"stop-test-call-quality"})}},{key:"testConnectionQuality",value:(h=D(function*(s){console.warn("testConnectionQuality() is deprecated: use testPeerToPeerCallQuality() instead");var o=yield this.testPeerToPeerCallQuality(s),d={result:o.result,secondsElapsed:o.secondsElapsed};return o.data&&(d.data={maxRTT:o.data.maxRoundTripTime,packetLoss:o.data.avgRecvPacketLoss}),d}),function(s){return h.apply(this,arguments)})},{key:"testPeerToPeerCallQuality",value:(m=D(function*(s){var o=this;if(Fe(this._testCallInProgress,"testConnectionQuality()"),this.needsLoad())try{yield this.load()}catch(g){return Promise.reject(g)}var d=s.videoTrack,f=s.duration;if(!this._validateVideoTrackForNetworkTests(d))throw new Error("Video track error");return this._sharedTracks.videoTrackForConnectionQualityTest=d,new Promise(function(g,_){o.sendMessageToCallMachine({action:"test-p2p-call-quality",duration:f},function(M){M.error?_(M.error):g(M.results)})})}),function(s){return m.apply(this,arguments)})},{key:"stopTestConnectionQuality",value:function(){console.warn("stopTestConnectionQuality() is deprecated: use stopTestPeerToPeerCallQuality() instead"),this.stopTestPeerToPeerCallQuality()}},{key:"stopTestPeerToPeerCallQuality",value:function(){this.sendMessageToCallMachine({action:"stop-test-p2p-call-quality"})}},{key:"testNetworkConnectivity",value:(u=D(function*(s){var o=this;if(Fe(this._testCallInProgress,"testNetworkConnectivity()"),this.needsLoad())try{yield this.load()}catch(d){return Promise.reject(d)}if(!this._validateVideoTrackForNetworkTests(s))throw new Error("Video track error");return this._sharedTracks.videoTrackForNetworkConnectivityTest=s,new Promise(function(d,f){o.sendMessageToCallMachine({action:"test-network-connectivity"},function(g){g.error?f(g.error):d(g.results)})})}),function(s){return u.apply(this,arguments)})},{key:"abortTestNetworkConnectivity",value:function(){this.sendMessageToCallMachine({action:"abort-test-network-connectivity"})}},{key:"getCpuLoadStats",value:function(){var s=this;return new Promise(function(o,d){s._callState===Ge?s.sendMessageToCallMachine({action:"get-cpu-load-stats"},function(f){o(f.cpuStats)}):o({cpuLoadState:void 0,cpuLoadStateReason:void 0,stats:{}})})}},{key:"_validateEncodingLayerHasValidProperties",value:function(s){var o;if(!(((o=Object.keys(s))===null||o===void 0?void 0:o.length)>0))throw new Error("Empty encoding is not allowed. At least one of these valid keys should be specified:"+Object.values(En))}},{key:"_validateVideoSendSettings",value:function(s,o){var d=s==="screenVideo"?["default-screen-video","detail-optimized","motion-optimized","motion-and-detail-balanced"]:["default-video","bandwidth-optimized","bandwidth-and-quality-balanced","quality-optimized","adaptive-2-layers","adaptive-3-layers"],f="Video send settings should be either an object or one of the supported presets: ".concat(d.join());if(typeof o=="string"){if(!d.includes(o))throw new Error(f)}else{if(q(o)!=="object")throw new Error(f);if(!o.maxQuality&&!o.encodings&&o.allowAdaptiveLayers===void 0)throw new Error("Video send settings must contain at least maxQuality, allowAdaptiveLayers or encodings attribute");if(o.maxQuality&&["low","medium","high"].indexOf(o.maxQuality)===-1)throw new Error("maxQuality must be either low, medium or high");if(o.encodings){var g=!1;switch(Object.keys(o.encodings).length){case 1:g=!o.encodings.low;break;case 2:g=!o.encodings.low||!o.encodings.medium;break;case 3:g=!o.encodings.low||!o.encodings.medium||!o.encodings.high;break;default:g=!0}if(g)throw new Error("Encodings must be defined as: low, low and medium, or low, medium and high.");o.encodings.low&&this._validateEncodingLayerHasValidProperties(o.encodings.low),o.encodings.medium&&this._validateEncodingLayerHasValidProperties(o.encodings.medium),o.encodings.high&&this._validateEncodingLayerHasValidProperties(o.encodings.high)}}}},{key:"validateUpdateSendSettings",value:function(s){var o=this;if(!s||Object.keys(s).length===0)throw new Error("Send settings must contain at least information for one track!");Object.entries(s).forEach(function(d){var f=$e(d,2),g=f[0],_=f[1];o._validateVideoSendSettings(g,_)})}},{key:"updateSendSettings",value:function(s){var o=this;return this.validateUpdateSendSettings(s),this.needsLoad()?(this._preloadCache.sendSettings=s,{sendSettings:this._preloadCache.sendSettings}):new Promise(function(d,f){o.sendMessageToCallMachine({action:"update-send-settings",sendSettings:s},function(g){g.error?f(g.error):d(g.sendSettings)})})}},{key:"getSendSettings",value:function(){return this._sendSettings||this._preloadCache.sendSettings}},{key:"getLocalAudioLevel",value:function(){return this._localAudioLevel}},{key:"getRemoteParticipantsAudioLevel",value:function(){return this._remoteParticipantsAudioLevel}},{key:"getActiveSpeaker",value:function(){return F(),this._activeSpeaker}},{key:"setActiveSpeakerMode",value:function(s){return F(),this.sendMessageToCallMachine({action:"set-active-speaker-mode",enabled:s}),this}},{key:"activeSpeakerMode",value:function(){return F(),this._activeSpeakerMode}},{key:"subscribeToTracksAutomatically",value:function(){return this._preloadCache.subscribeToTracksAutomatically}},{key:"setSubscribeToTracksAutomatically",value:function(s){return W(this._callState,"setSubscribeToTracksAutomatically()","Use the subscribeToTracksAutomatically configuration property."),this._preloadCache.subscribeToTracksAutomatically=s,this.sendMessageToCallMachine({action:"daily-method-subscribe-to-tracks-automatically",enabled:s}),this}},{key:"enumerateDevices",value:(l=D(function*(){var s=this;if(this._callObjectMode){var o=yield navigator.mediaDevices.enumerateDevices();return He()==="Firefox"&&Jn().major>115&&Jn().major<123&&(o=o.filter(function(d){return d.kind!=="audiooutput"})),{devices:o.map(function(d){var f=JSON.parse(JSON.stringify(d));if(!V()&&d.kind==="videoinput"&&d.getCapabilities){var g,_=d.getCapabilities();f.facing=(_==null||(g=_.facingMode)===null||g===void 0?void 0:g.length)>=1?_.facingMode[0]:void 0}return f})}}return new Promise(function(d){s.sendMessageToCallMachine({action:"enumerate-devices"},function(f){d({devices:f.devices})})})}),function(){return l.apply(this,arguments)})},{key:"sendAppMessage",value:function(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"*";if(W(this._callState,"sendAppMessage()"),JSON.stringify(s).length>4096)throw new Error("Message data too large. Max size is 4096");return this.sendMessageToCallMachine({action:"app-msg",data:s,to:o}),this}},{key:"addFakeParticipant",value:function(s){return F(),W(this._callState,"addFakeParticipant()"),this.sendMessageToCallMachine(N({action:"add-fake-participant"},s)),this}},{key:"setShowNamesMode",value:function(s){return ae(this._callObjectMode,"setShowNamesMode()"),F(),s&&s!=="always"&&s!=="never"?(console.error('setShowNamesMode argument should be "always", "never", or false'),this):(this.sendMessageToCallMachine({action:"set-show-names",mode:s}),this)}},{key:"setShowLocalVideo",value:function(){var s=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return ae(this._callObjectMode,"setShowLocalVideo()"),F(),W(this._callState,"setShowLocalVideo()"),typeof s!="boolean"?(console.error("setShowLocalVideo only accepts a boolean value"),this):(this.sendMessageToCallMachine({action:"set-show-local-video",show:s}),this._showLocalVideo=s,this)}},{key:"showLocalVideo",value:function(){return ae(this._callObjectMode,"showLocalVideo()"),F(),this._showLocalVideo}},{key:"setShowParticipantsBar",value:function(){var s=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return ae(this._callObjectMode,"setShowParticipantsBar()"),F(),W(this._callState,"setShowParticipantsBar()"),typeof s!="boolean"?(console.error("setShowParticipantsBar only accepts a boolean value"),this):(this.sendMessageToCallMachine({action:"set-show-participants-bar",show:s}),this._showParticipantsBar=s,this)}},{key:"showParticipantsBar",value:function(){return ae(this._callObjectMode,"showParticipantsBar()"),F(),this._showParticipantsBar}},{key:"customIntegrations",value:function(){return F(),ae(this._callObjectMode,"customIntegrations()"),this._customIntegrations}},{key:"setCustomIntegrations",value:function(s){return F(),ae(this._callObjectMode,"setCustomIntegrations()"),W(this._callState,"setCustomIntegrations()"),Ca(s)?(this.sendMessageToCallMachine({action:"set-custom-integrations",integrations:s}),this._customIntegrations=s,this):this}},{key:"startCustomIntegrations",value:function(s){var o=this;if(F(),ae(this._callObjectMode,"startCustomIntegrations()"),W(this._callState,"startCustomIntegrations()"),Array.isArray(s)&&s.some(function(g){return typeof g!="string"})||!Array.isArray(s)&&typeof s!="string")return console.error("startCustomIntegrations() only accepts string | string[]"),this;var d=typeof s=="string"?[s]:s,f=d.filter(function(g){return!(g in o._customIntegrations)});return f.length?(console.error(`Can't find custom integration(s): "`.concat(f.join(", "),'"')),this):(this.sendMessageToCallMachine({action:"start-custom-integrations",ids:d}),this)}},{key:"stopCustomIntegrations",value:function(s){var o=this;if(F(),ae(this._callObjectMode,"stopCustomIntegrations()"),W(this._callState,"stopCustomIntegrations()"),Array.isArray(s)&&s.some(function(g){return typeof g!="string"})||!Array.isArray(s)&&typeof s!="string")return console.error("stopCustomIntegrations() only accepts string | string[]"),this;var d=typeof s=="string"?[s]:s,f=d.filter(function(g){return!(g in o._customIntegrations)});return f.length?(console.error(`Can't find custom integration(s): "`.concat(f.join(", "),'"')),this):(this.sendMessageToCallMachine({action:"stop-custom-integrations",ids:d}),this)}},{key:"customTrayButtons",value:function(){return ae(this._callObjectMode,"customTrayButtons()"),F(),this._customTrayButtons}},{key:"updateCustomTrayButtons",value:function(s){return ae(this._callObjectMode,"updateCustomTrayButtons()"),F(),W(this._callState,"updateCustomTrayButtons()"),Ta(s)?(this.sendMessageToCallMachine({action:"update-custom-tray-buttons",btns:s}),this._customTrayButtons=s,this):(console.error("updateCustomTrayButtons only accepts a dictionary of the type ".concat(JSON.stringify(sn))),this)}},{key:"theme",value:function(){return ae(this._callObjectMode,"theme()"),this.properties.theme}},{key:"setTheme",value:function(s){var o=this;return ae(this._callObjectMode,"setTheme()"),new Promise(function(d,f){try{o.validateProperties({theme:s}),o.properties.theme=N({},s),o.sendMessageToCallMachine({action:"set-theme",theme:o.properties.theme});try{o.emit(Fn,{action:Fn,theme:o.properties.theme})}catch(g){console.log("could not emit 'theme-updated'",g)}d(o.properties.theme)}catch(g){f(g)}})}},{key:"requestFullscreen",value:(c=D(function*(){if(F(),this._iframe&&!document.fullscreenElement&&yi())try{(yield this._iframe.requestFullscreen)?this._iframe.requestFullscreen():this._iframe.webkitRequestFullscreen()}catch(s){console.log("could not make video call fullscreen",s)}}),function(){return c.apply(this,arguments)})},{key:"exitFullscreen",value:function(){F(),document.fullscreenElement?document.exitFullscreen():document.webkitFullscreenElement&&document.webkitExitFullscreen()}},{key:"getSidebarView",value:(a=D(function*(){var s=this;return this._callObjectMode?(console.error("getSidebarView is not available in callObject mode"),Promise.resolve(null)):new Promise(function(o){s.sendMessageToCallMachine({action:"get-sidebar-view"},function(d){o(d.view)})})}),function(){return a.apply(this,arguments)})},{key:"setSidebarView",value:function(s){return this._callObjectMode?(console.error("setSidebarView is not available in callObject mode"),this):(this.sendMessageToCallMachine({action:"set-sidebar-view",view:s}),this)}},{key:"room",value:(i=D(function*(){var s=this,o=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).includeRoomConfigDefaults,d=o===void 0||o;return this._accessState.access===Yt||this.needsLoad()?this.properties.url?{roomUrlPendingJoin:this.properties.url}:null:new Promise(function(f){s.sendMessageToCallMachine({action:"lib-room-info",includeRoomConfigDefaults:d},function(g){delete g.action,delete g.callbackStamp,f(g)})})}),function(){return i.apply(this,arguments)})},{key:"geo",value:(r=D(function*(){try{var s=yield fetch("https://gs.daily.co/_ks_/x-swsl/:");return{current:(yield s.json()).geo}}catch(o){return console.error("geo lookup failed",o),{current:""}}}),function(){return r.apply(this,arguments)})},{key:"setNetworkTopology",value:(n=D(function*(s){var o=this;return F(),W(this._callState,"setNetworkTopology()"),new Promise(function(d,f){o.sendMessageToCallMachine({action:"set-network-topology",opts:s},function(g){g.error?f({error:g.error}):d({workerId:g.workerId})})})}),function(s){return n.apply(this,arguments)})},{key:"getNetworkTopology",value:(e=D(function*(){var s=this;return new Promise(function(o,d){s.needsLoad()&&o({topology:"none"}),s.sendMessageToCallMachine({action:"get-network-topology"},function(f){f.error?d({error:f.error}):o({topology:f.topology})})})}),function(){return e.apply(this,arguments)})},{key:"setPlayNewParticipantSound",value:function(s){if(F(),typeof s!="number"&&s!==!0&&s!==!1)throw new Error("argument to setShouldPlayNewParticipantSound should be true, false, or a number, but is ".concat(s));this.sendMessageToCallMachine({action:"daily-method-set-play-ding",arg:s})}},{key:"on",value:function(s,o){return Me.prototype.on.call(this,s,o)}},{key:"once",value:function(s,o){return Me.prototype.once.call(this,s,o)}},{key:"off",value:function(s,o){return Me.prototype.off.call(this,s,o)}},{key:"validateProperties",value:function(s){for(var o in s){if(!xe[o])throw new Error("unrecognized property '".concat(o,"'"));if(xe[o].validate&&!xe[o].validate(s[o],this))throw new Error("property '".concat(o,"': ").concat(xe[o].help))}}},{key:"assembleMeetingUrl",value:function(){var s,o,d=N(N({},this.properties),{},{emb:this._callFrameId,embHref:encodeURIComponent(window.location.href),proxy:(s=this.properties.dailyConfig)!==null&&s!==void 0&&s.proxyUrl?encodeURIComponent((o=this.properties.dailyConfig)===null||o===void 0?void 0:o.proxyUrl):void 0}),f=d.url.match(/\?/)?"&":"?";return d.url+f+Object.keys(xe).filter(function(g){return xe[g].queryString&&d[g]!==void 0}).map(function(g){return"".concat(xe[g].queryString,"=").concat(d[g])}).join("&")}},{key:"needsLoad",value:function(){return[xn,hi,ke,Te].includes(this._callState)}},{key:"sendMessageToCallMachine",value:function(s,o){if(this._destroyed&&(this._logUseAfterDestroy(),this.strictMode))throw new Error("Use after destroy");this._messageChannel.sendMessageToCallMachine(s,o,this._iframe,this._callFrameId)}},{key:"forwardPackagedMessageToCallMachine",value:function(s){this._messageChannel.forwardPackagedMessageToCallMachine(s,this._iframe,this._callFrameId)}},{key:"addListenerForPackagedMessagesFromCallMachine",value:function(s){return this._messageChannel.addListenerForPackagedMessagesFromCallMachine(s,this._callFrameId)}},{key:"removeListenerForPackagedMessagesFromCallMachine",value:function(s){this._messageChannel.removeListenerForPackagedMessagesFromCallMachine(s)}},{key:"handleMessageFromCallMachine",value:function(s){switch(s.action){case Ss:this.sendMessageToCallMachine(N({action:Es},this.properties));break;case"call-machine-initialized":this._callMachineInitialized=!0;var o={action:pt,level:"log",code:1011,stats:{event:"bundle load",time:this._bundleLoadTime==="no-op"?0:this._bundleLoadTime,preLoaded:this._bundleLoadTime==="no-op",url:Kt(this.properties.dailyConfig)}};this.sendMessageToCallMachine(o),this._delayDuplicateInstanceLog&&this._logDuplicateInstanceAttempt();break;case Gt:this._loadedCallback&&(this._loadedCallback(),this._loadedCallback=null);try{this.emit(s.action,s)}catch(P){console.log("could not emit",s,P)}break;case Ts:this._joinedCallback&&(this._joinedCallback(s.participants),this._joinedCallback=null);try{this.emit(s.action,s)}catch(P){console.log("could not emit",s,P)}break;case Ms:case As:if(this._callState===ke)return;if(s.participant&&s.participant.session_id){var d=s.participant.local?"local":s.participant.session_id;if(this._callObjectMode){var f=this._callMachine().store;Ti(s.participant,f),Ci(s.participant,f),Mi(s.participant,this._participants[d],f)}try{this.maybeParticipantTracksStopped(this._participants[d],s.participant),this.maybeParticipantTracksStarted(this._participants[d],s.participant),this.maybeEventRecordingStopped(this._participants[d],s.participant),this.maybeEventRecordingStarted(this._participants[d],s.participant)}catch(P){console.error("track events error",P)}if(!this.compareEqualForParticipantUpdateEvent(s.participant,this._participants[d])){this._participants[d]=N({},s.participant),this.toggleParticipantAudioBasedOnNativeAudioFocus();try{this.emit(s.action,s)}catch(P){console.log("could not emit",s,P)}}}break;case Os:if(s.participant&&s.participant.session_id){var g=this._participants[s.participant.session_id];g&&this.maybeParticipantTracksStopped(g,null),delete this._participants[s.participant.session_id];try{this.emit(s.action,s)}catch(P){console.log("could not emit",s,P)}}break;case Ls:if(!se(this._participantCounts,s.participantCounts)){this._participantCounts=s.participantCounts;try{this.emit(s.action,s)}catch(P){console.log("could not emit",s,P)}}break;case Ps:var _={access:s.access};if(s.awaitingAccess&&(_.awaitingAccess=s.awaitingAccess),!se(this._accessState,_)){this._accessState=_;try{this.emit(s.action,s)}catch(P){console.log("could not emit",s,P)}}break;case Ds:if(s.meetingSession){this._meetingSessionSummary=s.meetingSession;try{delete s.callFrameId,this.emit(s.action,s);var M=N(N({},s),{},{action:"meeting-session-updated"});this.emit(M.action,M)}catch(P){console.log("could not emit",s,P)}}break;case Wt:var A;this._iframe&&!s.preserveIframe&&(this._iframe.src=""),this._updateCallState(Te),this.resetMeetingDependentVars(),this._loadedCallback&&(this._loadedCallback(s.errorMsg),this._loadedCallback=null),s.preserveIframe;var x=hn(s,jc);x!=null&&(A=x.error)!==null&&A!==void 0&&A.details&&(x.error.details=JSON.parse(x.error.details)),this._maybeSendToSentry(s),this._joinedCallback&&(this._joinedCallback(null,x),this._joinedCallback=null);try{this.emit(s.action,x)}catch(P){console.log("could not emit",s,P)}break;case Cs:this._callState!==Te&&this._updateCallState(ke),this.resetMeetingDependentVars(),this._resolveLeave&&(this._resolveLeave(),this._resolveLeave=null);try{this.emit(s.action,s)}catch(P){console.log("could not emit",s,P)}break;case"selected-devices-updated":if(s.devices)try{this.emit(s.action,s)}catch(P){console.log("could not emit",s,P)}break;case ea:var Q=s.threshold,Z=s.quality;if(Q!==this._network.threshold||Z!==this._network.quality){this._network.quality=Z,this._network.threshold=Q;try{this.emit(s.action,s)}catch(P){console.log("could not emit",s,P)}}break;case na:if(s&&s.cpuLoadState)try{this.emit(s.action,s)}catch(P){console.log("could not emit",s,P)}break;case ra:if(s&&s.faceCounts!==void 0)try{this.emit(s.action,s)}catch(P){console.log("could not emit",s,P)}break;case Xs:var ee=s.activeSpeaker;if(this._activeSpeaker.peerId!==ee.peerId){this._activeSpeaker.peerId=ee.peerId;try{this.emit(s.action,{action:s.action,activeSpeaker:this._activeSpeaker})}catch(P){console.log("could not emit",s,P)}}break;case"show-local-video-changed":if(this._callObjectMode)return;var le=s.show;this._showLocalVideo=le;try{this.emit(s.action,{action:s.action,show:le})}catch(P){console.log("could not emit",s,P)}break;case Zs:var K=s.enabled;if(this._activeSpeakerMode!==K){this._activeSpeakerMode=K;try{this.emit(s.action,{action:s.action,enabled:this._activeSpeakerMode})}catch(P){console.log("could not emit",s,P)}}break;case Ns:case Rs:case js:this._waitingParticipants=s.allWaitingParticipants;try{this.emit(s.action,{action:s.action,participant:s.participant})}catch(P){console.log("could not emit",s,P)}break;case la:if(!se(this._receiveSettings,s.receiveSettings)){this._receiveSettings=s.receiveSettings;try{this.emit(s.action,{action:s.action,receiveSettings:s.receiveSettings})}catch(P){console.log("could not emit",s,P)}}break;case ua:if(!se(this._inputSettings,s.inputSettings)){var dn=this._getInputSettings();if(this._inputSettings=s.inputSettings,this._preloadCache.inputSettings={},!se(dn,this._getInputSettings()))try{this.emit(s.action,{action:s.action,inputSettings:this._getInputSettings()})}catch(P){console.log("could not emit",s,P)}}break;case"send-settings-updated":if(!se(this._sendSettings,s.sendSettings)){this._sendSettings=s.sendSettings,this._preloadCache.sendSettings=null;try{this.emit(s.action,{action:s.action,sendSettings:s.sendSettings})}catch(P){console.log("could not emit",s,P)}}break;case"local-audio-level":this._localAudioLevel=s.audioLevel,this._preloadCache.localAudioLevelObserver=null,this.emitDailyJSEvent(s);break;case"remote-participants-audio-level":this._remoteParticipantsAudioLevel=s.participantsAudioLevel,this._preloadCache.remoteParticipantsAudioLevelObserver=null,this.emitDailyJSEvent(s);break;case Js:var te=s.session_id;this._rmpPlayerState[te]=s.playerState,this.emitDailyJSEvent(s);break;case zs:delete this._rmpPlayerState[s.session_id],this.emitDailyJSEvent(s);break;case Ws:var ve=s.session_id,je=this._rmpPlayerState[ve];je&&this.compareEqualForRMPUpdateEvent(je,s.remoteMediaPlayerState)||(this._rmpPlayerState[ve]=s.remoteMediaPlayerState,this.emitDailyJSEvent(s));break;case"custom-button-click":case"sidebar-view-changed":this.emitDailyJSEvent(s);break;case Is:var Ot=this._meetingSessionState.topology!==(s.meetingSessionState&&s.meetingSessionState.topology);this._meetingSessionState=kn(s.meetingSessionState,this._callObjectMode),(this._callObjectMode||Ot)&&this.emitDailyJSEvent(s);break;case Hs:this._isScreenSharing=!0,this.emitDailyJSEvent(s);break;case Ks:case Qs:this._isScreenSharing=!1,this.emitDailyJSEvent(s);break;case qt:case $t:case Bs:case Vs:case Ys:case xs:case Fs:case Us:case ws:case ks:case qs:case $s:case ta:case Gs:case ia:case sa:case aa:case oa:case Jt:case ca:case"dialin-ready":case"dialin-connected":case"dialin-error":case"dialin-stopped":case"dialin-warning":case"dialout-connected":case"dialout-error":case"dialout-stopped":case"dialout-warning":try{this.emit(s.action,s)}catch(P){console.log("could not emit",s,P)}break;case"request-fullscreen":this.requestFullscreen();break;case"request-exit-fullscreen":this.exitFullscreen()}}},{key:"maybeEventRecordingStopped",value:function(s,o){var d="record";if(s&&!o.local&&o[d]===!1&&s[d]!==o[d])try{this.emit($t,{action:$t})}catch(f){console.log("could not emit",f)}}},{key:"maybeEventRecordingStarted",value:function(s,o){var d="record";if(s&&!o.local&&o[d]===!0&&s[d]!==o[d])try{this.emit(qt,{action:qt})}catch(f){console.log("could not emit",f)}}},{key:"maybeEventTrackStopped",value:function(s,o,d,f){if(s&&(s.readyState==="ended"||!o||s.id!==o.id))try{this.emit(Gn,{action:Gn,track:s,participant:d,type:f})}catch(g){console.log("maybeEventTrackStopped: could not emit",g)}}},{key:"maybeEventTrackStarted",value:function(s,o,d,f){if(o&&(!s||s.readyState==="ended"||o.id!==s.id))try{this.emit(Yn,{action:Yn,track:o,participant:d,type:f})}catch(g){console.log("maybeEventTrackStarted: could not emit",g)}}},{key:"maybeParticipantTracksStopped",value:function(s,o){if(s)for(var d in s.tracks)this.maybeEventTrackStopped(s.tracks[d].track,o&&o.tracks[d]?o.tracks[d].track:null,o,d)}},{key:"maybeParticipantTracksStarted",value:function(s,o){if(o)for(var d in o.tracks)this.maybeEventTrackStarted(s&&s.tracks[d]?s.tracks[d].track:null,o.tracks[d].track,o,d)}},{key:"compareEqualForRMPUpdateEvent",value:function(s,o){var d,f;return s.state===o.state&&((d=s.settings)===null||d===void 0?void 0:d.volume)===((f=o.settings)===null||f===void 0?void 0:f.volume)}},{key:"emitDailyJSEvent",value:function(s){try{this.emit(s.action,s)}catch(o){console.log("could not emit",s,o)}}},{key:"compareEqualForParticipantUpdateEvent",value:function(s,o){return!!se(s,o)&&(!s.videoTrack||!o.videoTrack||s.videoTrack.id===o.videoTrack.id&&s.videoTrack.muted===o.videoTrack.muted&&s.videoTrack.enabled===o.videoTrack.enabled)&&(!s.audioTrack||!o.audioTrack||s.audioTrack.id===o.audioTrack.id&&s.audioTrack.muted===o.audioTrack.muted&&s.audioTrack.enabled===o.audioTrack.enabled)}},{key:"nativeUtils",value:function(){return V()?typeof DailyNativeUtils>"u"?(console.warn("in React Native, DailyNativeUtils is expected to be available"),null):DailyNativeUtils:null}},{key:"updateIsPreparingToJoin",value:function(s){this._updateCallState(this._callState,s)}},{key:"_updateCallState",value:function(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._isPreparingToJoin;if(s!==this._callState||o!==this._isPreparingToJoin){var d=this._callState,f=this._isPreparingToJoin;this._callState=s,this._isPreparingToJoin=o;var g=Ht(d,f),_=Ht(this._callState,this._isPreparingToJoin);g!==_&&(this.updateKeepDeviceAwake(_),this.updateDeviceAudioMode(_),this.updateShowAndroidOngoingMeetingNotification(_),this.updateNoOpRecordingEnsuringBackgroundContinuity(_))}}},{key:"resetMeetingDependentVars",value:function(){this._participants={},this._participantCounts=Ri,this._waitingParticipants={},this._activeSpeaker={},this._activeSpeakerMode=!1,this._didPreAuth=!1,this._accessState={access:Yt},this._finalSummaryOfPrevSession=this._meetingSessionSummary,this._meetingSessionSummary={},this._meetingSessionState=kn(Ni,this._callObjectMode),this._isScreenSharing=!1,this._receiveSettings={},this._inputSettings=void 0,this._sendSettings={},this._localAudioLevel=0,this._remoteParticipantsAudioLevel={},this._callMachineInitialized=!1,this._bundleLoadTime=void 0,this._preloadCache}},{key:"updateKeepDeviceAwake",value:function(s){V()&&this.nativeUtils().setKeepDeviceAwake(s,this._callFrameId)}},{key:"updateDeviceAudioMode",value:function(s){if(V()&&!this.disableReactNativeAutoDeviceManagement("audio")){var o=s?this._nativeInCallAudioMode:"idle";this.nativeUtils().setAudioMode(o)}}},{key:"updateShowAndroidOngoingMeetingNotification",value:function(s){if(V()&&this.nativeUtils().setShowOngoingMeetingNotification){var o,d,f,g;if(this.properties.reactNativeConfig&&this.properties.reactNativeConfig.androidInCallNotification){var _=this.properties.reactNativeConfig.androidInCallNotification;o=_.title,d=_.subtitle,f=_.iconName,g=_.disableForCustomOverride}g&&(s=!1),this.nativeUtils().setShowOngoingMeetingNotification(s,o,d,f,this._callFrameId)}}},{key:"updateNoOpRecordingEnsuringBackgroundContinuity",value:function(s){V()&&this.nativeUtils().enableNoOpRecordingEnsuringBackgroundContinuity&&this.nativeUtils().enableNoOpRecordingEnsuringBackgroundContinuity(s)}},{key:"toggleParticipantAudioBasedOnNativeAudioFocus",value:function(){var s,o;if(V()){var d=(s=this._callMachine())===null||s===void 0||(o=s.store)===null||o===void 0?void 0:o.getState();for(var f in d?.streams){var g=d.streams[f];g&&g.pendingTrack&&g.pendingTrack.kind==="audio"&&(g.pendingTrack.enabled=this._hasNativeAudioFocus)}}}},{key:"disableReactNativeAutoDeviceManagement",value:function(s){return this.properties.reactNativeConfig&&this.properties.reactNativeConfig.disableAutoDeviceManagement&&this.properties.reactNativeConfig.disableAutoDeviceManagement[s]}},{key:"absoluteUrl",value:function(s){if(s!==void 0){var o=document.createElement("a");return o.href=s,o.href}}},{key:"sayHello",value:function(){var s="hello, world.";return console.log(s),s}},{key:"_logCallQualityTestResults",value:function(s){if(this._callMachineInitialized){var o={action:pt,level:"info",code:1012,results:s};this.sendMessageToCallMachine(o)}else console.warn("_logCallQualityTestResults() must be called after daily initialization")}},{key:"_logUseAfterDestroy",value:function(){if(this.needsLoad())if(_e&&!_e.needsLoad()){var s={action:pt,level:"error",code:this.strictMode?9995:9997};_e.sendMessageToCallMachine(s)}else this.strictMode||console.error("You are are attempting to use a call instance that was previously destroyed, which is unsupported. Please remove `strictMode: false` from your constructor properties to enable strict mode to track down and fix this unsupported usage.");else{var o={action:pt,level:"error",code:this.strictMode?9995:9997};this._messageChannel.sendMessageToCallMachine(o,null,this._iframe,this._callFrameId)}}},{key:"_logDuplicateInstanceAttempt",value:function(){var s=_e._callMachineInitialized?_e:this._callMachineInitialized?this:void 0;s?(s.sendMessageToCallMachine({action:pt,level:"warn",code:this.strictMode?9990:9992}),this._delayDuplicateInstanceLog=!1):(this._delayDuplicateInstanceLog=!0,_e._delayDuplicateInstanceLog=!0)}},{key:"_maybeSendToSentry",value:function(s){var o,d,f,g,_,M;if(!((o=s.error)!==null&&o!==void 0&&o.type&&!["connection-error","end-of-life","no-room"].includes(s.error.type))){var A=(d=this.properties)!==null&&d!==void 0&&d.url?new URL(this.properties.url):void 0,x="production";A&&A.host.includes(".staging.daily")&&(x="staging");var Q,Z,ee,le,K,dn=new To({dsn:"https://f10f1c81e5d44a4098416c0867a8b740@o77906.ingest.sentry.io/168844",transport:Co,integrations:[new di.GlobalHandlers({onunhandledrejection:!1}),new di.HttpContext],environment:x}),te=new sr(dn,void 0,ce.version());if(this.session_id&&te.setExtra("sessionId",this.session_id),this.properties){var ve=N({},this.properties);ve.userName=ve.userName?"[Filtered]":void 0,ve.userData=ve.userData?"[Filtered]":void 0,ve.token=ve.token?"[Filtered]":void 0,te.setExtra("properties",ve)}if(A){var je=A.searchParams.get("domain");if(!je){var Ot=A.host.match(/(.*?)\./);je=Ot&&Ot[1]||""}je&&te.setTag("domain",je)}s.error&&(te.setTag("fatalErrorType",s.error.type),te.setExtra("errorDetails",s.error.details),!((Q=s.error.details)===null||Q===void 0)&&Q.uri&&te.setTag("serverAddress",s.error.details.uri),!((Z=s.error.details)===null||Z===void 0)&&Z.workerGroup&&te.setTag("workerGroup",s.error.details.workerGroup),!((ee=s.error.details)===null||ee===void 0)&&ee.geoGroup&&te.setTag("geoGroup",s.error.details.geoGroup),!((le=s.error.details)===null||le===void 0)&&le.on&&te.setTag("connectionAttempt",s.error.details.on),(K=s.error.details)!==null&&K!==void 0&&K.bundleUrl&&(te.setTag("bundleUrl",s.error.details.bundleUrl),te.setTag("bundleError",s.error.details.sourceError.type))),te.setTags({callMode:this._callObjectMode?V()?"reactNative":(f=this.properties)!==null&&f!==void 0&&(g=f.dailyConfig)!==null&&g!==void 0&&(_=g.callMode)!==null&&_!==void 0&&_.includes("prebuilt")?this.properties.dailyConfig.callMode:"custom":"prebuilt-frame",version:ce.version()});var P=((M=s.error)===null||M===void 0?void 0:M.msg)||s.errorMsg;te.run(function(La){La.captureException(new Error(P))})}}},{key:"_callMachine",value:function(){var s,o,d;return(s=window._daily)===null||s===void 0||(o=s.instances)===null||o===void 0||(d=o[this._callFrameId])===null||d===void 0?void 0:d.callMachine}}],[{key:"supportedBrowser",value:function(){if(V())return{supported:!0,mobile:!0,name:"React Native",version:null,supportsScreenShare:!0,supportsSfu:!0,supportsVideoProcessing:!1,supportsAudioProcessing:!1};var s=Va.getParser(fe());return{supported:!!bi(),mobile:s.getPlatformType()==="mobile",name:s.getBrowserName(),version:s.getBrowserVersion(),supportsFullscreen:!!yi(),supportsScreenShare:!!lc(),supportsSfu:!!bi(),supportsVideoProcessing:pa(),supportsAudioProcessing:fa()}}},{key:"version",value:function(){return"0.66.0"}},{key:"createCallObject",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return s.layout="none",new ce(null,s)}},{key:"wrap",value:function(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(F(),!s||!s.contentWindow||typeof s.src!="string")throw new Error("DailyIframe::Wrap needs an iframe-like first argument");return o.layout||(o.customLayout?o.layout="custom-v1":o.layout="browser"),new ce(s,o)}},{key:"createFrame",value:function(s,o){var d,f;F(),s&&o?(d=s,f=o):s&&s.append?(d=s,f={}):(d=document.body,f=s||{});var g=f.iframeStyle;g||(g=d===document.body?{position:"fixed",border:"1px solid black",backgroundColor:"white",width:"375px",height:"450px",right:"1em",bottom:"1em"}:{border:0,width:"100%",height:"100%"});var _=document.createElement("iframe");window.navigator&&window.navigator.userAgent.match(/Chrome\/61\./)?_.allow="microphone, camera":_.allow="microphone; camera; autoplay; display-capture; screen-wake-lock",_.style.visibility="hidden",d.appendChild(_),_.style.visibility=null,Object.keys(g).forEach(function(M){return _.style[M]=g[M]}),f.layout||(f.customLayout?f.layout="custom-v1":f.layout="browser");try{return new ce(_,f)}catch(M){throw d.removeChild(_),M}}},{key:"createTransparentFrame",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};F();var o=document.createElement("iframe");return o.allow="microphone; camera; autoplay",o.style.cssText=`
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: 0;
      pointer-events: none;
    `,document.body.appendChild(o),s.layout||(s.layout="custom-v1"),ce.wrap(o,s)}},{key:"getCallInstance",value:function(){return _e}}]),ce}();function Qe(t,e){var n={};for(var r in t)if(t[r]instanceof MediaStreamTrack)n[r]=vt;else if(r==="dailyConfig"){if(t[r].modifyLocalSdpHook){var i=window._daily.instances[e].customCallbacks||{};i.modifyLocalSdpHook=t[r].modifyLocalSdpHook,window._daily.instances[e].customCallbacks=i,delete t[r].modifyLocalSdpHook}if(t[r].modifyRemoteSdpHook){var a=window._daily.instances[e].customCallbacks||{};a.modifyRemoteSdpHook=t[r].modifyRemoteSdpHook,window._daily.instances[e].customCallbacks=a,delete t[r].modifyRemoteSdpHook}n[r]=t[r]}else n[r]=t[r];return n}function W(t){var e=arguments.length>2?arguments[2]:void 0;if(t!==Ge){var n="".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," only supported after join.");throw e&&(n+=" ".concat(e)),console.error(n),new Error(n)}}function Ht(t,e){return[nn,Ge].includes(t)||e}function Fi(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"This daily-js method",r=arguments.length>3?arguments[3]:void 0;if(Ht(t,e)){var i="".concat(n," not supported after joining a meeting.");throw r&&(i+=" ".concat(r)),console.error(i),new Error(i)}}function wn(t){var e=arguments.length>2?arguments[2]:void 0;if(!t){var n="".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," requires preAuth(), startCamera(), or join() to initialize call state.");throw e&&(n+=" ".concat(e)),console.error(n),new Error(n)}}function Fe(t){if(t){var e="A pre-call quality test is in progress. Please try ".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," again once testing has completed. Use stopTestCallQuality() to end it early.");throw console.error(e),new Error(e)}}function ye(t){if(!t){var e="".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," is only supported on custom callObject instances");throw console.error(e),new Error(e)}}function ae(t){if(t){var e="".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," is only supported as part of Daily's Prebuilt");throw console.error(e),new Error(e)}}function F(){if(V())throw new Error("This daily-js method is not currently supported in React Native")}function ft(){if(!V())throw new Error("This daily-js method is only supported in React Native")}function ya(t){if(t===void 0)return!0;var e;if(typeof t=="string")e=t;else try{e=JSON.stringify(t),se(JSON.parse(e),t)||console.warn("The userData provided will be modified when serialized.")}catch(n){throw Error("userData must be serializable to JSON: ".concat(n))}if(e.length>4096)throw Error("userData is too large (".concat(e.length," characters). Maximum size suppported is ").concat(4096,"."));return!0}function ba(t,e){for(var n=e.allowAllParticipantsKey,r=function(p){var v=["local"];return n||v.push("*"),p&&!v.includes(p)},i=function(p){return!!(p.layer===void 0||Number.isInteger(p.layer)&&p.layer>=0||p.layer==="inherit")},a=function(p){return!!p&&!(p.video&&!i(p.video))&&!(p.screenVideo&&!i(p.screenVideo))},c=0,l=Object.entries(t);c<l.length;c++){var u=$e(l[c],2),m=u[0],h=u[1];if(!r(m)||!a(h))return!1}return!0}function Sa(t){return q(t)==="object"&&!(t.video&&(q(t.video)!=="object"||!function(i){var a=["type","config"];return!i||q(i)!=="object"||!function(c){return typeof c!="string"?!1:Object.values(zt).includes(c)?!0:(console.error("inputSettings video processor type invalid"),!1)}(i.type)||i.config&&(q(i.config)!=="object"||!function(c,l){var u=Object.keys(l);if(u.length===0)return!0;var m="invalid object in inputSettings -> video -> processor -> config";switch(c){case zt.BGBLUR:return u.length>1||u[0]!=="strength"?(console.error(m),!1):!(typeof l.strength!="number"||l.strength<=0||l.strength>1||isNaN(l.strength))||(console.error("".concat(m,"; expected: {0 < strength <= 1}, got: ").concat(l.strength)),!1);case zt.BGIMAGE:return!(l.source!==void 0&&!function(h){if(h.source==="default")return h.type="default",!0;if(h.source instanceof ArrayBuffer)return!0;if(St(h.source))return h.type="url",!!function(k){var S=new URL(k),w=S.pathname;if(S.protocol==="data:")try{var T=w.substring(w.indexOf(":")+1,w.indexOf(";")).split("/")[1];return yn.includes(T)}catch(J){return console.error("failed to deduce blob content type",J),!1}var I=w.split(".").at(-1).toLowerCase().trim();return yn.includes(I)}(h.source)||(console.error("invalid image type; supported types: [".concat(yn.join(", "),"]")),!1);return p=h.source,v=Number(p),isNaN(v)||!Number.isInteger(v)||v<=0||v>_i?(console.error("invalid image selection; must be an int, > 0, <= ".concat(_i)),!1):(h.type="daily-preselect",!0);var p,v}(l));default:return!0}}(i.type,i.config))?!1:(Object.keys(i).filter(function(c){return!a.includes(c)}).forEach(function(c){console.warn("invalid key inputSettings -> video -> processor : ".concat(c)),delete i[c]}),!0)}(t.video.processor)))&&!(t.audio&&(q(t.audio)!=="object"||(n=t.audio.processor,r=["type"],!n||q(n)!=="object"||(Object.keys(n).filter(function(i){return!r.includes(i)}).forEach(function(i){console.warn("invalid key inputSettings -> audio -> processor : ".concat(i)),delete n[i]}),e=n.type,typeof e!="string"||!Object.values(da).includes(e)&&(console.error("inputSettings audio processor type invalid"),1)))));var e,n,r}function Ea(t,e){var n,r=[];t.video&&!pa((n=e?.useLegacyVideoProcessor)!==null&&n!==void 0&&n)&&(delete t.video,r.push("video")),t.audio&&!fa()&&(delete t.audio,r.push("audio")),r.length>0&&console.error("Ignoring settings for browser- or platform-unsupported input processor(s): ".concat(r.join(", ")))}function Xn(){var t=Object.values(zt).join(" | "),e=Object.values(da).join(" | ");return"inputSettings must be of the form: { video?: { processor: { type: [ ".concat(t," ], config?: {} } }, audio?: { processor: {type: [ ").concat(e," ] } } }")}function wa(t){var e=t.allowAllParticipantsKey;return"receiveSettings must be of the form { [<remote participant id> | ".concat(ys).concat(e?' | "'.concat(bs,'"'):"","]: ")+'{ [video: [{ layer: [<non-negative integer> | "inherit"] } | "inherit"]], [screenVideo: [{ layer: [<non-negative integer> | "inherit"] } | "inherit"]] }}}'}function ka(){return"customIntegrations should be an object of type ".concat(JSON.stringify(Qn),".")}function Ta(t){if(t&&q(t)!=="object"||Array.isArray(t))return console.error("customTrayButtons should be an Object of the type ".concat(JSON.stringify(sn),".")),!1;if(t)for(var e=0,n=Object.entries(t);e<n.length;e++)for(var r=$e(n[e],1)[0],i=0,a=Object.entries(t[r]);i<a.length;i++){var c=$e(a[i],2),l=c[0],u=c[1];if(l==="iconPath"&&!St(u)||l==="iconPathDarkMode"&&!St(u))return console.error("customTrayButton ".concat(l," should be a url.")),!1;var m=sn.id[l];if(!m)return console.error("customTrayButton does not support key ".concat(l)),!1;if(q(u)!==m)return console.error("customTrayButton ".concat(l," should be a ").concat(m,".")),!1}return!0}function Ca(t){if(!t||t&&q(t)!=="object"||Array.isArray(t))return console.error(ka()),!1;for(var e=function(p){return"".concat(p," should be ").concat(Qn.id[p])},n=function(p,v){return console.error("customIntegration ".concat(p,": ").concat(v))},r=0,i=Object.entries(t);r<i.length;r++){var a=$e(i[r],1)[0];if(!("label"in t[a]))return n(a,"label is required"),!1;if(!("location"in t[a]))return n(a,"location is required"),!1;if(!("src"in t[a])&&!("srcdoc"in t[a]))return n(a,"src or srcdoc is required"),!1;for(var c=0,l=Object.entries(t[a]);c<l.length;c++){var u=$e(l[c],2),m=u[0],h=u[1];switch(m){case"allow":case"csp":case"name":case"referrerPolicy":case"sandbox":if(typeof h!="string")return n(a,e(m)),!1;break;case"iconURL":if(!St(h))return n(a,"".concat(m," should be a url")),!1;break;case"src":if("srcdoc"in t[a])return n(a,"cannot have both src and srcdoc"),!1;if(!St(h))return n(a,'src "'.concat(h,'" is not a valid URL')),!1;break;case"srcdoc":if("src"in t[a])return n(a,"cannot have both src and srcdoc"),!1;if(typeof h!="string")return n(a,e(m)),!1;break;case"location":if(!["main","sidebar"].includes(h))return n(a,e(m)),!1;break;case"controlledBy":if(h!=="*"&&h!=="owners"&&(!Array.isArray(h)||h.some(function(p){return typeof p!="string"})))return n(a,e(m)),!1;break;case"shared":if((!Array.isArray(h)||h.some(function(p){return typeof p!="string"}))&&h!=="owners"&&typeof h!="boolean")return n(a,e(m)),!1;break;default:if(!Qn.id[m])return console.error("customIntegration does not support key ".concat(m)),!1}}}return!0}function Ma(t,e){if(e===void 0)return!1;switch(q(e)){case"string":return q(t)===e;case"object":if(q(t)!=="object")return!1;for(var n in t)if(!Ma(t[n],e[n]))return!1;return!0;default:return!1}}function Ui(t){if(q(t)!=="object")throw new Error('RemoteMediaPlayerSettings: must be "object" type');if(t.state&&!Object.values(qn).includes(t.state))throw new Error("Invalid value for RemoteMediaPlayerSettings.state, valid values are: "+JSON.stringify(qn));if(t.volume){if(typeof t.volume!="number")throw new Error('RemoteMediaPlayerSettings.volume: must be "number" type');if(t.volume<0||t.volume>2)throw new Error("RemoteMediaPlayerSettings.volume: must be between 0.0 - 2.0")}}function Bi(t,e,n){return!(typeof t!="number"||t<e||t>n)}function kn(t,e){return t&&!e&&delete t.data,t}const Bc=Object.freeze(Object.defineProperty({__proto__:null,DAILY_ACCESS_LEVEL_FULL:_s,DAILY_ACCESS_LEVEL_LOBBY:Bo,DAILY_ACCESS_LEVEL_NONE:Vo,DAILY_ACCESS_UNKNOWN:Yt,DAILY_CAMERA_ERROR_CAM_AND_MIC_IN_USE:ec,DAILY_CAMERA_ERROR_CAM_IN_USE:Xo,DAILY_CAMERA_ERROR_CONSTRAINTS:ic,DAILY_CAMERA_ERROR_MIC_IN_USE:Zo,DAILY_CAMERA_ERROR_NOT_FOUND:rc,DAILY_CAMERA_ERROR_PERMISSIONS:tc,DAILY_CAMERA_ERROR_UNDEF_MEDIADEVICES:nc,DAILY_CAMERA_ERROR_UNKNOWN:sc,DAILY_EVENT_ACCESS_STATE_UPDATED:Ps,DAILY_EVENT_ACTIVE_SPEAKER_CHANGE:Xs,DAILY_EVENT_ACTIVE_SPEAKER_MODE_CHANGE:Zs,DAILY_EVENT_APP_MSG:qs,DAILY_EVENT_CAMERA_ERROR:ks,DAILY_EVENT_CPU_LOAD_CHANGE:na,DAILY_EVENT_ERROR:Wt,DAILY_EVENT_EXIT_FULLSCREEN:Be,DAILY_EVENT_FACE_COUNTS_UPDATED:ra,DAILY_EVENT_FULLSCREEN:Ue,DAILY_EVENT_IFRAME_LAUNCH_CONFIG:Es,DAILY_EVENT_IFRAME_READY_FOR_LAUNCH_CONFIG:Ss,DAILY_EVENT_INPUT_SETTINGS_UPDATED:ua,DAILY_EVENT_JOINED_MEETING:Ts,DAILY_EVENT_JOINING_MEETING:Vn,DAILY_EVENT_LANG_UPDATED:ca,DAILY_EVENT_LEFT_MEETING:Cs,DAILY_EVENT_LIVE_STREAMING_ERROR:oa,DAILY_EVENT_LIVE_STREAMING_STARTED:ia,DAILY_EVENT_LIVE_STREAMING_STOPPED:aa,DAILY_EVENT_LIVE_STREAMING_UPDATED:sa,DAILY_EVENT_LOADED:Gt,DAILY_EVENT_LOADING:Un,DAILY_EVENT_LOAD_ATTEMPT_FAILED:Bn,DAILY_EVENT_LOCAL_SCREEN_SHARE_CANCELED:Qs,DAILY_EVENT_LOCAL_SCREEN_SHARE_STARTED:Hs,DAILY_EVENT_LOCAL_SCREEN_SHARE_STOPPED:Ks,DAILY_EVENT_MEETING_SESSION_DATA_ERROR:ac,DAILY_EVENT_MEETING_SESSION_STATE_UPDATED:Is,DAILY_EVENT_MEETING_SESSION_SUMMARY_UPDATED:Ds,DAILY_EVENT_NETWORK_CONNECTION:ta,DAILY_EVENT_NETWORK_QUALITY_CHANGE:ea,DAILY_EVENT_NONFATAL_ERROR:Jt,DAILY_EVENT_PARTICIPANT_COUNTS_UPDATED:Ls,DAILY_EVENT_PARTICIPANT_JOINED:Ms,DAILY_EVENT_PARTICIPANT_LEFT:Os,DAILY_EVENT_PARTICIPANT_UPDATED:As,DAILY_EVENT_RECEIVE_SETTINGS_UPDATED:la,DAILY_EVENT_RECORDING_DATA:Gs,DAILY_EVENT_RECORDING_ERROR:Vs,DAILY_EVENT_RECORDING_STARTED:qt,DAILY_EVENT_RECORDING_STATS:Bs,DAILY_EVENT_RECORDING_STOPPED:$t,DAILY_EVENT_RECORDING_UPLOAD_COMPLETED:Ys,DAILY_EVENT_REMOTE_MEDIA_PLAYER_STARTED:Js,DAILY_EVENT_REMOTE_MEDIA_PLAYER_STOPPED:zs,DAILY_EVENT_REMOTE_MEDIA_PLAYER_UPDATED:Ws,DAILY_EVENT_STARTED_CAMERA:ws,DAILY_EVENT_THEME_UPDATED:Fn,DAILY_EVENT_TRACK_STARTED:Yn,DAILY_EVENT_TRACK_STOPPED:Gn,DAILY_EVENT_TRANSCRIPTION_ERROR:Us,DAILY_EVENT_TRANSCRIPTION_MSG:$s,DAILY_EVENT_TRANSCRIPTION_STARTED:xs,DAILY_EVENT_TRANSCRIPTION_STOPPED:Fs,DAILY_EVENT_WAITING_PARTICIPANT_ADDED:Ns,DAILY_EVENT_WAITING_PARTICIPANT_REMOVED:js,DAILY_EVENT_WAITING_PARTICIPANT_UPDATED:Rs,DAILY_FATAL_ERROR_CONNECTION:Qo,DAILY_FATAL_ERROR_EJECTED:Yo,DAILY_FATAL_ERROR_EOL:Ho,DAILY_FATAL_ERROR_EXP_ROOM:$o,DAILY_FATAL_ERROR_EXP_TOKEN:Jo,DAILY_FATAL_ERROR_MEETING_FULL:zo,DAILY_FATAL_ERROR_NBF_ROOM:Go,DAILY_FATAL_ERROR_NBF_TOKEN:qo,DAILY_FATAL_ERROR_NOT_ALLOWED:Ko,DAILY_FATAL_ERROR_NO_ROOM:Wo,DAILY_RECEIVE_SETTINGS_ALL_PARTICIPANTS_KEY:bs,DAILY_RECEIVE_SETTINGS_BASE_KEY:ys,DAILY_STATE_ERROR:Te,DAILY_STATE_JOINED:Ge,DAILY_STATE_JOINING:nn,DAILY_STATE_LEFT:ke,DAILY_STATE_NEW:xn,DAILY_TRACK_STATE_BLOCKED:No,DAILY_TRACK_STATE_INTERRUPTED:Fo,DAILY_TRACK_STATE_LOADING:xo,DAILY_TRACK_STATE_OFF:Ro,DAILY_TRACK_STATE_PLAYABLE:Uo,DAILY_TRACK_STATE_SENDABLE:jo,default:Uc},Symbol.toStringTag,{value:"Module"})),Vc=Pa(Bc);var Bt={exports:{}},Vi;function Yc(){if(Vi)return Bt.exports;Vi=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(b,C,O){return Function.prototype.apply.call(b,C,O)},n;t&&typeof t.ownKeys=="function"?n=t.ownKeys:Object.getOwnPropertySymbols?n=function(b){return Object.getOwnPropertyNames(b).concat(Object.getOwnPropertySymbols(b))}:n=function(b){return Object.getOwnPropertyNames(b)};function r(E){console&&console.warn&&console.warn(E)}var i=Number.isNaN||function(b){return b!==b};function a(){a.init.call(this)}Bt.exports=a,Bt.exports.once=I,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function l(E){if(typeof E!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof E)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(E){if(typeof E!="number"||E<0||i(E))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+E+".");c=E}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(b){if(typeof b!="number"||b<0||i(b))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+b+".");return this._maxListeners=b,this};function u(E){return E._maxListeners===void 0?a.defaultMaxListeners:E._maxListeners}a.prototype.getMaxListeners=function(){return u(this)},a.prototype.emit=function(b){for(var C=[],O=1;O<arguments.length;O++)C.push(arguments[O]);var L=b==="error",U=this._events;if(U!==void 0)L=L&&U.error===void 0;else if(!L)return!1;if(L){var j;if(C.length>0&&(j=C[0]),j instanceof Error)throw j;var re=new Error("Unhandled error."+(j?" ("+j.message+")":""));throw re.context=j,re}var Ae=U[b];if(Ae===void 0)return!1;if(typeof Ae=="function")e(Ae,this,C);else for(var ut=Ae.length,At=S(Ae,ut),O=0;O<ut;++O)e(At[O],this,C);return!0};function m(E,b,C,O){var L,U,j;if(l(C),U=E._events,U===void 0?(U=E._events=Object.create(null),E._eventsCount=0):(U.newListener!==void 0&&(E.emit("newListener",b,C.listener?C.listener:C),U=E._events),j=U[b]),j===void 0)j=U[b]=C,++E._eventsCount;else if(typeof j=="function"?j=U[b]=O?[C,j]:[j,C]:O?j.unshift(C):j.push(C),L=u(E),L>0&&j.length>L&&!j.warned){j.warned=!0;var re=new Error("Possible EventEmitter memory leak detected. "+j.length+" "+String(b)+" listeners added. Use emitter.setMaxListeners() to increase limit");re.name="MaxListenersExceededWarning",re.emitter=E,re.type=b,re.count=j.length,r(re)}return E}a.prototype.addListener=function(b,C){return m(this,b,C,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(b,C){return m(this,b,C,!0)};function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(E,b,C){var O={fired:!1,wrapFn:void 0,target:E,type:b,listener:C},L=h.bind(O);return L.listener=C,O.wrapFn=L,L}a.prototype.once=function(b,C){return l(C),this.on(b,p(this,b,C)),this},a.prototype.prependOnceListener=function(b,C){return l(C),this.prependListener(b,p(this,b,C)),this},a.prototype.removeListener=function(b,C){var O,L,U,j,re;if(l(C),L=this._events,L===void 0)return this;if(O=L[b],O===void 0)return this;if(O===C||O.listener===C)--this._eventsCount===0?this._events=Object.create(null):(delete L[b],L.removeListener&&this.emit("removeListener",b,O.listener||C));else if(typeof O!="function"){for(U=-1,j=O.length-1;j>=0;j--)if(O[j]===C||O[j].listener===C){re=O[j].listener,U=j;break}if(U<0)return this;U===0?O.shift():w(O,U),O.length===1&&(L[b]=O[0]),L.removeListener!==void 0&&this.emit("removeListener",b,re||C)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(b){var C,O,L;if(O=this._events,O===void 0)return this;if(O.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):O[b]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete O[b]),this;if(arguments.length===0){var U=Object.keys(O),j;for(L=0;L<U.length;++L)j=U[L],j!=="removeListener"&&this.removeAllListeners(j);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(C=O[b],typeof C=="function")this.removeListener(b,C);else if(C!==void 0)for(L=C.length-1;L>=0;L--)this.removeListener(b,C[L]);return this};function v(E,b,C){var O=E._events;if(O===void 0)return[];var L=O[b];return L===void 0?[]:typeof L=="function"?C?[L.listener||L]:[L]:C?T(L):S(L,L.length)}a.prototype.listeners=function(b){return v(this,b,!0)},a.prototype.rawListeners=function(b){return v(this,b,!1)},a.listenerCount=function(E,b){return typeof E.listenerCount=="function"?E.listenerCount(b):k.call(E,b)},a.prototype.listenerCount=k;function k(E){var b=this._events;if(b!==void 0){var C=b[E];if(typeof C=="function")return 1;if(C!==void 0)return C.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function S(E,b){for(var C=new Array(b),O=0;O<b;++O)C[O]=E[O];return C}function w(E,b){for(;b+1<E.length;b++)E[b]=E[b+1];E.pop()}function T(E){for(var b=new Array(E.length),C=0;C<b.length;++C)b[C]=E[C].listener||E[C];return b}function I(E,b){return new Promise(function(C,O){function L(j){E.removeListener(b,U),O(j)}function U(){typeof E.removeListener=="function"&&E.removeListener("error",L),C([].slice.call(arguments))}z(E,b,U,{once:!0}),b!=="error"&&J(E,L,{once:!0})})}function J(E,b,C){typeof E.on=="function"&&z(E,"error",b,C)}function z(E,b,C,O){if(typeof E.on=="function")O.once?E.once(b,C):E.on(b,C);else if(typeof E.addEventListener=="function")E.addEventListener(b,function L(U){O.once&&E.removeEventListener(b,L),C(U)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof E)}return Bt.exports}var mt={},Ee={},Yi;function Gc(){if(Yi)return Ee;Yi=1,Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.Api=Ee.HttpClient=Ee.ContentType=void 0;var t;(function(r){r.Json="application/json",r.FormData="multipart/form-data",r.UrlEncoded="application/x-www-form-urlencoded",r.Text="text/plain"})(t||(Ee.ContentType=t={}));class e{baseUrl="https://api.vapi.ai";securityData=null;securityWorker;abortControllers=new Map;customFetch=(...i)=>fetch(...i);baseApiParams={credentials:"same-origin",headers:{},redirect:"follow",referrerPolicy:"no-referrer"};constructor(i={}){Object.assign(this,i)}setSecurityData=i=>{this.securityData=i};encodeQueryParam(i,a){return`${encodeURIComponent(i)}=${encodeURIComponent(typeof a=="number"?a:`${a}`)}`}addQueryParam(i,a){return this.encodeQueryParam(a,i[a])}addArrayQueryParam(i,a){return i[a].map(l=>this.encodeQueryParam(a,l)).join("&")}toQueryString(i){const a=i||{};return Object.keys(a).filter(l=>typeof a[l]<"u").map(l=>Array.isArray(a[l])?this.addArrayQueryParam(a,l):this.addQueryParam(a,l)).join("&")}addQueryParams(i){const a=this.toQueryString(i);return a?`?${a}`:""}contentFormatters={[t.Json]:i=>i!==null&&(typeof i=="object"||typeof i=="string")?JSON.stringify(i):i,[t.Text]:i=>i!==null&&typeof i!="string"?JSON.stringify(i):i,[t.FormData]:i=>Object.keys(i||{}).reduce((a,c)=>{const l=i[c];return a.append(c,l instanceof Blob?l:typeof l=="object"&&l!==null?JSON.stringify(l):`${l}`),a},new FormData),[t.UrlEncoded]:i=>this.toQueryString(i)};mergeRequestParams(i,a){return{...this.baseApiParams,...i,...a||{},headers:{...this.baseApiParams.headers||{},...i.headers||{},...a&&a.headers||{}}}}createAbortSignal=i=>{if(this.abortControllers.has(i)){const c=this.abortControllers.get(i);return c?c.signal:void 0}const a=new AbortController;return this.abortControllers.set(i,a),a.signal};abortRequest=i=>{const a=this.abortControllers.get(i);a&&(a.abort(),this.abortControllers.delete(i))};request=async({body:i,secure:a,path:c,type:l,query:u,format:m,baseUrl:h,cancelToken:p,...v})=>{const k=(typeof a=="boolean"?a:this.baseApiParams.secure)&&this.securityWorker&&await this.securityWorker(this.securityData)||{},S=this.mergeRequestParams(v,k),w=u&&this.toQueryString(u),T=this.contentFormatters[l||t.Json],I=m||S.format;return this.customFetch(`${h||this.baseUrl||""}${c}${w?`?${w}`:""}`,{...S,headers:{...S.headers||{},...l&&l!==t.FormData?{"Content-Type":l}:{}},signal:(p?this.createAbortSignal(p):S.signal)||null,body:typeof i>"u"||i===null?null:T(i)}).then(async J=>{const z=J;z.data=null,z.error=null;const E=I?await J[I]().then(b=>(z.ok?z.data=b:z.error=b,z)).catch(b=>(z.error=b,z)):z;if(p&&this.abortControllers.delete(p),!J.ok)throw E;return E})}}Ee.HttpClient=e;class n extends e{assistant={assistantControllerCreate:(i,a={})=>this.request({path:"/assistant",method:"POST",body:i,secure:!0,type:t.Json,format:"json",...a}),assistantControllerFindAll:(i,a={})=>this.request({path:"/assistant",method:"GET",query:i,secure:!0,format:"json",...a}),assistantControllerFindOne:(i,a={})=>this.request({path:`/assistant/${i}`,method:"GET",secure:!0,format:"json",...a}),assistantControllerUpdate:(i,a,c={})=>this.request({path:`/assistant/${i}`,method:"PATCH",body:a,secure:!0,type:t.Json,format:"json",...c}),assistantControllerReplace:(i,a,c={})=>this.request({path:`/assistant/${i}`,method:"PUT",body:a,secure:!0,type:t.Json,format:"json",...c}),assistantControllerRemove:(i,a={})=>this.request({path:`/assistant/${i}`,method:"DELETE",secure:!0,format:"json",...a})};call={callControllerFindAll:(i,a={})=>this.request({path:"/call",method:"GET",query:i,secure:!0,format:"json",...a}),callControllerFindOne:(i,a={})=>this.request({path:`/call/${i}`,method:"GET",secure:!0,format:"json",...a}),callControllerDeleteCallData:(i,a={})=>this.request({path:`/call/${i}`,method:"DELETE",secure:!0,format:"json",...a}),callControllerUpdate:(i,a,c={})=>this.request({path:`/call/${i}`,method:"PATCH",body:a,secure:!0,type:t.Json,format:"json",...c}),callControllerCreatePhoneCall:(i,a={})=>this.request({path:"/call/phone",method:"POST",body:i,secure:!0,type:t.Json,format:"json",...a}),callControllerCreateWebCall:(i,a={})=>this.request({path:"/call/web",method:"POST",body:i,secure:!0,type:t.Json,format:"json",...a})};credential={credentialControllerCreate:(i,a={})=>this.request({path:"/credential",method:"POST",body:i,secure:!0,type:t.Json,format:"json",...a}),credentialControllerFindAll:(i,a={})=>this.request({path:"/credential",method:"GET",query:i,secure:!0,format:"json",...a}),credentialControllerFindOne:(i,a={})=>this.request({path:`/credential/${i}`,method:"GET",secure:!0,format:"json",...a}),credentialControllerUpdate:(i,a,c={})=>this.request({path:`/credential/${i}`,method:"PUT",body:a,secure:!0,type:t.Json,format:"json",...c}),credentialControllerRemove:(i,a={})=>this.request({path:`/credential/${i}`,method:"DELETE",secure:!0,format:"json",...a})};phoneNumber={phoneNumberControllerBuy:(i,a={})=>this.request({path:"/phone-number/buy",method:"POST",body:i,secure:!0,type:t.Json,format:"json",...a}),phoneNumberControllerImportTwilio:(i,a={})=>this.request({path:"/phone-number/import/twilio",method:"POST",body:i,secure:!0,type:t.Json,format:"json",...a}),phoneNumberControllerImportVonage:(i,a={})=>this.request({path:"/phone-number/import/vonage",method:"POST",body:i,secure:!0,type:t.Json,format:"json",...a}),phoneNumberControllerFindAll:(i,a={})=>this.request({path:"/phone-number",method:"GET",query:i,secure:!0,format:"json",...a}),phoneNumberControllerFindOne:(i,a={})=>this.request({path:`/phone-number/${i}`,method:"GET",secure:!0,format:"json",...a}),phoneNumberControllerUpdate:(i,a,c={})=>this.request({path:`/phone-number/${i}`,method:"PATCH",body:a,secure:!0,type:t.Json,format:"json",...c}),phoneNumberControllerRemove:(i,a={})=>this.request({path:`/phone-number/${i}`,method:"DELETE",secure:!0,format:"json",...a})};metrics={metricsControllerFindAll:(i,a={})=>this.request({path:"/metrics",method:"GET",query:i,secure:!0,format:"json",...a})};log={loggingControllerGetLogs:(i,a={})=>this.request({path:"/log",method:"GET",query:i,secure:!0,format:"json",...a})};tool={toolControllerCreate:(i,a={})=>this.request({path:"/tool",method:"POST",body:i,secure:!0,type:t.Json,format:"json",...a}),toolControllerFindAll:(i,a={})=>this.request({path:"/tool",method:"GET",query:i,secure:!0,format:"json",...a}),toolControllerFindOne:(i,a={})=>this.request({path:`/tool/${i}`,method:"GET",secure:!0,format:"json",...a}),toolControllerUpdate:(i,a,c={})=>this.request({path:`/tool/${i}`,method:"PATCH",body:a,secure:!0,type:t.Json,format:"json",...c}),toolControllerRemove:(i,a={})=>this.request({path:`/tool/${i}`,method:"DELETE",secure:!0,format:"json",...a})};file={fileControllerCreate:(i,a={})=>this.request({path:"/file/upload",method:"POST",body:i,secure:!0,type:t.FormData,format:"json",...a}),fileControllerFindAll:(i={})=>this.request({path:"/file",method:"GET",secure:!0,format:"json",...i}),fileControllerFindOne:(i,a={})=>this.request({path:`/file/${i}`,method:"GET",secure:!0,format:"json",...a}),fileControllerRemove:(i,a={})=>this.request({path:`/file/${i}`,method:"DELETE",secure:!0,format:"json",...a})}}return Ee.Api=n,Ee}var Gi;function qc(){if(Gi)return mt;Gi=1,Object.defineProperty(mt,"__esModule",{value:!0}),mt.client=void 0;const t=Gc(),e=new t.Api({baseUrl:"https://api.vapi.ai",baseApiParams:{secure:!0},securityWorker:async n=>{if(n)return{headers:{Authorization:`Bearer ${n}`}}}});return mt.client=e,mt}var qi;function $c(){if(qi)return Ke;qi=1;var t=Ke&&Ke.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(Ke,"__esModule",{value:!0});const e=t(Vc),n=t(Yc()),r=qc();function i(h){document.querySelector(`audio[data-participant-id="${h}"]`)?.remove()}async function a(h,p){h.muted=!1,h.autoplay=!0,p!=null&&(h.srcObject=new MediaStream([p]),await h.play())}async function c(h,p){const v=document.createElement("audio");return v.dataset.participantId=p,document.body.appendChild(v),await a(v,h),v}function l(h,p,v){h.participant.local||p.updateParticipant(h.participant.session_id,{setSubscribedTracks:{audio:!0,video:v}})}class u extends n.default{on(p,v){return super.on(p,v),this}once(p,v){return super.once(p,v),this}emit(p,...v){return super.emit(p,...v)}removeListener(p,v){return super.removeListener(p,v),this}removeAllListeners(p){return super.removeAllListeners(p),this}}class m extends u{started=!1;call=null;speakingTimeout=null;constructor(p,v){super(),r.client.baseUrl=v??"https://api.vapi.ai",r.client.setSecurityData(p)}cleanup(){this.started=!1,this.call?.destroy(),this.call=null,this.speakingTimeout=null}async start(p,v,k){if(!p&&!k)throw new Error("Assistant or Squad must be provided.");if(this.started)return null;this.started=!0;try{const S=(await r.client.call.callControllerCreateWebCall({assistant:typeof p=="string"?void 0:p,assistantId:typeof p=="string"?p:void 0,assistantOverrides:v,squad:typeof k=="string"?void 0:k,squadId:typeof k=="string"?k:void 0})).data;this.call&&this.cleanup();const w=S?.artifactPlan?.videoRecordingEnabled??!1;if(this.call=e.default.createCallObject({audioSource:!0,videoSource:w}),this.call.iframe()?.style.setProperty("display","none"),this.call.on("left-meeting",()=>{this.emit("call-end"),w&&this.call?.stopRecording(),this.cleanup()}),this.call.on("participant-left",T=>{T&&i(T.participant.session_id)}),this.call.on("error",T=>{this.emit("error",T),w&&this.call?.stopRecording()}),this.call.on("camera-error",T=>{this.emit("error",T)}),this.call.on("track-started",async T=>{!T||!T.participant||T.participant?.local||T.track.kind==="audio"&&(await c(T.track,T.participant.session_id),T?.participant?.user_name==="Vapi Speaker"&&this.call?.sendAppMessage("playable"))}),this.call.on("participant-joined",T=>{!T||!this.call||l(T,this.call,w)}),await this.call.join({url:S.webCallUrl,subscribeToTracksAutomatically:!1}),w){const T=new Date().getTime();this.call.startRecording({width:1280,height:720,backgroundColor:"#FF1F2D3D",layout:{preset:"default"}}),this.call.on("recording-started",()=>{this.send({type:"control",control:"say-first-message",videoRecordingStartDelaySeconds:(new Date().getTime()-T)/1e3})})}return this.call.startRemoteParticipantsAudioLevelObserver(100),this.call.on("remote-participants-audio-level",T=>{T&&this.handleRemoteParticipantsAudioLevel(T)}),this.call.on("app-message",T=>this.onAppMessage(T)),this.call.on("nonfatal-error",T=>{T?.type==="audio-processor-error"&&this.call?.updateInputSettings({audio:{processor:{type:"none"}}}).then(()=>{this.call?.setLocalAudio(!0)})}),this.call.updateInputSettings({audio:{processor:{type:"noise-cancellation"}}}),S}catch(S){return console.error(S),this.emit("error",S),this.cleanup(),null}}onAppMessage(p){if(p)try{if(p.data==="listening")return this.emit("call-start");try{const v=JSON.parse(p.data);this.emit("message",v)}catch(v){console.log("Error parsing message data: ",v)}}catch(v){console.error(v)}}handleRemoteParticipantsAudioLevel(p){const v=Object.values(p.participantsAudioLevel).reduce((S,w)=>S+w,0);this.emit("volume-level",Math.min(1,v/.15)),v>.01&&(this.speakingTimeout?(clearTimeout(this.speakingTimeout),this.speakingTimeout=null):this.emit("speech-start"),this.speakingTimeout=setTimeout(()=>{this.emit("speech-end"),this.speakingTimeout=null},1e3))}stop(){this.started=!1,this.call?.destroy(),this.call=null}send(p){this.call?.sendAppMessage(JSON.stringify(p))}setMuted(p){try{if(!this.call)throw new Error("Call object is not available.");this.call.setLocalAudio(!p)}catch(v){throw v}}isMuted(){try{return this.call?this.call.localAudio()===!1:!1}catch(p){throw p}}say(p,v){this.send({type:"say",message:p,endCallAfterSpoken:v})}setInputDevicesAsync(p){this.call?.setInputDevicesAsync(p)}setOutputDeviceAsync(p){this.call?.setOutputDeviceAsync(p)}}return Ke.default=m,Ke}var Aa=$c();const Jc=Da(Aa),zc=Ia({__proto__:null,default:Jc},[Aa]);export{zc as v};
